(()=>{var e,t,s,r,a={100:(e,t,s)=>{const r=s(681),a=async e=>new Promise(((t,s)=>{const a=r.request(e,(e=>{const s=[];let r=!1;e.on("data",(e=>{if(!r&&!String(e).startsWith("/*O_o*/"))return t(null);r=!0,s.push(e)})),e.on("end",(()=>{t({ok:!0,text:()=>Buffer.concat(s).toString()})}))}));a.on("error",s),a.end()}));e.exports=a,e.exports.default=a},908:(e,t,s)=>{const r="undefined"!=typeof window&&void 0!==window.document?window.fetch:s(100);class a{constructor(e,t){this.id=e,this.setOption(t)}setOption(e){e?"string"==typeof e?(this.sheetName=e,this.sheetId=this.sheetId||null):"object"==typeof e&&(this.sheetName=e.sheetName||this.sheetName,this.sheetId=e.sheetId||this.sheetId,this.useFormattedDate=e.hasOwnProperty("useFormattedDate")?e.useFormattedDate:this.useFormattedDate,this.useFormat=e.hasOwnProperty("useFormat")?e.useFormat:this.useFormat):(this.sheetName=this.sheetName||null,this.sheetId=this.sheetId||null,this.useFormattedDate=this.useFormattedDate||!1,this.useFormat=this.useFormat||!1)}isDate(e){return e&&"string"==typeof e&&/Date\((\d+),(\d+),(\d+)\)/.test(e)}async getSpreadsheetDataUsingFetch(){if(!this.id)return null;let e=`https://docs.google.com/spreadsheets/d/${this.id}/gviz/tq?`;e+=this.sheetId?`gid=${this.sheetId}`:`sheet=${this.sheetName}`;try{const t=await r(e);return t&&t.ok?t.text():null}catch(e){return console.error("Error fetching spreadsheet data:",e),null}}normalizeRow(e){return e.map((e=>e&&null!==e.v&&void 0!==e.v?e:{}))}applyHeaderIntoRows(e,t){return t.map((({c:e})=>this.normalizeRow(e))).map((t=>t.reduce(((t,s,r)=>null!==s.v&&void 0!==s.v?Object.assign(t,{[e[r]]:this.useFormat?s.f||s.v:this.useFormattedDate&&this.isDate(s.v)&&s.f||s.v}):t),{})))}getItems(e){let t=[];try{const s=/google\.visualization\.Query\.setResponse\(({.*})\);/,[r,a]=e.match(s),o=JSON.parse(a);if(o.table.cols.some((({label:e})=>!!e))){const e=o.table.cols.map((({label:e})=>e));t=this.applyHeaderIntoRows(e,o.table.rows)}else{const[e,...s]=o.table.rows,r=this.normalizeRow(e.c).map((e=>e.v));t=this.applyHeaderIntoRows(r,s)}}catch(e){console.error("Error parsing spreadsheet data:",e)}return t}async parse(e,t){if(e&&(this.id=e),t&&this.setOption(t),!this.id)throw new Error("SpreadsheetId is required.");const s=await this.getSpreadsheetDataUsingFetch();return null===s?[]:this.getItems(s)}}e.exports=a,e.exports.default=a},279:(e,t,s)=>{"use strict";s.d(t,{G:()=>n});var r=s(908),a=s.n(r);class o{constructor(e,t){this.spreadSheetId=e,this.sheetName=t}parse=async()=>{const e=new(a())(this.spreadSheetId,{sheetName:this.sheetName,useFormat:!0});return(await e.parse()).map((e=>{const t={};return Object.keys(e).forEach((s=>{var r;t[(r=s,r.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()})).replace(/\s+/g,""))]=e[s]})),t}))}}class n{constructor(e,t){this.cardId=e,this.settings=t}buildPurchasePrices=async()=>{const e=document.createElement("div");e.classList.add("tcg-collector-card-prices-wrapper");const t=document.createElement("div");t.classList.add("tcg-collector-card-prices");const s=new o(this.settings.googleSpreadSheetId,"Slabs / Singles"),r=(await s.parse()).filter((e=>e.cardId===this.cardId));if(0===r.length)return;r.forEach((function(e){const s=document.createElement("div");s.innerHTML=`<div>${e.purchaseDate}</div><div>${e.price}</div><div title="${e.gradingCompany||e.type}">${e.type}</div>`,t.appendChild(s)}));const a=document.createElement("div");return a.innerHTML="Purchase price(s)",a.classList.add("title"),e.appendChild(a),e.appendChild(t),e}}},496:(e,t,s)=>{"use strict";s.d(t,{w:()=>r});class r{static load=async()=>{const{settings:e}=await chrome.storage.sync.get("settings");return e}}},242:(e,t,s)=>{"use strict";s.a(e,(async(e,t)=>{try{var r=s(279),a=s(496);const e=await a.w.load();if(!e.googleSpreadSheetId)throw new Error("Google Spreadsheet ID not configured");const o=document.querySelector("div#card-page-inner-content div.card-image-controls");if(o){const t=new r.G(document.querySelector("[data-card-id]").getAttribute("data-card-id"),e);o.appendChild(await t.buildPurchasePrices())}t()}catch(e){t(e)}}),1)},681:()=>{}},o={};function n(e){var t=o[e];if(void 0!==t)return t.exports;var s=o[e]={exports:{}};return a[e](s,s.exports,n),s.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",s="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},n.a=(a,o,n)=>{var i;n&&((i=[]).d=-1);var c,d,h,l=new Set,u=a.exports,p=new Promise(((e,t)=>{h=t,d=e}));p[t]=u,p[e]=e=>(i&&e(i),l.forEach(e),p.catch((e=>{}))),a.exports=p,o((a=>{var o;c=(a=>a.map((a=>{if(null!==a&&"object"==typeof a){if(a[e])return a;if(a.then){var o=[];o.d=0,a.then((e=>{n[t]=e,r(o)}),(e=>{n[s]=e,r(o)}));var n={};return n[e]=e=>e(o),n}}var i={};return i[e]=e=>{},i[t]=a,i})))(a);var n=()=>c.map((e=>{if(e[s])throw e[s];return e[t]})),d=new Promise((t=>{(o=()=>t(n)).r=0;var s=e=>e!==i&&!l.has(e)&&(l.add(e),e&&!e.d&&(o.r++,e.push(o)));c.map((t=>t[e](s)))}));return o.r?d:n()}),(e=>(e?h(p[s]=e):d(u),r(i)))),i&&i.d<0&&(i.d=0)},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(242)})();