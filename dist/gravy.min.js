/*! For license information please see gravy.min.js.LICENSE.txt */
(()=>{var t,e,n,s,i={517:(t,e,n)=>{"use strict";n.d(e,{A:()=>b});function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function i(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s}var o={normalizePrecision:function(t){var e=t.reduce((function(t,e){return Math.max(t.getPrecision(),e.getPrecision())}));return t.map((function(t){return t.getPrecision()!==e?t.convertPrecision(e):t}))},minimum:function(t){var e=i(t),n=e[0],s=e.slice(1),r=n;return s.forEach((function(t){r=r.lessThan(t)?r:t})),r},maximum:function(t){var e=i(t),n=e[0],s=e.slice(1),r=n;return s.forEach((function(t){r=r.greaterThan(t)?r:t})),r}};function a(t){return!isNaN(parseInt(t))&&isFinite(t)}function c(t){return t%2==0}function d(t){return a(t)&&!Number.isInteger(t)}function l(t){return Math.abs(t)%1==.5}function u(t){return void 0===t}function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".",n={};return Object.entries(t).forEach((function(t){if("object"===s(t[1])){var i=p(t[1]);Object.entries(i).forEach((function(s){n[t[0]+e+s[0]]=s[1]}))}else n[t[0]]=t[1]})),n}function h(){var t={HALF_ODD:function(t){var e=Math.round(t);return l(t)&&c(e)?e-1:e},HALF_EVEN:function(t){var e=Math.round(t);return l(t)?c(e)?e:e-1:e},HALF_UP:function(t){return Math.round(t)},HALF_DOWN:function(t){return l(t)?Math.floor(t):Math.round(t)},HALF_TOWARDS_ZERO:function(t){return l(t)?Math.sign(t)*Math.floor(Math.abs(t)):Math.round(t)},HALF_AWAY_FROM_ZERO:function(t){return l(t)?Math.sign(t)*Math.ceil(Math.abs(t)):Math.round(t)},DOWN:function(t){return Math.floor(t)}};return{add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return d(t)||d(e)?function(t,e){var n=function(t){return Math.pow(10,function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0).toString();if(t.indexOf("e-")>0)return parseInt(t.split("e-")[1]);var e=t.split(".")[1];return e?e.length:0}(t))},s=Math.max(n(t),n(e));return Math.round(t*s)*Math.round(e*s)/(s*s)}(t,e):t*e},divide:function(t,e){return t/e},modulo:function(t,e){return t%e},round:function(e){return t[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HALF_EVEN"](e)}}}var g=h();function m(t){var e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;for(var n in e)t=t.replace("{{".concat(n,"}}"),e[n]);return t};return{getExchangeRate:function(n,i){return(r=t.endpoint,!Boolean(r)||"object"!==s(r)&&"function"!=typeof r||"function"!=typeof r.then?function(n,s){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,s){var i=Object.assign(new XMLHttpRequest,{onreadystatechange:function(){4===i.readyState&&(i.status>=200&&i.status<400?n(JSON.parse(i.responseText)):s(new Error(i.statusText)))},onerror:function(){s(new Error("Network error"))}});i.open("GET",t,!0),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var n in e)t.setRequestHeader(n,e[n])}(i,e.headers),i.send()}))}(e(t.endpoint,{from:n,to:s}),{headers:t.headers})}(n,i):t.endpoint).then((function(s){return p(s)[e(t.propertyPath,{from:n,to:i})]}));var r}}}function f(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Error;if(!t)throw new n(e)}function y(t){f(Number.isInteger(t),"You must provide an integer.",TypeError)}var v=h();const b=Object.assign((function t(e){var n=Object.assign({},{amount:t.defaultAmount,currency:t.defaultCurrency,precision:t.defaultPrecision},e),s=n.amount,i=n.currency,r=n.precision;y(s),y(r);var o=t.globalLocale,c=t.globalFormat,d=t.globalRoundingMode,l=t.globalFormatRoundingMode,p=Object.assign({},t.globalExchangeRatesApi),h=function(e){var n=Object.assign({},Object.assign({},{amount:s,currency:i,precision:r},e),Object.assign({},{locale:this.locale},e));return Object.assign(t({amount:n.amount,currency:n.currency,precision:n.precision}),{locale:n.locale})},b=function(t){f(this.hasSameCurrency(t),"You must provide a Dinero instance with the same currency.",TypeError)};return{getAmount:function(){return s},getCurrency:function(){return i},getLocale:function(){return this.locale||o},setLocale:function(t){return h.call(this,{locale:t})},getPrecision:function(){return r},convertPrecision:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;y(t);var n=this.getPrecision(),s=t>n,i=s?v.multiply:v.divide,r=s?[t,n]:[n,t],o=Math.pow(10,v.subtract.apply(v,r));return h.call(this,{amount:v.round(i(this.getAmount(),o),e),precision:t})},add:function(e){b.call(this,e);var n=t.normalizePrecision([this,e]);return h.call(this,{amount:v.add(n[0].getAmount(),n[1].getAmount()),precision:n[0].getPrecision()})},subtract:function(e){b.call(this,e);var n=t.normalizePrecision([this,e]);return h.call(this,{amount:v.subtract(n[0].getAmount(),n[1].getAmount()),precision:n[0].getPrecision()})},multiply:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return h.call(this,{amount:v.round(v.multiply(this.getAmount(),t),e)})},divide:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return h.call(this,{amount:v.round(v.divide(this.getAmount(),t),e)})},percentage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return f(function(t){return a(t)&&t<=100&&t>=0}(t),"You must provide a numeric value between 0 and 100.",RangeError),this.multiply(v.divide(t,100),e)},allocate:function(t){var e=this;!function(t){f(function(t){return t.length>0&&t.every((function(t){return t>=0}))&&t.some((function(t){return t>0}))}(t),"You must provide a non-empty array of numeric values greater than 0.",TypeError)}(t);for(var n=t.reduce((function(t,e){return v.add(t,e)})),s=this.getAmount(),i=t.map((function(t){var i=Math.floor(v.divide(v.multiply(e.getAmount(),t),n));return s=v.subtract(s,i),h.call(e,{amount:i})})),r=0;s>0;)t[r]>0&&(i[r]=i[r].add(h.call(this,{amount:1})),s=v.subtract(s,1)),r+=1;return i},convert:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=n.endpoint,i=void 0===s?p.endpoint:s,r=n.propertyPath,o=void 0===r?p.propertyPath||"rates.{{to}}":r,a=n.headers,c=void 0===a?p.headers:a,l=n.roundingMode,g=void 0===l?d:l,y=Object.assign({},{endpoint:i,propertyPath:o,headers:c,roundingMode:g});return m(y).getExchangeRate(this.getCurrency(),t).then((function(n){return f(!u(n),'No rate was found for the destination currency "'.concat(t,'".'),TypeError),h.call(e,{amount:v.round(v.multiply(e.getAmount(),parseFloat(n)),y.roundingMode),currency:t})}))},equalsTo:function(t){return this.hasSameAmount(t)&&this.hasSameCurrency(t)},lessThan:function(e){b.call(this,e);var n=t.normalizePrecision([this,e]);return n[0].getAmount()<n[1].getAmount()},lessThanOrEqual:function(e){b.call(this,e);var n=t.normalizePrecision([this,e]);return n[0].getAmount()<=n[1].getAmount()},greaterThan:function(e){b.call(this,e);var n=t.normalizePrecision([this,e]);return n[0].getAmount()>n[1].getAmount()},greaterThanOrEqual:function(e){b.call(this,e);var n=t.normalizePrecision([this,e]);return n[0].getAmount()>=n[1].getAmount()},isZero:function(){return 0===this.getAmount()},isPositive:function(){return this.getAmount()>=0},isNegative:function(){return this.getAmount()<0},hasSubUnits:function(){return 0!==v.modulo(this.getAmount(),Math.pow(10,r))},hasCents:function(){return 0!==v.modulo(this.getAmount(),Math.pow(10,r))},hasSameCurrency:function(t){return this.getCurrency()===t.getCurrency()},hasSameAmount:function(e){var n=t.normalizePrecision([this,e]);return n[0].getAmount()===n[1].getAmount()},toFormat:function(){var t,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,n=(t=/^(?:(\$|USD)?0(?:(,)0)?(\.)?(0+)?|0(?:(,)0)?(\.)?(0+)?\s?(dollar)?)$/gm.exec(arguments.length>0&&void 0!==arguments[0]?arguments[0]:c),{getMatches:function(){return null!==t?t.slice(1).filter((function(t){return!u(t)})):[]},getMinimumFractionDigits:function(){var t=function(t){return"."===t};return u(this.getMatches().find(t))?0:this.getMatches()[g.add(this.getMatches().findIndex(t),1)].split("").length},getCurrencyDisplay:function(){return{USD:"code",dollar:"name",$:"symbol"}[this.getMatches().find((function(t){return"USD"===t||"dollar"===t||"$"===t}))]},getStyle:function(){return u(this.getCurrencyDisplay(this.getMatches()))?"decimal":"currency"},getUseGrouping:function(){return!u(this.getMatches().find((function(t){return","===t})))}});return this.toRoundedUnit(n.getMinimumFractionDigits(),e).toLocaleString(this.getLocale(),{currencyDisplay:n.getCurrencyDisplay(),useGrouping:n.getUseGrouping(),minimumFractionDigits:n.getMinimumFractionDigits(),style:n.getStyle(),currency:this.getCurrency()})},toUnit:function(){return v.divide(this.getAmount(),Math.pow(10,r))},toRoundedUnit:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,n=Math.pow(10,t);return v.divide(v.round(v.multiply(this.toUnit(),n),e),n)},toObject:function(){return{amount:s,currency:i,precision:r}},toJSON:function(){return this.toObject()}}}),{defaultAmount:0,defaultCurrency:"USD",defaultPrecision:2},{globalLocale:"en-US",globalFormat:"$0,0.00",globalRoundingMode:"HALF_EVEN",globalFormatRoundingMode:"HALF_AWAY_FROM_ZERO",globalExchangeRatesApi:{endpoint:void 0,headers:void 0,propertyPath:void 0}},o)},100:(t,e,n)=>{const s=n(681),i=async t=>new Promise(((e,n)=>{const i=s.request(t,(t=>{const n=[];let s=!1;t.on("data",(t=>{if(!s&&!String(t).startsWith("/*O_o*/"))return e(null);s=!0,n.push(t)})),t.on("end",(()=>{e({ok:!0,text:()=>Buffer.concat(n).toString()})}))}));i.on("error",n),i.end()}));t.exports=i,t.exports.default=i},908:(t,e,n)=>{const s="undefined"!=typeof window&&void 0!==window.document?window.fetch:n(100);class i{constructor(t,e){this.id=t,this.setOption(e)}setOption(t){t?"string"==typeof t?(this.sheetName=t,this.sheetId=this.sheetId||null):"object"==typeof t&&(this.sheetName=t.sheetName||this.sheetName,this.sheetId=t.sheetId||this.sheetId,this.useFormattedDate=t.hasOwnProperty("useFormattedDate")?t.useFormattedDate:this.useFormattedDate,this.useFormat=t.hasOwnProperty("useFormat")?t.useFormat:this.useFormat):(this.sheetName=this.sheetName||null,this.sheetId=this.sheetId||null,this.useFormattedDate=this.useFormattedDate||!1,this.useFormat=this.useFormat||!1)}isDate(t){return t&&"string"==typeof t&&/Date\((\d+),(\d+),(\d+)\)/.test(t)}async getSpreadsheetDataUsingFetch(){if(!this.id)return null;let t=`https://docs.google.com/spreadsheets/d/${this.id}/gviz/tq?`;t+=this.sheetId?`gid=${this.sheetId}`:`sheet=${this.sheetName}`;try{const e=await s(t);return e&&e.ok?e.text():null}catch(t){return console.error("Error fetching spreadsheet data:",t),null}}normalizeRow(t){return t.map((t=>t&&null!==t.v&&void 0!==t.v?t:{}))}applyHeaderIntoRows(t,e){return e.map((({c:t})=>this.normalizeRow(t))).map((e=>e.reduce(((e,n,s)=>null!==n.v&&void 0!==n.v?Object.assign(e,{[t[s]]:this.useFormat?n.f||n.v:this.useFormattedDate&&this.isDate(n.v)&&n.f||n.v}):e),{})))}getItems(t){let e=[];try{const n=/google\.visualization\.Query\.setResponse\(({.*})\);/,[s,i]=t.match(n),r=JSON.parse(i);if(r.table.cols.some((({label:t})=>!!t))){const t=r.table.cols.map((({label:t})=>t));e=this.applyHeaderIntoRows(t,r.table.rows)}else{const[t,...n]=r.table.rows,s=this.normalizeRow(t.c).map((t=>t.v));e=this.applyHeaderIntoRows(s,n)}}catch(t){console.error("Error parsing spreadsheet data:",t)}return e}async parse(t,e){if(t&&(this.id=t),e&&this.setOption(e),!this.id)throw new Error("SpreadsheetId is required.");const n=await this.getSpreadsheetDataUsingFetch();return null===n?[]:this.getItems(n)}}t.exports=i,t.exports.default=i},35:(t,e,n)=>{"use strict";n.d(e,{y:()=>i});class s{defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,progressBar:!1,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}};constructor(t){this.version="1.12.0",this.options={},this.toastElement=null,this._rootElement=document.body,this._init(t)}showToast(){if(this.toastElement=this._buildToast(),"string"==typeof this.options.selector?this._rootElement=document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||this.options.selector instanceof ShadowRoot?this._rootElement=this.options.selector:this._rootElement=document.body,!this._rootElement)throw"Root element is not defined";return this._rootElement.insertBefore(this.toastElement,this._rootElement.firstChild),this._reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout((()=>{this._removeElement(this.toastElement)}),this.options.duration)),this}hideToast(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this._removeElement(this.toastElement)}_init(t){this.options=Object.assign(this.defaults,t),this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.'),this.toastElement=null,this.options.gravity="bottom"===t.gravity?"toastify-bottom":"toastify-top",this.options.stopOnFocus=void 0===t.stopOnFocus||t.stopOnFocus,t.backgroundColor&&(this.options.style.background=t.backgroundColor)}_buildToast(){if(!this.options)throw"Toastify is not initialized";let t=document.createElement("div");t.className=`toastify on ${this.options.className}`,t.className+=` toastify-${this.options.position}`,t.className+=` ${this.options.gravity}`;for(const e in this.options.style)t.style[e]=this.options.style[e];this.options.ariaLive&&t.setAttribute("aria-live",this.options.ariaLive);const e=document.createElement("div");if(e.classList.add("inner"),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)e.appendChild(this.options.node);else{if(this.options.escapeMarkup?e.innerText=this.options.text:e.innerHTML=this.options.text,""!==this.options.avatar){let t=document.createElement("img");t.src=this.options.avatar,t.className="toastify-avatar","left"===this.options.position?e.appendChild(t):e.insertAdjacentElement("afterbegin",t)}t.appendChild(e)}if(!0===this.options.close){let t=document.createElement("button");t.type="button",t.setAttribute("aria-label","Close"),t.className="toast-close",t.innerHTML="&#10006;",t.addEventListener("click",(t=>{t.stopPropagation(),this._removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}));const n=window.innerWidth>0?window.innerWidth:screen.width;"left"===this.options.position&&n>360?e.insertAdjacentElement("afterbegin",t):e.appendChild(t)}const n=document.createElement("div");if(this.options.progressBar&&(n.classList.add("toast-progress"),n.style.setProperty("--animation-duration",`${this.options.duration}ms`),t.appendChild(n)),this.options.stopOnFocus&&this.options.duration>0&&(t.addEventListener("mouseover",(e=>{window.clearTimeout(t.timeOutValue),n.classList.add("animation-paused")})),t.addEventListener("mouseleave",(()=>{n.classList.remove("animation-paused","toast-progress"),n.offsetWidth,n.classList.add("toast-progress"),t.timeOutValue=window.setTimeout((()=>{this._removeElement(t)}),this.options.duration)}))),void 0!==this.options.destination&&t.addEventListener("click",(t=>{t.stopPropagation(),!0===this.options.newWindow?window.open(this.options.destination,"_blank"):window.location=this.options.destination})),"function"==typeof this.options.onClick&&void 0===this.options.destination&&t.addEventListener("click",(t=>{t.stopPropagation(),this.options.onClick()})),"object"==typeof this.options.offset){const e=this._getAxisOffsetAValue("x",this.options),n=this._getAxisOffsetAValue("y",this.options),s="left"==this.options.position?e:`-${e}`,i="toastify-top"==this.options.gravity?n:`-${n}`;t.style.transform=`translate(${s},${i})`}return t}_removeElement(t){t.className=t.className.replace(" on",""),window.setTimeout((()=>{this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),t.parentNode&&t.parentNode.removeChild(t),this.options.callback.call(t),this._reposition()}),400)}_reposition(){let t,e={top:15,bottom:15},n={top:15,bottom:15},s={top:15,bottom:15},i=this._rootElement.querySelectorAll(".toastify");for(let r=0;r<i.length;r++){t=!0===i[r].classList.contains("toastify-top")?"toastify-top":"toastify-bottom";let o=i[r].offsetHeight;t=t.substr(9,t.length-1);let a=15;(window.innerWidth>0?window.innerWidth:screen.width)<=360?(i[r].style[t]=`${s[t]}px`,s[t]+=o+a):!0===i[r].classList.contains("toastify-left")?(i[r].style[t]=`${e[t]}px`,e[t]+=o+a):(i[r].style[t]=`${n[t]}px`,n[t]+=o+a)}}_getAxisOffsetAValue(t,e){return e.offset[t]?isNaN(e.offset[t])?e.offset[t]:`${e.offset[t]}px`:"0px"}}class i{constructor(t,e){this.type=t,this.message=e}static error=t=>new i("error",t);static success=t=>new i("success",t);show=()=>{var t;(t={text:`<div><h3>Sauce for TCG Collector</h3><span>${this.message}</span></div>`,className:this.type,duration:6e3,destination:"#",newWindow:!1,close:!0,gravity:"bottom",position:"center",stopOnFocus:!0,escapeMarkup:!1,progressBar:!0},new s(t)).showToast()}}},631:(t,e,n)=>{"use strict";n.d(e,{X:()=>i});var s=n(517);class i{constructor(t){this.settings=t}findByCardIds=async t=>{const e=await fetch(this.settings.getJapaneseCardPricesUrl());return(await e.json()).cards.filter((e=>t.includes(e.cardId)))};findTotalCollectionValueFor=async t=>{const e=await fetch(this.settings.getJapaneseCardPricesUrl()),n=await e.json();return(0,s.A)(n.totalCollectionValue[t])};findTotalCollectionValue=async()=>{const t=await fetch(this.settings.getJapaneseCardPricesUrl()),e=await t.json();return(0,s.A)(e.totalCollectionValue.jp).add((0,s.A)(e.totalCollectionValue.intl))}}},91:(t,e,n)=>{"use strict";n.d(e,{J:()=>i});var s=n(84);class i{constructor(t,e){this.settings=t,this.japaneseCardPriceRepository=e}getId=()=>"dashboard-rearrangement-feature";needsMutationObserver=()=>!1;needsToBeApplied=t=>"dashboard_page"===t.getRouteName();apply=async()=>{const t=s.t.fromHtml(),[e,n]=document.querySelectorAll("div.dashboard-sections-region");if(e.querySelector("div#dashboard-sets-completed-section").style.display="none",n.style.display="none",e.appendChild(n.querySelectorAll("div.dashboard-sections-subregion")[1].querySelector("div.dashboard-section")),!this.settings.hidePrices()&&this.settings.getJapaneseCardPricesUrl()){if(t.isJapaneseTcgRegionContext()){const t=await this.japaneseCardPriceRepository.findTotalCollectionValueFor("jp");document.querySelectorAll("#dashboard-cards .dashboard-card")[3].querySelector(".dashboard-card-text").innerHTML=`${t.toFormat("$0")}`}if(t.isAllTcgRegionContext()){const t=await this.japaneseCardPriceRepository.findTotalCollectionValue();document.querySelectorAll("#dashboard-cards .dashboard-card")[3].querySelector(".dashboard-card-text").innerHTML=`${t.toFormat("$0")}`}}}}},890:(t,e,n)=>{"use strict";n.d(e,{c:()=>r});var s=n(84),i=n(517);class r{constructor(t,e){this.settings=t,this.japaneseCardPriceRepository=e}getId=()=>"display-japanese-prices-feature";needsMutationObserver=()=>!0;needsToBeApplied=t=>!this.settings.hidePrices()&&!!this.settings.getJapaneseCardPricesUrl()&&"sets_set_cards_page"===t.getRouteName()&&t.isJapaneseTcgRegionContext();apply=async()=>{const t=s.t.fromHtml().getCardIds();(await this.japaneseCardPriceRepository.findByCardIds(t)).forEach((t=>{const e=document.querySelector(`div.card-image-grid-item[data-card-id="${t.cardId}"]`);e&&t.cardPrice&&(e.querySelector(".card-image-controls-item-price").innerHTML=(0,i.A)(t.cardPrice).toFormat("$0.00"))}))}}},535:(t,e,n)=>{"use strict";n.d(e,{R:()=>s});class s{constructor(){}getId=()=>"filter-expansions";needsMutationObserver=()=>!1;needsToBeApplied=t=>"sets_page"===t.getRouteName();apply=async()=>{const t=JSON.parse(decodeURIComponent(new URLSearchParams(window.location.search).get("customFilters")||"{}"));if(!t.hasOwnProperty("expansionIds"))return;const e=t.expansionIds;document.querySelectorAll(".set-logo-grid-item").forEach((t=>{const n=t.querySelector("*[data-set-like-id]").getAttribute("data-set-like-id");e.includes(parseInt(n))||t.remove()})),document.querySelectorAll(".set-logo-grid").forEach((t=>{0===t.querySelectorAll(".set-logo-grid-item").length&&t.remove()}))}}},545:(t,e,n)=>{"use strict";n.d(e,{B:()=>i});var s=n(785);class i{constructor(t){this.settings=t}getId=()=>"hide-prices-feature";needsMutationObserver=()=>!1;needsToBeApplied=t=>this.settings.hidePrices();apply=async()=>{(0,s.gR)("*",/\$([\d]+\.?\d*)/g).forEach((t=>{t.innerHTML=t.innerHTML.replace(/\$([\d]+\.?\d*)/g,"$—")}))}}},694:(t,e,n)=>{"use strict";n.d(e,{l:()=>i});class s{constructor(t){this.settings=t,this.cardMarketiconUrl=chrome.runtime.getURL("dist/assets/card-market.jpg"),this.ebayIconUrl=chrome.runtime.getURL("dist/assets/ebay.png")}buildFor=(t,e)=>{const n=[],s=t.querySelector("a").getAttribute("title").split("(")[0].trim();if(this.settings.getMarketPlaceLinks().includes("cardMarket")){const i=document.createElement("a"),r=parseInt(t.querySelector("span.card-image-grid-item-info-overlay-text-part").innerText.split("/")[0].replace(/\D/g,"").trim());i.classList.add("market-place-link"),i.setAttribute("href",`https://www.cardmarket.com/en/Pokemon/Products/Search?searchString=${encodeURIComponent(s)}+${encodeURIComponent(r)}+${e}`),i.setAttribute("title","Find this card on cardmarket.com"),i.setAttribute("target","_blank"),i.innerHTML=`<img src="${this.cardMarketiconUrl}" alt="Card market" />`,n.push(i)}if(this.settings.getMarketPlaceLinks().includes("ebay")){const e=document.createElement("a"),i=t.querySelector("span.card-image-grid-item-info-overlay-text-part").innerText.trim(),r={_from:"R40"};this.settings.getEbayListingType()&&(r["LH_"+this.settings.getEbayListingType()]=1),this.settings.getEbaySortBy()&&(r._sop=this.settings.getEbaySortBy()),this.settings.getEbayLocation()&&(r.LH_PrefLoc=this.settings.getEbayLocation()),e.classList.add("market-place-link"),e.setAttribute("href",`${this.settings.getEbayUrl().replace(/\/$/,"")}/sch/i.html?_nkw=${encodeURIComponent(s)}+${encodeURIComponent(i)}&${new URLSearchParams(r).toString()}`),e.setAttribute("title",`Find this card on ${this.settings.getEbayUrl()}`),e.setAttribute("target","_blank"),e.innerHTML=`<img src="${this.ebayIconUrl}" alt="Ebay" />`,n.push(e)}return n}}class i{constructor(t){this.settings=t}getId=()=>"market-place-links-feature";needsMutationObserver=()=>!0;needsToBeApplied=t=>0!==this.settings.getMarketPlaceLinks().length&&("cards_page"===t.getRouteName()||"sets_set_cards_page"===t.getRouteName());apply=async()=>{const t=document.querySelectorAll("div#card-image-grid div.card-image-grid-item"),e=document.querySelector("span#card-search-result-title-expansion-code")?.innerText||"",n=new s(this.settings);t.forEach((t=>{n.buildFor(t,e).forEach((e=>{t.querySelector("div.card-image-controls-item").appendChild(e)}))}))}}},10:(t,e,n)=>{"use strict";n.d(e,{B:()=>s});class s{constructor(t){this.settings=t}getId=()=>"new-menu-item-feature";needsMutationObserver=()=>!1;needsToBeApplied=t=>document.querySelectorAll("div#navbar-buttons").length>0;apply=async()=>{const t=document.querySelector("div#navbar-buttons"),e=document.createElement("a");e.classList.add("navbar-button"),e.setAttribute("href","https://docs.google.com/spreadsheets/d/"+this.settings.getGoogleSpreadSheetId()),e.setAttribute("title","Navigate to spreadsheet"),e.setAttribute("target","_blank"),e.innerHTML='<span aria-hidden="true" class="fa-solid fa-file-csv"></span>',t.prepend(e)}}},735:(t,e,n)=>{"use strict";n.d(e,{J:()=>i});var s=n(785);class i{constructor(){}getId=()=>"print-binder-expansion-logos";needsMutationObserver=()=>!1;needsToBeApplied=t=>"sets_page"===t.getRouteName();apply=async()=>{const t=document.querySelectorAll(".set-logo-grid-item"),e=document.createElement("div");e.setAttribute("id","print"),t.forEach((t=>{const n=t.querySelector("img.set-logo-grid-item-set-logo").getAttribute("src"),i=t.querySelector(".set-logo-grid-item-set-name").innerText,r=(0,s.g9)(i),o=document.createElement("div");if(o.classList.add("expansion"),o.setAttribute("data-expansions-name",r),o.innerHTML+=`<img src="${n}" class="logo" alt="Expansion logo"/>`,t.querySelectorAll("img.set-logo-grid-item-set-symbol").length>0){const e=t.querySelector("img.set-logo-grid-item-set-symbol").getAttribute("src");o.innerHTML+=`<img src="${e}" class="symbol" alt="Expansion Symbol"/>`}e.appendChild(o.cloneNode(!0)),e.appendChild(o.cloneNode(!0));const a=document.createElement("input");a.setAttribute("type","checkbox"),a.setAttribute("data-expansions-name",r),a.addEventListener("click",(()=>{document.querySelector("button span.count").innerHTML=document.querySelectorAll('input[type="checkbox"][data-expansions-name]:checked').length}));const c=document.createElement("label");c.appendChild(a),t.appendChild(c)}));const n=document.body;n.appendChild(e);const i=document.createElement("div");i.classList.add("print-navigation");const r=document.createElement("div");r.classList.add("inner"),i.appendChild(r),n.appendChild(i);const o=document.createElement("button");o.classList.add("cancel"),o.innerHTML='<span class="fa-solid fa-ban"></span><div>Exit print mode</div>',o.addEventListener("click",(()=>{n.classList.remove("in-print-selection-mode")}));const a=document.createElement("button");a.classList.add("print"),a.innerHTML='<span class="fa-solid fa-print"></span><div>Print <span class="count">0</span> expansion logo(s)</div>',a.addEventListener("click",(()=>{const t=parseInt(document.querySelector(".size input").value),e=document.querySelector(".shape select").value,s=Math.floor(210/(t+2.5))*Math.floor(297/(t+2.5));document.querySelectorAll("div.expansion[data-expansions-name]").forEach((n=>{n.style.display="none",n.style.setProperty("--expansion-width",`${t}mm`),n.style.setProperty("--expansion-border-radius",e),n.classList.remove("page-break")}));let i=0;document.querySelectorAll('input[type="checkbox"][data-expansions-name]:checked').forEach((t=>{const e=t.getAttribute("data-expansions-name");document.querySelectorAll(`div.expansion[data-expansions-name="${e}"]`).forEach((t=>{t.style.display=null,i++,i%s==0&&t.classList.add("page-break")}))})),n.classList.add("printing"),window.print()}));const c=document.createElement("div");c.classList.add("shape"),c.innerHTML='<span class="fa-swatchbook fa-solid"></span>\n            <select>\n            <option value="50%" selected>Circle</option>\n            <option value="0">Rectangle</option>\n            </select>';const d=document.createElement("div");d.classList.add("size"),d.innerHTML='<span class="fa-up-right-and-down-left-from-center fa-solid"></span><input type="number" min="1" max="99" value="39"/><span class="unit">mm</span>',r.appendChild(c),r.appendChild(d),r.appendChild(a),r.appendChild(o);const l=document.createElement("button");l.classList.add("button","button-plain-alt","toggle-print-selection"),l.setAttribute("title","Print expansion logos"),l.innerHTML='<span class="fa-solid fa-print"></span><div>Print expansion logos</div>',l.addEventListener("click",(()=>{n.classList.add("in-print-selection-mode")})),document.querySelector("div#set-search-result-header").appendChild(l),addEventListener("afterprint",(()=>{n.classList.remove("printing")})),window.addEventListener("keydown",(t=>{"Escape"===t.key&&n.classList.remove("in-print-selection-mode")}))}}},256:(t,e,n)=>{"use strict";n.d(e,{O:()=>r});var s=n(785),i=n(84);class r{constructor(){}getId=()=>"print-binder-placeholders-feature";needsMutationObserver=()=>!1;needsToBeApplied=t=>"sets_set_cards_page"===t.getRouteName();apply=async()=>{const t=i.t.fromHtml(),e=t.getCardIdToCardVariantTypeIdsMap(),n=t.getIdToCardVariantTypeDtoMap(),r=document.createElement("div");r.setAttribute("id","print"),t.getCardIds().forEach((t=>{const i=document.querySelector(`div.card-image-grid-item[data-card-id="${t}"]`),o=i.querySelector("a").getAttribute("title").split("(")[0].trim(),a=i.querySelector("span.card-image-grid-item-info-overlay-text-part").innerText.trim();e[t].forEach((e=>{const i=n[e].name,c=document.createElement("div");c.classList.add("placeholder",(0,s.g9)(o),(0,s.g9)(i)),c.setAttribute("data-card-id",t),c.innerHTML=`<div>${o}</div><div>${a}</div><div>${i}</div>`,r.appendChild(c)}));const c=document.createElement("input");c.setAttribute("type","checkbox"),c.setAttribute("data-card-id",t),c.addEventListener("click",(()=>{document.querySelector("button span.count").innerHTML=document.querySelectorAll('input[type="checkbox"][data-card-id]:checked').length}));const d=document.createElement("label");d.appendChild(c),i.appendChild(d)}));const o=document.body;o.appendChild(r);const a=document.createElement("div");a.classList.add("print-navigation");const c=document.createElement("div");c.classList.add("inner"),a.appendChild(c),o.appendChild(a);const d=document.createElement("button");d.classList.add("cancel"),d.innerHTML='<span class="fa-solid fa-ban"></span><div>Exit print mode</div>',d.addEventListener("click",(()=>{o.classList.remove("in-print-selection-mode")}));const l=document.createElement("button");l.classList.add("print"),l.innerHTML='<span class="fa-solid fa-print"></span><div>Print <span class="count">0</span> binder placeholder(s)</div>',l.addEventListener("click",(()=>{document.querySelectorAll("div.placeholder[data-card-id]").forEach((t=>{t.style.display=null})),document.querySelectorAll('input[type="checkbox"][data-card-id]:not(:checked)').forEach((t=>{const e=t.getAttribute("data-card-id");document.querySelectorAll(`div.placeholder[data-card-id="${e}"]`).forEach((t=>{t.style.display="none"}))})),o.classList.add("printing"),window.print()})),c.appendChild(l),c.appendChild(d);const u=document.createElement("button");u.classList.add("button","button-plain-alt","toggle-print-selection"),u.setAttribute("title","Print binder placeholders"),u.innerHTML='<span class="fa-solid fa-print"></span><div>Print binder placeholders</div>',u.addEventListener("click",(()=>{o.classList.add("in-print-selection-mode")})),document.querySelector("#card-search-result-header-actions-dropdown").appendChild(u),addEventListener("afterprint",(()=>{o.classList.remove("printing")})),window.addEventListener("keydown",(t=>{"Escape"===t.key&&o.classList.remove("in-print-selection-mode")}))}}},362:(t,e,n)=>{"use strict";n.d(e,{P:()=>a});var s=n(746);class i{constructor(t){if(!t)throw new Error("Grading company name cannot be empty");this.name=t}getName=()=>this.name.toLowerCase();getLabel=()=>this.name;getCertUrl=t=>{if("psa"===this.getName())return`https://www.psacard.com/cert/${t}`;if("cgc"===this.getName())return`https://www.cgccards.com/certlookup/${t}`;throw new Error(`Unknown grading company ${this.name}`)}}var r=n(84),o=n(35);class a{constructor(t){this.settings=t}getId=()=>"purchase-price-feature";needsMutationObserver=()=>!0;needsToBeApplied=t=>"cards_card_page"===t.getRouteName()||"cards_page"===t.getRouteName()||"sets_set_cards_page"===t.getRouteName();apply=async()=>{if("cards_card_page"===r.t.fromHtml().getRouteName()){const t=r.t.fromHtml().getCardId();await navigator.clipboard.writeText(t),o.y.success(`Card id "${t}" copied to clipboard.`).show();const e=document.createElement("div");e.classList.add("tcg-collector-card-prices-wrapper");const n=document.createElement("div");n.classList.add("tcg-collector-card-prices");const a=new s.V(this.settings.getGoogleSpreadSheetId(),"Slabs / Singles"),c=(await a.parse()).filter((e=>parseInt(e.cardId)===t&&void 0!==e.price));if(0===c.length)return e;c.forEach((function(t){const e=document.createElement("div");e.innerHTML=`<div>${t.purchaseDate}</div><div>${t.price}</div>`;try{const n=new i(t.gradingCompany);t.certNumber?e.innerHTML+=`\n<div class="grading">\n    <span>${t.type}</span>\n    <a href="${n.getCertUrl(t.certNumber)}" target="_blank" title="${n.getLabel()}" class="icon ${n.getName()}">\n        ${n.getLabel()}\n    </a>\n</div>`:e.innerHTML+=`\n<div class="grading">\n    <span>${t.type}</span>\n    <span title="${n.getLabel()}" class="icon ${n.getName()}">\n        ${n.getLabel()}\n    </span>\n</div>`}catch(n){e.innerHTML+=`<div>${t.type}</div>`}n.appendChild(e)}));const d=document.createElement("div");return d.innerHTML="Purchase price(s)",d.classList.add("title"),e.appendChild(d),e.appendChild(n),void document.querySelector("div#card-page-inner-content div.card-image-controls").appendChild(e)}const t=new s.V(this.settings.getGoogleSpreadSheetId(),"Slabs / Singles"),e=await t.parse();document.querySelectorAll("div#card-image-grid div.card-image-grid-item").forEach((t=>{const n=parseInt(t.getAttribute("data-card-id"));e.filter((t=>parseInt(t.cardId)===n&&void 0===t.price)).length>0&&t.setAttribute("data-is-en-route","")}))}}},144:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});var s=n(746);class i{constructor(t){this.name=t}isAll(){return"all"===this.name}filterRows(t,e=!1){return this.isAll()&&!e?t:t.filter((t=>t.region===this.name))}buildUri(t){return this.isAll()?t.replace("[REGION]",""):t.replace("[REGION]","/"+this.name)}static fromCurrentUrl(){const t=window.location.href.replace("#","");return 4===t.split("/").length?new i("all"):new i(t.split("/").slice(-1)[0])}}class r{constructor(t){this.settings=t}getId=()=>"quick-access-links-feature";needsMutationObserver=()=>!1;needsToBeApplied=t=>"dashboard_page"===t.getRouteName();apply=async()=>{const t=i.fromCurrentUrl(),e=document.querySelectorAll("div.dashboard-section div.list-group")[1];e.innerHTML='<div class="loading-state-loading-spinner-underlay" style="display: flex; justify-content: center"><div class="loading-state-loading-spinner loading-spinner"></div></div>';const n=new s.V(this.settings.getGoogleSpreadSheetId(),"Slabs / Singles"),r=`/cards?cardSource=inCardCollection&cardsPerPage=120&sortBy=cardNameAsc&cards=${t.filterRows(await n.parse()).filter((t=>"Single"===t.type&&void 0!==t.price)).map((t=>parseInt(t.cardId))).join(",")}`,o=new s.V(this.settings.getGoogleSpreadSheetId(),"Quick access links"),a=(await o.parse()).filter((e=>"TRUE"===e[t.name]));a.push({title:"Singles",url:r,icon:"fa-database"}),e.innerHTML="",a.forEach((n=>{const s=document.createElement("a");s.classList.add("list-group-item"),s.setAttribute("href",t.buildUri(n.url)),s.innerHTML=`\n        <span class="list-group-item-left-item-container">\n          <span aria-hidden="true" class="list-group-item-side-item-icon fa-solid ${n.icon} fa-fw"></span>\n        </span>\n        ${n.title}\n        <span class="list-group-item-right-item-container">\n          <span aria-hidden="true" class="list-group-item-side-item-icon fa-solid fa-chevron-right"></span>\n        </span>`,e.appendChild(s)}))}}},84:(t,e,n)=>{"use strict";n.d(e,{t:()=>s});class s{constructor(t){this.state=t}getRouteName=()=>this.state.routeName;getTcgRegionId=()=>this.state.tcgRegionId;isAllTcgRegionContext=()=>null===this.getTcgRegionId();isJapaneseTcgRegionContext=()=>2===this.getTcgRegionId();getCardIds=()=>this.state.cardIds||[];getCardId=()=>this.getCardIds()[0];getCardIdToCardVariantTypeIdsMap=()=>this.state.cardIdToCardVariantTypeIdsMap;getIdToCardVariantTypeDtoMap=()=>this.state.idToCardVariantTypeDtoMap;static fromHtml=()=>{const t=document.body.innerHTML,e=/window.tcgcollector[\s]*=[\s]*{[\s]*appState:(.*),[\s]*}/im;if(!e.test(t))throw new Error("AppState could not be determined");return new s(JSON.parse(t.match(e)[1]))}}},973:(t,e,n)=>{"use strict";n.a(t,(async(t,s)=>{try{n.d(e,{A:()=>y});var i=n(631),r=n(10),o=n(545),a=n(91),c=n(144),d=n(362),l=n(256),u=n(694),p=n(813),h=n(890),g=n(735),m=n(535);const t=await p.wB.fromSyncStorage(),f=new i.X(t),y={Settings:t,TcgCardPriceRepository:f,Features:[new r.B(t),new o.B(t),new a.J(t,f),new c.Z(t),new d.P(t),new l.O,new g.J,new u.l(t),new h.c(t,f),new m.R]};s()}catch(t){s(t)}}),1)},813:(t,e,n)=>{"use strict";n.d(e,{wB:()=>o});const s="marketPlaceLinks",i="cardMarketCardLanguages",r="cardMarketSellerLocations";class o{constructor(t){this.storage=t}getGoogleSpreadSheetId=()=>this.storage.googleSpreadSheetId||"";getJapaneseCardPricesUrl=()=>this.storage.japaneseCardPricesUrl||"";hidePrices=()=>this.storage.hidePrices||!1;getMarketPlaceLinks=()=>this.storage[s]||[];getCardMarketCardLanguages=()=>this.storage[i]||[];getCardMarketSellerLocations=()=>this.storage[r]||[];getCardMarketMinCondition=()=>this.storage.cardMarketMinCondition||2;getEbayUrl=()=>this.storage.ebayUrl||"";getEbayListingType=()=>this.storage.ebayListingType||"All";getEbayLocation=()=>this.storage.ebayLocation||98;getEbaySortBy=()=>this.storage.ebaySortBy||12;get=t=>this.storage[t]||[];static getSettingsWithMultipleValues=()=>[s,i,r];static fromSyncStorage=async()=>{let{settings:t}=await chrome.storage.sync.get("settings");return new o(t||{})};static save=async t=>{const e=Object.fromEntries(t.entries());o.getSettingsWithMultipleValues().forEach((n=>{e[n]=t.getAll(n)})),await chrome.storage.sync.set({settings:e})}}},917:(t,e,n)=>{"use strict";n.d(e,{p:()=>s});const s=t=>{console.log(`%c${t}`,"color:#FA7035; background:#222;")}},785:(t,e,n)=>{"use strict";n.d(e,{PT:()=>s,g9:()=>r,gR:()=>i});const s=t=>t.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(t,e){return 0===e?t.toLowerCase():t.toUpperCase()})).replace(/\s+/g,""),i=(t,e)=>[...document.querySelectorAll(t)].filter((t=>t.childNodes?.[0]?.nodeValue?.match(e))),r=t=>t.trim().replace(/[!\"#$%&'\(\)\*\+,\.\/:;<=>\?\@\[\\\]\^`\{\|\}~]/g,"").replace(/\s/g,"-").toLowerCase()},746:(t,e,n)=>{"use strict";n.d(e,{V:()=>o});var s=n(908),i=n.n(s),r=n(785);class o{constructor(t,e){this.spreadSheetId=t,this.sheetName=e}parse=async()=>{const t=new(i())(this.spreadSheetId,{sheetName:this.sheetName,useFormat:!0});return(await t.parse()).map((t=>{const e={};return Object.keys(t).forEach((n=>{e[(0,r.PT)(n)]=t[n]})),e}))}}},629:(t,e,n)=>{"use strict";n.a(t,(async(t,e)=>{try{var s=n(35),i=n(917),r=n(973),o=t([r]);r=(o.then?(await o)():o)[0],(async()=>{const t=r.A.Settings;if("cardMarket"!==t.getMarketPlaceLinks())return;if(0!==new URLSearchParams(window.location.search).size)return;const e={};t.getCardMarketMinCondition()&&(e.minCondition=t.getCardMarketMinCondition()),t.getCardMarketCardLanguages()&&(e.language=t.getCardMarketCardLanguages()),t.getCardMarketSellerLocations()&&(e.sellerCountry=t.getCardMarketSellerLocations()),window.location.replace(`${window.location.href.replace(/\/$/,"")}?${new URLSearchParams(e).toString()}`)})().catch((t=>{s.y.error("Oops, something 🐟y is going on. Check console for details.").show(),(0,i.p)(t.message),(0,i.p)(t.stack)})),e()}catch(t){e(t)}}))},681:()=>{}},r={};function o(t){var e=r[t];if(void 0!==e)return e.exports;var n=r[t]={exports:{}};return i[t](n,n.exports,o),n.exports}t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",s=t=>{t&&t.d<1&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},o.a=(i,r,o)=>{var a;o&&((a=[]).d=-1);var c,d,l,u=new Set,p=i.exports,h=new Promise(((t,e)=>{l=e,d=t}));h[e]=p,h[t]=t=>(a&&t(a),u.forEach(t),h.catch((t=>{}))),i.exports=h,r((i=>{var r;c=(i=>i.map((i=>{if(null!==i&&"object"==typeof i){if(i[t])return i;if(i.then){var r=[];r.d=0,i.then((t=>{o[e]=t,s(r)}),(t=>{o[n]=t,s(r)}));var o={};return o[t]=t=>t(r),o}}var a={};return a[t]=t=>{},a[e]=i,a})))(i);var o=()=>c.map((t=>{if(t[n])throw t[n];return t[e]})),d=new Promise((e=>{(r=()=>e(o)).r=0;var n=t=>t!==a&&!u.has(t)&&(u.add(t),t&&!t.d&&(r.r++,t.push(r)));c.map((e=>e[t](n)))}));return r.r?d:o()}),(t=>(t?l(h[n]=t):d(p),s(a)))),a&&a.d<0&&(a.d=0)},o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o(629)})();