/*! For license information please see popup.min.js.LICENSE.txt */
(()=>{var e,t,s,a,i={100:(e,t,s)=>{const a=s(681),i=async e=>new Promise(((t,s)=>{const i=a.request(e,(e=>{const s=[];let a=!1;e.on("data",(e=>{if(!a&&!String(e).startsWith("/*O_o*/"))return t(null);a=!0,s.push(e)})),e.on("end",(()=>{t({ok:!0,text:()=>Buffer.concat(s).toString()})}))}));i.on("error",s),i.end()}));e.exports=i,e.exports.default=i},908:(e,t,s)=>{const a="undefined"!=typeof window&&void 0!==window.document?window.fetch:s(100);class i{constructor(e,t){this.id=e,this.setOption(t)}setOption(e){e?"string"==typeof e?(this.sheetName=e,this.sheetId=this.sheetId||null):"object"==typeof e&&(this.sheetName=e.sheetName||this.sheetName,this.sheetId=e.sheetId||this.sheetId,this.useFormattedDate=e.hasOwnProperty("useFormattedDate")?e.useFormattedDate:this.useFormattedDate,this.useFormat=e.hasOwnProperty("useFormat")?e.useFormat:this.useFormat):(this.sheetName=this.sheetName||null,this.sheetId=this.sheetId||null,this.useFormattedDate=this.useFormattedDate||!1,this.useFormat=this.useFormat||!1)}isDate(e){return e&&"string"==typeof e&&/Date\((\d+),(\d+),(\d+)\)/.test(e)}async getSpreadsheetDataUsingFetch(){if(!this.id)return null;let e=`https://docs.google.com/spreadsheets/d/${this.id}/gviz/tq?`;e+=this.sheetId?`gid=${this.sheetId}`:`sheet=${this.sheetName}`;try{const t=await a(e);return t&&t.ok?t.text():null}catch(e){return console.error("Error fetching spreadsheet data:",e),null}}normalizeRow(e){return e.map((e=>e&&null!==e.v&&void 0!==e.v?e:{}))}applyHeaderIntoRows(e,t){return t.map((({c:e})=>this.normalizeRow(e))).map((t=>t.reduce(((t,s,a)=>null!==s.v&&void 0!==s.v?Object.assign(t,{[e[a]]:this.useFormat?s.f||s.v:this.useFormattedDate&&this.isDate(s.v)&&s.f||s.v}):t),{})))}getItems(e){let t=[];try{const s=/google\.visualization\.Query\.setResponse\(({.*})\);/,[a,i]=e.match(s),n=JSON.parse(i);if(n.table.cols.some((({label:e})=>!!e))){const e=n.table.cols.map((({label:e})=>e));t=this.applyHeaderIntoRows(e,n.table.rows)}else{const[e,...s]=n.table.rows,a=this.normalizeRow(e.c).map((e=>e.v));t=this.applyHeaderIntoRows(a,s)}}catch(e){console.error("Error parsing spreadsheet data:",e)}return t}async parse(e,t){if(e&&(this.id=e),t&&this.setOption(t),!this.id)throw new Error("SpreadsheetId is required.");const s=await this.getSpreadsheetDataUsingFetch();return null===s?[]:this.getItems(s)}}e.exports=i,e.exports.default=i},406:(e,t,s)=>{"use strict";s.a(e,(async(e,t)=>{try{var a=s(813),i=s(973),n=e([i]);i=(n.then?(await n)():n)[0],(async()=>{const e=i.A.Settings,t=document.querySelector("form"),s=t.querySelector('button[type="submit"]');t.elements[a.q3].value=e.getGoogleSpreadSheetId(),t.elements[a.Rn].value=e.getJapaneseCardPricesUrl(),t.elements[a.VX].checked=e.hidePrices(),t.elements[a.Gx].value=e.getCardMarketMinCondition(),t.elements[a.dF].value=e.getEbayUrl(),t.elements[a.nY].value=e.getEbayListingType(),t.elements[a.dk].value=e.getEbayLocation(),t.elements[a.ap].value=e.getEbaySortBy(),a.wB.getSettingsWithMultipleValues().forEach((s=>{e.get(s).forEach((e=>{t.elements[s+"["+e+"]"].checked=!0}))})),t.querySelectorAll("input[data-target-toggle]:checked").forEach((e=>{const s=e.getAttribute("data-target-toggle");t.querySelector('[data-toggle-id="'+s+'"]').style.display="flex"})),t.addEventListener("input",(function(e){const a=e.target;if(s.disabled=!1,a.hasAttribute("data-target-toggle")){const e=a.getAttribute("data-target-toggle");a.checked?t.querySelector('[data-toggle-id="'+e+'"]').style.display="flex":t.querySelector('[data-toggle-id="'+e+'"]').style.display="none"}})),t.addEventListener("submit",(async e=>{e.preventDefault(),s.disabled=!0;const i=new FormData(t);await a.wB.save(i),chrome.tabs.query({url:"https://www.tcgcollector.com/*"},(([e])=>{chrome.tabs.update(e.id,{url:e.url})}))}))})(),t()}catch(e){t(e)}}))},35:(e,t,s)=>{"use strict";s.d(t,{y:()=>i});class a{defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,progressBar:!1,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}};constructor(e){this.version="1.12.0",this.options={},this.toastElement=null,this._rootElement=document.body,this._init(e)}showToast(){if(this.toastElement=this._buildToast(),"string"==typeof this.options.selector?this._rootElement=document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||this.options.selector instanceof ShadowRoot?this._rootElement=this.options.selector:this._rootElement=document.body,!this._rootElement)throw"Root element is not defined";return this._rootElement.insertBefore(this.toastElement,this._rootElement.firstChild),this._reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout((()=>{this._removeElement(this.toastElement)}),this.options.duration)),this}hideToast(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this._removeElement(this.toastElement)}_init(e){this.options=Object.assign(this.defaults,e),this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.'),this.toastElement=null,this.options.gravity="bottom"===e.gravity?"toastify-bottom":"toastify-top",this.options.stopOnFocus=void 0===e.stopOnFocus||e.stopOnFocus,e.backgroundColor&&(this.options.style.background=e.backgroundColor)}_buildToast(){if(!this.options)throw"Toastify is not initialized";let e=document.createElement("div");e.className=`toastify on ${this.options.className}`,e.className+=` toastify-${this.options.position}`,e.className+=` ${this.options.gravity}`;for(const t in this.options.style)e.style[t]=this.options.style[t];this.options.ariaLive&&e.setAttribute("aria-live",this.options.ariaLive);const t=document.createElement("div");if(t.classList.add("inner"),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)t.appendChild(this.options.node);else{if(this.options.escapeMarkup?t.innerText=this.options.text:t.innerHTML=this.options.text,""!==this.options.avatar){let e=document.createElement("img");e.src=this.options.avatar,e.className="toastify-avatar","left"===this.options.position?t.appendChild(e):t.insertAdjacentElement("afterbegin",e)}e.appendChild(t)}if(!0===this.options.close){let e=document.createElement("button");e.type="button",e.setAttribute("aria-label","Close"),e.className="toast-close",e.innerHTML="&#10006;",e.addEventListener("click",(e=>{e.stopPropagation(),this._removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}));const s=window.innerWidth>0?window.innerWidth:screen.width;"left"===this.options.position&&s>360?t.insertAdjacentElement("afterbegin",e):t.appendChild(e)}const s=document.createElement("div");if(this.options.progressBar&&(s.classList.add("toast-progress"),s.style.setProperty("--animation-duration",`${this.options.duration}ms`),e.appendChild(s)),this.options.stopOnFocus&&this.options.duration>0&&(e.addEventListener("mouseover",(t=>{window.clearTimeout(e.timeOutValue),s.classList.add("animation-paused")})),e.addEventListener("mouseleave",(()=>{s.classList.remove("animation-paused","toast-progress"),s.offsetWidth,s.classList.add("toast-progress"),e.timeOutValue=window.setTimeout((()=>{this._removeElement(e)}),this.options.duration)}))),void 0!==this.options.destination&&e.addEventListener("click",(e=>{e.stopPropagation(),!0===this.options.newWindow?window.open(this.options.destination,"_blank"):window.location=this.options.destination})),"function"==typeof this.options.onClick&&void 0===this.options.destination&&e.addEventListener("click",(e=>{e.stopPropagation(),this.options.onClick()})),"object"==typeof this.options.offset){const t=this._getAxisOffsetAValue("x",this.options),s=this._getAxisOffsetAValue("y",this.options),a="left"==this.options.position?t:`-${t}`,i="toastify-top"==this.options.gravity?s:`-${s}`;e.style.transform=`translate(${a},${i})`}return e}_removeElement(e){e.className=e.className.replace(" on",""),window.setTimeout((()=>{this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),e.parentNode&&e.parentNode.removeChild(e),this.options.callback.call(e),this._reposition()}),400)}_reposition(){let e,t={top:15,bottom:15},s={top:15,bottom:15},a={top:15,bottom:15},i=this._rootElement.querySelectorAll(".toastify");for(let n=0;n<i.length;n++){e=!0===i[n].classList.contains("toastify-top")?"toastify-top":"toastify-bottom";let o=i[n].offsetHeight;e=e.substr(9,e.length-1);let r=15;(window.innerWidth>0?window.innerWidth:screen.width)<=360?(i[n].style[e]=`${a[e]}px`,a[e]+=o+r):!0===i[n].classList.contains("toastify-left")?(i[n].style[e]=`${t[e]}px`,t[e]+=o+r):(i[n].style[e]=`${s[e]}px`,s[e]+=o+r)}}_getAxisOffsetAValue(e,t){return t.offset[e]?isNaN(t.offset[e])?t.offset[e]:`${t.offset[e]}px`:"0px"}}class i{constructor(e,t){this.type=e,this.message=t}static error=e=>new i("error",e);static success=e=>new i("success",e);show=()=>{var e;(e={text:`<div><h3>Sauce for TCG Collector</h3><span>${this.message}</span></div>`,className:this.type,duration:6e3,destination:"#",newWindow:!1,close:!0,gravity:"bottom",position:"center",stopOnFocus:!0,escapeMarkup:!1,progressBar:!0},new a(e)).showToast()}}},18:(e,t,s)=>{"use strict";s.d(t,{U:()=>a});class a{constructor(e){this.settings=e}findByCardIds=async e=>{const t=await fetch(this.settings.getJapaneseCardPricesUrl());return(await t.json()).cards.filter((t=>e.includes(t.cardId)))}}},334:(e,t,s)=>{"use strict";s.d(t,{c:()=>a});class a{constructor(){}getId=()=>"dashboard-rearrangement-feature";needsMutationObserver=()=>!1;needsToBeApplied=e=>"dashboard_page"===e.getRouteName();apply=async()=>{const[e,t]=document.querySelectorAll("div.dashboard-sections-region");e.querySelector("div#dashboard-sets-completed-section").style.display="none",t.style.display="none",e.appendChild(t.querySelectorAll("div.dashboard-sections-subregion")[1].querySelector("div.dashboard-section"))}}},890:(e,t,s)=>{"use strict";s.d(t,{c:()=>i});var a=s(84);class i{constructor(e,t){this.settings=t,this.tcgCardPriceRepository=e}getId=()=>"display-japanese-prices-feature";needsMutationObserver=()=>!0;needsToBeApplied=e=>!this.settings.hidePrices()&&!!this.settings.getJapaneseCardPricesUrl()&&("cards_page"===e.getRouteName()||"sets_set_cards_page"===e.getRouteName()&&2===e.getTcgRegionId());apply=async()=>{const e=a.t.fromHtml().getCardIds();(await this.tcgCardPriceRepository.findByCardIds(e)).forEach((e=>{const t=document.querySelector(`div.card-image-grid-item[data-card-id="${e.cardId}"]`);if(t&&e.cardPrice){const s=(e.cardPrice.amount/100).toFixed(2);t.querySelector(".card-image-controls-item-price").innerHTML=`$${s}`}}))}}},535:(e,t,s)=>{"use strict";s.d(t,{R:()=>a});class a{constructor(){}getId=()=>"filter-expansions";needsMutationObserver=()=>!1;needsToBeApplied=e=>"sets_page"===e.getRouteName();apply=async()=>{const e=JSON.parse(decodeURIComponent(new URLSearchParams(window.location.search).get("customFilters")||"{}"));if(!e.hasOwnProperty("expansionIds"))return;const t=e.expansionIds;document.querySelectorAll(".set-logo-grid-item").forEach((e=>{const s=e.querySelector("*[data-set-like-id]").getAttribute("data-set-like-id");t.includes(parseInt(s))||e.remove()})),document.querySelectorAll(".set-logo-grid").forEach((e=>{0===e.querySelectorAll(".set-logo-grid-item").length&&e.remove()}))}}},545:(e,t,s)=>{"use strict";s.d(t,{B:()=>i});var a=s(785);class i{constructor(e){this.settings=e}getId=()=>"hide-prices-feature";needsMutationObserver=()=>!1;needsToBeApplied=e=>this.settings.hidePrices();apply=async()=>{(0,a.gR)("*",/\$([\d]+\.?\d*)/g).forEach((e=>{e.innerHTML=e.innerHTML.replace(/\$([\d]+\.?\d*)/g,"$â€”")}))}}},694:(e,t,s)=>{"use strict";s.d(t,{l:()=>i});class a{constructor(e){this.settings=e,this.cardMarketiconUrl=chrome.runtime.getURL("dist/assets/card-market.jpg"),this.ebayIconUrl=chrome.runtime.getURL("dist/assets/ebay.png")}buildFor=(e,t)=>{const s=[],a=e.querySelector("a").getAttribute("title").split("(")[0].trim();if(this.settings.getMarketPlaceLinks().includes("cardMarket")){const i=document.createElement("a"),n=parseInt(e.querySelector("span.card-image-grid-item-info-overlay-text-part").innerText.split("/")[0].replace(/\D/g,"").trim());i.classList.add("market-place-link"),i.setAttribute("href",`https://www.cardmarket.com/en/Pokemon/Products/Search?searchString=${encodeURIComponent(a)}+${encodeURIComponent(n)}+${t}`),i.setAttribute("title","Find this card on cardmarket.com"),i.setAttribute("target","_blank"),i.innerHTML=`<img src="${this.cardMarketiconUrl}" alt="Card market" />`,s.push(i)}if(this.settings.getMarketPlaceLinks().includes("ebay")){const t=document.createElement("a"),i=e.querySelector("span.card-image-grid-item-info-overlay-text-part").innerText.trim(),n={_from:"R40"};this.settings.getEbayListingType()&&(n["LH_"+this.settings.getEbayListingType()]=1),this.settings.getEbaySortBy()&&(n._sop=this.settings.getEbaySortBy()),this.settings.getEbayLocation()&&(n.LH_PrefLoc=this.settings.getEbayLocation()),t.classList.add("market-place-link"),t.setAttribute("href",`${this.settings.getEbayUrl().replace(/\/$/,"")}/sch/i.html?_nkw=${encodeURIComponent(a)}+${encodeURIComponent(i)}&${new URLSearchParams(n).toString()}`),t.setAttribute("title",`Find this card on ${this.settings.getEbayUrl()}`),t.setAttribute("target","_blank"),t.innerHTML=`<img src="${this.ebayIconUrl}" alt="Ebay" />`,s.push(t)}return s}}class i{constructor(e){this.settings=e}getId=()=>"market-place-links-feature";needsMutationObserver=()=>!0;needsToBeApplied=e=>0!==this.settings.getMarketPlaceLinks().length&&("cards_page"===e.getRouteName()||"sets_set_cards_page"===e.getRouteName());apply=async()=>{const e=document.querySelectorAll("div#card-image-grid div.card-image-grid-item"),t=document.querySelector("span#card-search-result-title-expansion-code")?.innerText||"",s=new a(this.settings);e.forEach((e=>{s.buildFor(e,t).forEach((t=>{e.querySelector("div.card-image-controls-item").appendChild(t)}))}))}}},10:(e,t,s)=>{"use strict";s.d(t,{B:()=>a});class a{constructor(e){this.settings=e}getId=()=>"new-menu-item-feature";needsMutationObserver=()=>!1;needsToBeApplied=e=>document.querySelectorAll("div#navbar-buttons").length>0;apply=async()=>{const e=document.querySelector("div#navbar-buttons"),t=document.createElement("a");t.classList.add("navbar-button"),t.setAttribute("href","https://docs.google.com/spreadsheets/d/"+this.settings.getGoogleSpreadSheetId()),t.setAttribute("title","Navigate to spreadsheet"),t.setAttribute("target","_blank"),t.innerHTML='<span aria-hidden="true" class="fa-solid fa-file-csv"></span>',e.prepend(t)}}},735:(e,t,s)=>{"use strict";s.d(t,{J:()=>i});var a=s(785);class i{constructor(){}getId=()=>"print-binder-expansion-logos";needsMutationObserver=()=>!1;needsToBeApplied=e=>"sets_page"===e.getRouteName();apply=async()=>{const e=document.querySelectorAll(".set-logo-grid-item"),t=document.createElement("div");t.setAttribute("id","print"),e.forEach((e=>{const s=e.querySelector("img.set-logo-grid-item-set-logo").getAttribute("src"),i=e.querySelector(".set-logo-grid-item-set-name").innerText,n=(0,a.g9)(i),o=document.createElement("div");if(o.classList.add("expansion"),o.setAttribute("data-expansions-name",n),o.innerHTML+=`<img src="${s}" class="logo" alt="Expansion logo"/>`,e.querySelectorAll("img.set-logo-grid-item-set-symbol").length>0){const t=e.querySelector("img.set-logo-grid-item-set-symbol").getAttribute("src");o.innerHTML+=`<img src="${t}" class="symbol" alt="Expansion Symbol"/>`}t.appendChild(o.cloneNode(!0)),t.appendChild(o.cloneNode(!0));const r=document.createElement("input");r.setAttribute("type","checkbox"),r.setAttribute("data-expansions-name",n),r.addEventListener("click",(()=>{document.querySelector("button span.count").innerHTML=document.querySelectorAll('input[type="checkbox"][data-expansions-name]:checked').length}));const d=document.createElement("label");d.appendChild(r),e.appendChild(d)}));const s=document.body;s.appendChild(t);const i=document.createElement("div");i.classList.add("print-navigation");const n=document.createElement("div");n.classList.add("inner"),i.appendChild(n),s.appendChild(i);const o=document.createElement("button");o.classList.add("cancel"),o.innerHTML='<span class="fa-solid fa-ban"></span><div>Exit print mode</div>',o.addEventListener("click",(()=>{s.classList.remove("in-print-selection-mode")}));const r=document.createElement("button");r.classList.add("print"),r.innerHTML='<span class="fa-solid fa-print"></span><div>Print <span class="count">0</span> expansion logo(s)</div>',r.addEventListener("click",(()=>{const e=parseInt(document.querySelector(".size input").value),t=document.querySelector(".shape select").value,a=Math.floor(210/(e+2.5))*Math.floor(297/(e+2.5));document.querySelectorAll("div.expansion[data-expansions-name]").forEach((s=>{s.style.display="none",s.style.setProperty("--expansion-width",`${e}mm`),s.style.setProperty("--expansion-border-radius",t),s.classList.remove("page-break")}));let i=0;document.querySelectorAll('input[type="checkbox"][data-expansions-name]:checked').forEach((e=>{const t=e.getAttribute("data-expansions-name");document.querySelectorAll(`div.expansion[data-expansions-name="${t}"]`).forEach((e=>{e.style.display=null,i++,i%a==0&&e.classList.add("page-break")}))})),s.classList.add("printing"),window.print()}));const d=document.createElement("div");d.classList.add("shape"),d.innerHTML='<span class="fa-swatchbook fa-solid"></span>\n            <select>\n            <option value="50%" selected>Circle</option>\n            <option value="0">Rectangle</option>\n            </select>';const c=document.createElement("div");c.classList.add("size"),c.innerHTML='<span class="fa-up-right-and-down-left-from-center fa-solid"></span><input type="number" min="1" max="99" value="39"/><span class="unit">mm</span>',n.appendChild(d),n.appendChild(c),n.appendChild(r),n.appendChild(o);const l=document.createElement("button");l.classList.add("button","button-plain-alt","toggle-print-selection"),l.setAttribute("title","Print expansion logos"),l.innerHTML='<span class="fa-solid fa-print"></span><div>Print expansion logos</div>',l.addEventListener("click",(()=>{s.classList.add("in-print-selection-mode")})),document.querySelector("div#set-search-result-header").appendChild(l),addEventListener("afterprint",(()=>{s.classList.remove("printing")})),window.addEventListener("keydown",(e=>{"Escape"===e.key&&s.classList.remove("in-print-selection-mode")}))}}},256:(e,t,s)=>{"use strict";s.d(t,{O:()=>n});var a=s(785),i=s(84);class n{constructor(){}getId=()=>"print-binder-placeholders-feature";needsMutationObserver=()=>!1;needsToBeApplied=e=>"sets_set_cards_page"===e.getRouteName();apply=async()=>{const e=i.t.fromHtml(),t=e.getCardIdToCardVariantTypeIdsMap(),s=e.getIdToCardVariantTypeDtoMap(),n=document.createElement("div");n.setAttribute("id","print"),e.getCardIds().forEach((e=>{const i=document.querySelector(`div.card-image-grid-item[data-card-id="${e}"]`),o=i.querySelector("a").getAttribute("title").split("(")[0].trim(),r=i.querySelector("span.card-image-grid-item-info-overlay-text-part").innerText.trim();t[e].forEach((t=>{const i=s[t].name,d=document.createElement("div");d.classList.add("placeholder",(0,a.g9)(o),(0,a.g9)(i)),d.setAttribute("data-card-id",e),d.innerHTML=`<div>${o}</div><div>${r}</div><div>${i}</div>`,n.appendChild(d)}));const d=document.createElement("input");d.setAttribute("type","checkbox"),d.setAttribute("data-card-id",e),d.addEventListener("click",(()=>{document.querySelector("button span.count").innerHTML=document.querySelectorAll('input[type="checkbox"][data-card-id]:checked').length}));const c=document.createElement("label");c.appendChild(d),i.appendChild(c)}));const o=document.body;o.appendChild(n);const r=document.createElement("div");r.classList.add("print-navigation");const d=document.createElement("div");d.classList.add("inner"),r.appendChild(d),o.appendChild(r);const c=document.createElement("button");c.classList.add("cancel"),c.innerHTML='<span class="fa-solid fa-ban"></span><div>Exit print mode</div>',c.addEventListener("click",(()=>{o.classList.remove("in-print-selection-mode")}));const l=document.createElement("button");l.classList.add("print"),l.innerHTML='<span class="fa-solid fa-print"></span><div>Print <span class="count">0</span> binder placeholder(s)</div>',l.addEventListener("click",(()=>{document.querySelectorAll("div.placeholder[data-card-id]").forEach((e=>{e.style.display=null})),document.querySelectorAll('input[type="checkbox"][data-card-id]:not(:checked)').forEach((e=>{const t=e.getAttribute("data-card-id");document.querySelectorAll(`div.placeholder[data-card-id="${t}"]`).forEach((e=>{e.style.display="none"}))})),o.classList.add("printing"),window.print()})),d.appendChild(l),d.appendChild(c);const p=document.createElement("button");p.classList.add("button","button-plain-alt","toggle-print-selection"),p.setAttribute("title","Print binder placeholders"),p.innerHTML='<span class="fa-solid fa-print"></span><div>Print binder placeholders</div>',p.addEventListener("click",(()=>{o.classList.add("in-print-selection-mode")})),document.querySelector("#card-search-result-header-actions-dropdown").appendChild(p),addEventListener("afterprint",(()=>{o.classList.remove("printing")})),window.addEventListener("keydown",(e=>{"Escape"===e.key&&o.classList.remove("in-print-selection-mode")}))}}},362:(e,t,s)=>{"use strict";s.d(t,{P:()=>r});var a=s(746);class i{constructor(e){if(!e)throw new Error("Grading company name cannot be empty");this.name=e}getName=()=>this.name.toLowerCase();getLabel=()=>this.name;getCertUrl=e=>{if("psa"===this.getName())return`https://www.psacard.com/cert/${e}`;if("cgc"===this.getName())return`https://www.cgccards.com/certlookup/${e}`;throw new Error(`Unknown grading company ${this.name}`)}}var n=s(84),o=s(35);class r{constructor(e){this.settings=e}getId=()=>"purchase-price-feature";needsMutationObserver=()=>!0;needsToBeApplied=e=>"cards_card_page"===e.getRouteName()||"cards_page"===e.getRouteName()||"sets_set_cards_page"===e.getRouteName();apply=async()=>{if("cards_card_page"===n.t.fromHtml().getRouteName()){const e=n.t.fromHtml().getCardId();await navigator.clipboard.writeText(e),o.y.success(`Card id "${e}" copied to clipboard.`).show();const t=document.createElement("div");t.classList.add("tcg-collector-card-prices-wrapper");const s=document.createElement("div");s.classList.add("tcg-collector-card-prices");const r=new a.V(this.settings.getGoogleSpreadSheetId(),"Slabs / Singles"),d=(await r.parse()).filter((t=>parseInt(t.cardId)===e&&void 0!==t.price));if(0===d.length)return t;d.forEach((function(e){const t=document.createElement("div");t.innerHTML=`<div>${e.purchaseDate}</div><div>${e.price}</div>`;try{const s=new i(e.gradingCompany);e.certNumber?t.innerHTML+=`\n<div class="grading">\n    <span>${e.type}</span>\n    <a href="${s.getCertUrl(e.certNumber)}" target="_blank" title="${s.getLabel()}" class="icon ${s.getName()}">\n        ${s.getLabel()}\n    </a>\n</div>`:t.innerHTML+=`\n<div class="grading">\n    <span>${e.type}</span>\n    <span title="${s.getLabel()}" class="icon ${s.getName()}">\n        ${s.getLabel()}\n    </span>\n</div>`}catch(s){t.innerHTML+=`<div>${e.type}</div>`}s.appendChild(t)}));const c=document.createElement("div");return c.innerHTML="Purchase price(s)",c.classList.add("title"),t.appendChild(c),t.appendChild(s),void document.querySelector("div#card-page-inner-content div.card-image-controls").appendChild(t)}const e=new a.V(this.settings.getGoogleSpreadSheetId(),"Slabs / Singles"),t=await e.parse();document.querySelectorAll("div#card-image-grid div.card-image-grid-item").forEach((e=>{const s=parseInt(e.getAttribute("data-card-id"));t.filter((e=>parseInt(e.cardId)===s&&void 0===e.price)).length>0&&e.setAttribute("data-is-en-route","")}))}}},144:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var a=s(746);class i{constructor(e){this.name=e}isAll(){return"all"===this.name}filterRows(e,t=!1){return this.isAll()&&!t?e:e.filter((e=>e.region===this.name))}buildUri(e){return this.isAll()?e.replace("[REGION]",""):e.replace("[REGION]","/"+this.name)}static fromCurrentUrl(){const e=window.location.href.replace("#","");return 4===e.split("/").length?new i("all"):new i(e.split("/").slice(-1)[0])}}class n{constructor(e){this.settings=e}getId=()=>"quick-access-links-feature";needsMutationObserver=()=>!1;needsToBeApplied=e=>"dashboard_page"===e.getRouteName();apply=async()=>{const e=i.fromCurrentUrl(),t=document.querySelectorAll("div.dashboard-section div.list-group")[1];t.innerHTML='<div class="loading-state-loading-spinner-underlay" style="display: flex; justify-content: center"><div class="loading-state-loading-spinner loading-spinner"></div></div>';const s=new a.V(this.settings.getGoogleSpreadSheetId(),"Slabs / Singles"),n=`/cards?cardSource=inCardCollection&cardsPerPage=120&sortBy=cardNameAsc&cards=${e.filterRows(await s.parse()).filter((e=>"Single"===e.type&&void 0!==e.price)).map((e=>parseInt(e.cardId))).join(",")}`,o=new a.V(this.settings.getGoogleSpreadSheetId(),"Quick access links"),r=(await o.parse()).filter((t=>"TRUE"===t[e.name]));r.push({title:"Singles",url:n,icon:"fa-database"}),t.innerHTML="",r.forEach((s=>{const a=document.createElement("a");a.classList.add("list-group-item"),a.setAttribute("href",e.buildUri(s.url)),a.innerHTML=`\n        <span class="list-group-item-left-item-container">\n          <span aria-hidden="true" class="list-group-item-side-item-icon fa-solid ${s.icon} fa-fw"></span>\n        </span>\n        ${s.title}\n        <span class="list-group-item-right-item-container">\n          <span aria-hidden="true" class="list-group-item-side-item-icon fa-solid fa-chevron-right"></span>\n        </span>`,t.appendChild(a)}))}}},84:(e,t,s)=>{"use strict";s.d(t,{t:()=>a});class a{constructor(e){this.state=e}getRouteName=()=>this.state.routeName;getTcgRegionId=()=>this.state.tcgRegionId;getCardIds=()=>this.state.cardIds||[];getCardId=()=>this.getCardIds()[0];getCardIdToCardVariantTypeIdsMap=()=>this.state.cardIdToCardVariantTypeIdsMap;getIdToCardVariantTypeDtoMap=()=>this.state.idToCardVariantTypeDtoMap;static fromHtml=()=>{const e=document.body.innerHTML,t=/window.tcgcollector[\s]*=[\s]*{[\s]*appState:(.*),[\s]*}/im;if(!t.test(e))throw new Error("AppState could not be determined");return new a(JSON.parse(e.match(t)[1]))}}},973:(e,t,s)=>{"use strict";s.a(e,(async(e,a)=>{try{s.d(t,{A:()=>f});var i=s(18),n=s(10),o=s(545),r=s(334),d=s(144),c=s(362),l=s(256),p=s(694),u=s(813),h=s(890),m=s(735),g=s(535);const e=await u.wB.fromSyncStorage(),y=new i.U(e),f={Settings:e,TcgCardPriceRepository:y,Features:[new n.B(e),new o.B(e),new r.c,new d.Z(e),new c.P(e),new l.O,new m.J,new p.l(e),new h.c(y,e),new g.R]};a()}catch(e){a(e)}}),1)},813:(e,t,s)=>{"use strict";s.d(t,{Gx:()=>c,Rn:()=>i,VX:()=>n,ap:()=>h,dF:()=>l,dk:()=>u,nY:()=>p,q3:()=>a,wB:()=>m});const a="googleSpreadSheetId",i="japaneseCardPricesUrl",n="hidePrices",o="marketPlaceLinks",r="cardMarketCardLanguages",d="cardMarketSellerLocations",c="cardMarketMinCondition",l="ebayUrl",p="ebayListingType",u="ebayLocation",h="ebaySortBy";class m{constructor(e){this.storage=e}getGoogleSpreadSheetId=()=>this.storage[a]||"";getJapaneseCardPricesUrl=()=>this.storage[i]||"";hidePrices=()=>this.storage[n]||!1;getMarketPlaceLinks=()=>this.storage[o]||[];getCardMarketCardLanguages=()=>this.storage[r]||[];getCardMarketSellerLocations=()=>this.storage[d]||[];getCardMarketMinCondition=()=>this.storage[c]||2;getEbayUrl=()=>this.storage[l]||"";getEbayListingType=()=>this.storage[p]||"All";getEbayLocation=()=>this.storage[u]||98;getEbaySortBy=()=>this.storage[h]||12;get=e=>this.storage[e]||[];static getSettingsWithMultipleValues=()=>[o,r,d];static fromSyncStorage=async()=>{let{settings:e}=await chrome.storage.sync.get("settings");return new m(e||{})};static save=async e=>{const t=Object.fromEntries(e.entries());m.getSettingsWithMultipleValues().forEach((s=>{t[s]=e.getAll(s)})),await chrome.storage.sync.set({settings:t})}}},785:(e,t,s)=>{"use strict";s.d(t,{PT:()=>a,g9:()=>n,gR:()=>i});const a=e=>e.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()})).replace(/\s+/g,""),i=(e,t)=>[...document.querySelectorAll(e)].filter((e=>e.childNodes?.[0]?.nodeValue?.match(t))),n=e=>e.trim().replace(/[!\"#$%&'\(\)\*\+,\.\/:;<=>\?\@\[\\\]\^`\{\|\}~]/g,"").replace(/\s/g,"-").toLowerCase()},746:(e,t,s)=>{"use strict";s.d(t,{V:()=>o});var a=s(908),i=s.n(a),n=s(785);class o{constructor(e,t){this.spreadSheetId=e,this.sheetName=t}parse=async()=>{const e=new(i())(this.spreadSheetId,{sheetName:this.sheetName,useFormat:!0});return(await e.parse()).map((e=>{const t={};return Object.keys(e).forEach((s=>{t[(0,n.PT)(s)]=e[s]})),t}))}}},681:()=>{}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var s=n[e]={exports:{}};return i[e](s,s.exports,o),s.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",s="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},o.a=(i,n,o)=>{var r;o&&((r=[]).d=-1);var d,c,l,p=new Set,u=i.exports,h=new Promise(((e,t)=>{l=t,c=e}));h[t]=u,h[e]=e=>(r&&e(r),p.forEach(e),h.catch((e=>{}))),i.exports=h,n((i=>{var n;d=(i=>i.map((i=>{if(null!==i&&"object"==typeof i){if(i[e])return i;if(i.then){var n=[];n.d=0,i.then((e=>{o[t]=e,a(n)}),(e=>{o[s]=e,a(n)}));var o={};return o[e]=e=>e(n),o}}var r={};return r[e]=e=>{},r[t]=i,r})))(i);var o=()=>d.map((e=>{if(e[s])throw e[s];return e[t]})),c=new Promise((t=>{(n=()=>t(o)).r=0;var s=e=>e!==r&&!p.has(e)&&(p.add(e),e&&!e.d&&(n.r++,e.push(n)));d.map((t=>t[e](s)))}));return n.r?c:o()}),(e=>(e?l(h[s]=e):c(u),a(r)))),r&&r.d<0&&(r.d=0)},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o(406)})();