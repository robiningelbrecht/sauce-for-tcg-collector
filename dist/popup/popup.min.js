(()=>{"use strict";const e="googleSpreadSheetId",t="hidePrices",a="marketPlaceLinks",s="cardMarketCardLanguages",r="cardMarketSellerLocations",i="cardMarketMinCondition",o="ebayUrl",g="ebayListingType",l="ebaySortBy";class n{constructor(e){this.storage=e}getGoogleSpreadSheetId=()=>this.storage[e]||"";hidePrices=()=>this.storage[t]||!1;getMarketPlaceLinks=()=>this.storage[a]||"none";getCardMarketCardLanguages=()=>this.storage[s]||[];getCardMarketSellerLocations=()=>this.storage[r]||[];getCardMarketMinCondition=()=>this.storage[i]||2;getEbayUrl=()=>this.storage[o]||"";getEbayListingType=()=>this.storage[g]||"all";getEbaySortBy=()=>this.storage[l]||"best_match";get=e=>this.storage[e];static getSettingsWithMultipleValues=()=>[s,r];static fromSyncStorage=async()=>{let{settings:e}=await chrome.storage.sync.get("settings");return new n(e||{})};static save=async e=>{const t=Object.fromEntries(e.entries());n.getSettingsWithMultipleValues().forEach((a=>{t[a]=e.getAll(a)})),await chrome.storage.sync.set({settings:t})}}(async()=>{const s=await n.fromSyncStorage(),r=document.querySelector("form");r.elements[e].value=s.getGoogleSpreadSheetId(),r.elements[t].checked=s.hidePrices(),r.elements[a].value=s.getMarketPlaceLinks(),r.elements[i].value=s.getCardMarketMinCondition(),r.elements[o].value=s.getEbayUrl(),r.elements[g].value=s.getEbayListingType(),r.elements[l].value=s.getEbaySortBy(),n.getSettingsWithMultipleValues().forEach((e=>{s.get(e).forEach((t=>{r.elements[e+"["+t+"]"].checked=!0}))}));const c=r.querySelector("input[data-target-toggle]:checked").getAttribute("data-target-toggle");c&&(r.querySelector('[data-toggle-id="'+c+'"]').style.display="flex"),r.addEventListener("input",(function(e){const t=e.target;if(t.hasAttribute("data-target-toggle")){r.querySelectorAll("[data-toggle-id]").forEach((function(e){e.style.display="none"}));const e=t.getAttribute("data-target-toggle");t.checked&&e&&(r.querySelector('[data-toggle-id="'+e+'"]').style.display="flex")}})),r.addEventListener("submit",(async e=>{e.preventDefault();const t=new FormData(r);await n.save(t),chrome.tabs.query({url:"https://www.tcgcollector.com/*"},(([e])=>{chrome.tabs.update(e.id,{url:e.url})}))}))})()})();