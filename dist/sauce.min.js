/*! For license information please see sauce.min.js.LICENSE.txt */
(()=>{var e,t,n,r,i={744:function(e,t,n){e.exports=function(){"use strict";var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)},t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function r(e,t,n){if(n||2===arguments.length)for(var r,i=0,s=t.length;i<s;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:n.g,s=Object.keys,o=Array.isArray;function a(e,t){return"object"!=typeof t||s(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||i.Promise||(i.Promise=Promise);var u=Object.getPrototypeOf,c={}.hasOwnProperty;function l(e,t){return c.call(e,t)}function d(e,t){"function"==typeof t&&(t=t(u(e))),("undefined"==typeof Reflect?s:Reflect.ownKeys)(t).forEach((function(n){f(e,n,t[n])}))}var h=Object.defineProperty;function f(e,t,n,r){h(e,t,a(n&&l(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function m(e){return{from:function(t){return e.prototype=Object.create(t.prototype),f(e.prototype,"constructor",e),{extend:d.bind(null,e.prototype)}}}}var p=Object.getOwnPropertyDescriptor,y=[].slice;function g(e,t,n){return y.call(e,t,n)}function v(e,t){return t(e)}function b(e){if(!e)throw new Error("Assertion Failed")}function w(e){i.setImmediate?setImmediate(e):setTimeout(e,0)}function _(e,t){if("string"==typeof t&&l(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var s=_(e,t[r]);n.push(s)}return n}var o=t.indexOf(".");if(-1!==o){var a=e[t.substr(0,o)];return null==a?void 0:_(a,t.substr(o+1))}}function k(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){b("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)k(e,t[r],n[r])}else{var s,a,u=t.indexOf(".");-1!==u?(s=t.substr(0,u),""===(a=t.substr(u+1))?void 0===n?o(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=n:k(u=(u=e[s])&&l(e,s)?u:e[s]={},a,n)):void 0===n?o(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function S(e){var t,n={};for(t in e)l(e,t)&&(n[t]=e[t]);return n}var T=[].concat;function x(e){return T.apply([],e)}var O="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(x([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return i[e]})),E=new Set(O.map((function(e){return i[e]}))),C=null;function I(e){return C=new WeakMap,e=function e(t){if(!t||"object"!=typeof t)return t;var n=C.get(t);if(n)return n;if(o(t)){n=[],C.set(t,n);for(var r=0,i=t.length;r<i;++r)n.push(e(t[r]))}else if(E.has(t.constructor))n=t;else{var s,a=u(t);for(s in n=a===Object.prototype?{}:Object.create(a),C.set(t,n),t)l(t,s)&&(n[s]=e(t[s]))}return n}(e),C=null,e}var N={}.toString;function M(e){return N.call(e).slice(8,-1)}var D="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",A="symbol"==typeof D?function(e){var t;return null!=e&&(t=e[D])&&t.apply(e)}:function(){return null};function L(e,t){return 0<=(t=e.indexOf(t))&&e.splice(t,1),0<=t}var P={};function q(e){var t,n,r,i;if(1===arguments.length){if(o(e))return e.slice();if(this===P&&"string"==typeof e)return[e];if(i=A(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"!=typeof(t=e.length))return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var F="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},j=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ue=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"]),R={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function V(e,t){this.name=e,this.message=t}function $(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}function K(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=$(e,t)}function B(e,t){this.name="BulkError",this.failures=Object.keys(t).map((function(e){return t[e]})),this.failuresByPos=t,this.message=$(e,this.failures)}m(V).from(Error).extend({toString:function(){return this.name+": "+this.message}}),m(K).from(V),m(B).from(V);var W=j.reduce((function(e,t){return e[t]=t+"Error",e}),{}),U=V,z=j.reduce((function(e,t){var n=t+"Error";function r(e,r){this.name=n,e?"string"==typeof e?(this.message="".concat(e).concat(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=R[t]||n,this.inner=null)}return m(r).from(U),e[t]=r,e}),{});z.Syntax=SyntaxError,z.Type=TypeError,z.Range=RangeError;var Z=ue.reduce((function(e,t){return e[t+"Error"]=z[t],e}),{}),H=j.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=z[t]),e}),{});function Y(){}function G(e){return e}function J(e,t){return null==e||e===G?t:function(n){return t(e(n))}}function Q(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function X(e,t){return e===Y?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Q(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Q(i,this.onerror):i),void 0!==s?s:n}}function ee(e,t){return e===Y?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Q(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Q(r,this.onerror):r)}}function te(e,t){return e===Y?t:function(n){var r=e.apply(this,arguments);a(n,r);var i=this.onsuccess,s=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?Q(i,this.onsuccess):i),s&&(this.onerror=this.onerror?Q(s,this.onerror):s),void 0===r?void 0===n?void 0:n:a(r,n)}}function ne(e,t){return e===Y?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function re(e,t){return e===Y?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then((function(){return t.apply(r,s)}))}return t.apply(this,arguments)}}H.ModifyError=K,H.DexieError=V,H.BulkError=B;var ie="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function se(e){ie=e}var oe={},ae=100,ue=(O="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,u(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,u(t),e]}(),O[0]),ce=(j=O[1],O=O[2],j=j&&j.then,ue&&ue.constructor),le=!!O,de=function(e,t){be.push([e,t]),fe&&(queueMicrotask(Ie),fe=!1)},he=!0,fe=!0,me=[],pe=[],ye=G,ge={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Y,pgp:!1,env:{},finalize:Y},ve=ge,be=[],we=0,_e=[];function ke(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=ve;if("function"!=typeof e){if(e!==oe)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&xe(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,n){try{n((function(n){if(null===t._state){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Ne();n&&"function"==typeof n.then?e(t,(function(e,t){n instanceof ke?n._then(e,t):n.then(e,t)})):(t._state=!0,t._value=n,Oe(t)),r&&Me()}}),xe.bind(null,t))}catch(n){xe(t,n)}}(this,e)}var Se={get:function(){var e=ve,t=Re;function n(n,r){var i=this,s=!e.global&&(e!==ve||t!==Re),o=s&&!Be(),a=new ke((function(t,a){Ee(i,new Te(Ye(n,e,s,o),Ye(r,e,s,o),t,a,e))}));return this._consoleTask&&(a._consoleTask=this._consoleTask),a}return n.prototype=oe,n},set:function(e){f(this,"then",e&&e.prototype===oe?Se:{get:function(){return e},set:Se.set})}};function Te(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function xe(e,t){var n,r;pe.push(t),null===e._state&&(n=e._lib&&Ne(),t=ye(t),e._state=!1,e._value=t,r=e,me.some((function(e){return e._value===r._value}))||me.push(r),Oe(e),n&&Me())}function Oe(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Ee(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===we&&(++we,de((function(){0==--we&&De()}),[]))}function Ee(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++we,de(Ce,[n,e,t])}else e._listeners.push(t)}function Ce(e,t,n){try{var r,i=t._value;!t._state&&pe.length&&(pe=[]),r=ie&&t._consoleTask?t._consoleTask.run((function(){return e(i)})):e(i),t._state||-1!==pe.indexOf(i)||function(e){for(var t=me.length;t;)if(me[--t]._value===e._value)return me.splice(t,1)}(t),n.resolve(r)}catch(e){n.reject(e)}finally{0==--we&&De(),--n.psd.ref||n.psd.finalize()}}function Ie(){He(ge,(function(){Ne()&&Me()}))}function Ne(){var e=he;return fe=he=!1,e}function Me(){var e,t,n;do{for(;0<be.length;)for(e=be,be=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(0<be.length);fe=he=!0}function De(){var e=me;me=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=_e.slice(0),n=t.length;n;)t[--n]()}function Ae(e){return new ke(oe,!1,e)}function Le(e,t){var n=ve;return function(){var r=Ne(),i=ve;try{return ze(n,!0),e.apply(this,arguments)}catch(r){t&&t(r)}finally{ze(i,!1),r&&Me()}}}d(ke.prototype,{then:Se,_then:function(e,t){Ee(this,new Te(null,null,e,t,ve))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=e,n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return(e instanceof t?n:Ae)(e)})):this.then(null,(function(e){return(e&&e.name===t?n:Ae)(e)}))},finally:function(e){return this.then((function(t){return ke.resolve(e()).then((function(){return t}))}),(function(t){return ke.resolve(e()).then((function(){return Ae(t)}))}))},timeout:function(e,t){var n=this;return e<1/0?new ke((function(r,i){var s=setTimeout((function(){return i(new z.Timeout(t))}),e);n.then(r,i).finally(clearTimeout.bind(null,s))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&f(ke.prototype,Symbol.toStringTag,"Dexie.Promise"),ge.env=Ze(),d(ke,{all:function(){var e=q.apply(null,arguments).map(We);return new ke((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(i,s){return ke.resolve(i).then((function(n){e[s]=n,--r||t(e)}),n)}))}))},resolve:function(e){return e instanceof ke?e:e&&"function"==typeof e.then?new ke((function(t,n){e.then(t,n)})):new ke(oe,!0,e)},reject:Ae,race:function(){var e=q.apply(null,arguments).map(We);return new ke((function(t,n){e.map((function(e){return ke.resolve(e).then(t,n)}))}))},PSD:{get:function(){return ve},set:function(e){return ve=e}},totalEchoes:{get:function(){return Re}},newPSD:$e,usePSD:He,scheduler:{get:function(){return de},set:function(e){de=e}},rejectionMapper:{get:function(){return ye},set:function(e){ye=e}},follow:function(e,t){return new ke((function(n,r){return $e((function(t,n){var r=ve;r.unhandleds=[],r.onunhandled=n,r.finalize=Q((function(){var e,r=this;e=function(){0===r.unhandleds.length?t():n(r.unhandleds[0])},_e.push((function t(){e(),_e.splice(_e.indexOf(t),1)})),++we,de((function(){0==--we&&De()}),[])}),r.finalize),e()}),t,n,r)}))}}),ce&&(ce.allSettled&&f(ke,"allSettled",(function(){var e=q.apply(null,arguments).map(We);return new ke((function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach((function(e,i){return ke.resolve(e).then((function(e){return r[i]={status:"fulfilled",value:e}}),(function(e){return r[i]={status:"rejected",reason:e}})).then((function(){return--n||t(r)}))}))}))})),ce.any&&"undefined"!=typeof AggregateError&&f(ke,"any",(function(){var e=q.apply(null,arguments).map(We);return new ke((function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach((function(e,s){return ke.resolve(e).then((function(e){return t(e)}),(function(e){i[s]=e,--r||n(new AggregateError(i))}))}))}))})));var Pe={awaits:0,echoes:0,id:0},qe=0,Fe=[],je=0,Re=0,Ve=0;function $e(e,t,n,r){var i=ve,s=Object.create(i);return s.parent=i,s.ref=0,s.global=!1,s.id=++Ve,ge.env,s.env=le?{Promise:ke,PromiseProp:{value:ke,configurable:!0,writable:!0},all:ke.all,race:ke.race,allSettled:ke.allSettled,any:ke.any,resolve:ke.resolve,reject:ke.reject}:{},t&&a(s,t),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()},r=He(s,e,n,r),0===s.ref&&s.finalize(),r}function Ke(){return Pe.id||(Pe.id=++qe),++Pe.awaits,Pe.echoes+=ae,Pe.id}function Be(){return!!Pe.awaits&&(0==--Pe.awaits&&(Pe.id=0),Pe.echoes=Pe.awaits*ae,!0)}function We(e){return Pe.echoes&&e&&e.constructor===ce?(Ke(),e.then((function(e){return Be(),e}),(function(e){return Be(),Je(e)}))):e}function Ue(){var e=Fe[Fe.length-1];Fe.pop(),ze(e,!1)}function ze(e,t){var n,r=ve;(t?!Pe.echoes||je++&&e===ve:!je||--je&&e===ve)||queueMicrotask(t?function(e){++Re,Pe.echoes&&0!=--Pe.echoes||(Pe.echoes=Pe.awaits=Pe.id=0),Fe.push(ve),ze(e,!0)}.bind(null,e):Ue),e!==ve&&(ve=e,r===ge&&(ge.env=Ze()),le&&(n=ge.env.Promise,t=e.env,(r.global||e.global)&&(Object.defineProperty(i,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function Ze(){var e=i.Promise;return le?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function He(e,t,n,r,i){var s=ve;try{return ze(e,!0),t(n,r,i)}finally{ze(s,!1)}}function Ye(e,t,n,r){return"function"!=typeof e?e:function(){var i=ve;n&&Ke(),ze(t,!0);try{return e.apply(this,arguments)}finally{ze(i,!1),r&&queueMicrotask(Be)}}}function Ge(e){Promise===ce&&0===Pe.echoes?0===je?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+j).indexOf("[native code]")&&(Ke=Be=Y);var Je=ke.reject,Qe=String.fromCharCode(65535),Xe="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",et="String expected.",tt=[],nt="__dbnames",rt="readonly",it="readwrite";function st(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var ot={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function at(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=I(t))[e],t}}function ut(){throw z.Type()}function ct(e,t){try{var n=lt(e),r=lt(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,s=0;s<i;++s)if(e[s]!==t[s])return e[s]<t[s]?-1:1;return n===r?0:n<r?-1:1}(dt(e),dt(t));case"Array":return function(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,s=0;s<i;++s){var o=ct(e[s],t[s]);if(0!==o)return o}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function lt(e){var t=typeof e;return"object"!=t?t:ArrayBuffer.isView(e)||"ArrayBuffer"===(e=M(e))?"binary":e}function dt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var ht=(ft.prototype._trans=function(e,t,n){var r=this._tx||ve.trans,i=this.name,s=ie&&"undefined"!=typeof console&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===e?"read":"write"," ").concat(this.name));function o(e,n,r){if(!r.schema[i])throw new z.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}var a=Ne();try{var u=r&&r.db._novip===this.db._novip?r===ve.trans?r._promise(e,o,n):$e((function(){return r._promise(e,o,n)}),{trans:r,transless:ve.transless||ve}):function e(t,n,r,i){if(t.idbdb&&(t._state.openComplete||ve.letThrough||t._vip)){var s=t._createTransaction(n,r,t._dbSchema);try{s.create(),t._state.PR1398_maxLoop=3}catch(s){return s.name===W.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then((function(){return e(t,n,r,i)}))):Je(s)}return s._promise(n,(function(e,t){return $e((function(){return ve.trans=s,i(e,t,s)}))})).then((function(e){if("readwrite"===n)try{s.idbtrans.commit()}catch(e){}return"readonly"===n?e:s._completion.then((function(){return e}))}))}if(t._state.openComplete)return Je(new z.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return Je(new z.DatabaseClosed);t.open().catch(Y)}return t._state.dbReadyPromise.then((function(){return e(t,n,r,i)}))}(this.db,e,[this.name],o);return s&&(u._consoleTask=s,u=u.catch((function(e){return console.trace(e),Je(e)}))),u}finally{a&&Me()}},ft.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?Je(new z.Type("Invalid argument to Table.get()")):this._trans("readonly",(function(t){return n.core.get({trans:t,key:e}).then((function(e){return n.hook.reading.fire(e)}))})).then(t)},ft.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(o(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=s(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){if(e.compound&&t.every((function(t){return 0<=e.keyPath.indexOf(t)}))){for(var n=0;n<t.length;++n)if(-1===t.indexOf(e.keyPath[n]))return!1;return!0}return!1})).sort((function(e,t){return e.keyPath.length-t.keyPath.length}))[0];if(n&&this.db._maxKey!==Qe){var r=n.keyPath.slice(0,t.length);return this.where(r).equals(r.map((function(t){return e[t]})))}!n&&ie&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var i=this.schema.idxByName,a=this.db._deps.indexedDB;function u(e,t){return 0===a.cmp(e,t)}var c=t.reduce((function(t,n){var r=t[0],s=t[1],a=(t=i[n],e[n]);return[r||t,r||!t?st(s,t&&t.multi?function(e){return e=_(e,n),o(e)&&e.some((function(e){return u(a,e)}))}:function(e){return u(a,_(e,n))}):s]}),[null,null]);return r=c[0],c=c[1],r?this.where(r.name).equals(e[r.keyPath]).filter(c):n?this.filter(c):this.where(t).equals("")},ft.prototype.filter=function(e){return this.toCollection().and(e)},ft.prototype.count=function(e){return this.toCollection().count(e)},ft.prototype.offset=function(e){return this.toCollection().offset(e)},ft.prototype.limit=function(e){return this.toCollection().limit(e)},ft.prototype.each=function(e){return this.toCollection().each(e)},ft.prototype.toArray=function(e){return this.toCollection().toArray(e)},ft.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ft.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,o(e)?"[".concat(e.join("+"),"]"):e))},ft.prototype.reverse=function(){return this.toCollection().reverse()},ft.prototype.mapToClass=function(t){var n,r=this.db,i=this.name;function s(){return null!==n&&n.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof ut&&(function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(s,n=t),Object.defineProperty(s.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),s.prototype.table=function(){return i},t=s);for(var o=new Set,a=t.prototype;a;a=u(a))Object.getOwnPropertyNames(a).forEach((function(e){return o.add(e)}));function c(e){if(!e)return e;var n,r=Object.create(t.prototype);for(n in e)if(!o.has(n))try{r[n]=e[n]}catch(e){}return r}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=c,this.hook("reading",c),t},ft.prototype.defineClass=function(){return this.mapToClass((function(e){a(this,e)}))},ft.prototype.add=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,s=r.keyPath,o=e;return s&&i&&(o=at(s)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[o]})})).then((function(e){return e.numFailures?ke.reject(e.failures[0]):e.lastResult})).then((function(t){if(s)try{k(e,s,t)}catch(t){}return t}))},ft.prototype.update=function(e,t){return"object"!=typeof e||o(e)?this.where(":id").equals(e).modify(t):void 0===(e=_(e,this.schema.primKey.keyPath))?Je(new z.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)},ft.prototype.put=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,s=r.keyPath,o=e;return s&&i&&(o=at(s)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"put",values:[o],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?ke.reject(e.failures[0]):e.lastResult})).then((function(t){if(s)try{k(e,s,t)}catch(t){}return t}))},ft.prototype.delete=function(e){var t=this;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?ke.reject(e.failures[0]):void 0}))},ft.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:ot})})).then((function(e){return e.numFailures?ke.reject(e.failures[0]):void 0}))},ft.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",(function(n){return t.core.getMany({keys:e,trans:n}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))},ft.prototype.bulkAdd=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,s=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=(a=r.schema.primKey).auto;if((a=a.keyPath)&&i)throw new z.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new z.InvalidArgument("Arguments objects and keys must have the same length");var o=e.length,a=a&&n?e.map(at(a)):e;return r.core.mutate({trans:t,type:"add",keys:i,values:a,wantResults:s}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult;if(e=e.failures,0===t)return s?n:i;throw new B("".concat(r.name,".bulkAdd(): ").concat(t," of ").concat(o," operations failed"),e)}))}))},ft.prototype.bulkPut=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,s=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=(a=r.schema.primKey).auto;if((a=a.keyPath)&&i)throw new z.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new z.InvalidArgument("Arguments objects and keys must have the same length");var o=e.length,a=a&&n?e.map(at(a)):e;return r.core.mutate({trans:t,type:"put",keys:i,values:a,wantResults:s}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult;if(e=e.failures,0===t)return s?n:i;throw new B("".concat(r.name,".bulkPut(): ").concat(t," of ").concat(o," operations failed"),e)}))}))},ft.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map((function(e){return e.key})),i=e.map((function(e){return e.changes})),s=[];return this._trans("readwrite",(function(o){return n.getMany({trans:o,keys:r,cache:"clone"}).then((function(a){var u=[],c=[];e.forEach((function(e,n){var r=e.key,i=e.changes,o=a[n];if(o){for(var l=0,d=Object.keys(i);l<d.length;l++){var h=d[l],f=i[h];if(h===t.schema.primKey.keyPath){if(0!==ct(f,r))throw new z.Constraint("Cannot update primary key in bulkUpdate()")}else k(o,h,f)}s.push(n),u.push(r),c.push(o)}}));var l=u.length;return n.mutate({trans:o,type:"put",keys:u,values:c,updates:{keys:r,changeSpecs:i}}).then((function(e){var n=e.numFailures,r=e.failures;if(0===n)return l;for(var i=0,o=Object.keys(r);i<o.length;i++){var a,u=o[i],c=s[Number(u)];null!=c&&(a=r[u],delete r[u],r[c]=a)}throw new B("".concat(t.name,".bulkUpdate(): ").concat(n," of ").concat(l," operations failed"),r)}))}))}))},ft.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,i=e.lastResult;if(e=e.failures,0===r)return i;throw new B("".concat(t.name,".bulkDelete(): ").concat(r," of ").concat(n," operations failed"),e)}))},ft);function ft(){}function mt(e){function t(t,r){if(r){for(var i=arguments.length,s=new Array(i-1);--i;)s[i-1]=arguments[i];return n[t].subscribe.apply(null,s),e}if("string"==typeof t)return n[t]}var n={};t.addEventType=a;for(var r=1,i=arguments.length;r<i;++r)a(arguments[r]);return t;function a(e,r,i){if("object"!=typeof e){var u;r=r||ne;var c={subscribers:[],fire:i=i||Y,subscribe:function(e){-1===c.subscribers.indexOf(e)&&(c.subscribers.push(e),c.fire=r(c.fire,e))},unsubscribe:function(e){c.subscribers=c.subscribers.filter((function(t){return t!==e})),c.fire=c.subscribers.reduce(r,i)}};return n[e]=t[e]=c}s(u=e).forEach((function(e){var t=u[e];if(o(t))a(e,u[e][0],u[e][1]);else{if("asap"!==t)throw new z.InvalidArgument("Invalid event config");var n=a(e,G,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach((function(e){w((function(){e.apply(null,t)}))}))}))}}))}}function pt(e,t){return m(t).from({prototype:e}),t}function yt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function gt(e,t){e.filter=st(e.filter,t)}function vt(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return st(r(),t())}:t,e.justLimit=n&&!r}function bt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new z.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function wt(e,t,n){var r=bt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function _t(e,t,n,r){var i=e.replayFilter?st(e.filter,e.replayFilter()):e.filter;if(e.or){var s={},o=function(e,n,r){var o,a;i&&!i(n,r,(function(e){return n.stop(e)}),(function(e){return n.fail(e)}))||("[object ArrayBuffer]"==(a=""+(o=n.primaryKey))&&(a=""+new Uint8Array(o)),l(s,a)||(s[a]=!0,t(e,n,r)))};return Promise.all([e.or._iterate(o,n),kt(wt(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return kt(wt(e,r,n),st(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function kt(e,t,n,r){var i=Le(r?function(e,t,i){return n(r(e),t,i)}:n);return e.then((function(e){if(e)return e.start((function(){var n=function(){return e.continue()};t&&!t(e,(function(e){return n=e}),(function(t){e.stop(t),n=Y}),(function(t){e.fail(t),n=Y}))||i(e.value,e,(function(e){return n=e})),n()}))}))}O=Symbol();var St=(Tt.prototype.execute=function(e){if(void 0!==this.add){var t=this.add;if(o(t))return r(r([],o(e)?e:[],!0),t,!0).sort();if("number"==typeof t)return(Number(e)||0)+t;if("bigint"==typeof t)try{return BigInt(e)+t}catch(e){return BigInt(0)+t}throw new TypeError("Invalid term ".concat(t))}if(void 0!==this.remove){var n=this.remove;if(o(n))return o(e)?e.filter((function(e){return!n.includes(e)})).sort():[];if("number"==typeof n)return Number(e)-n;if("bigint"==typeof n)try{return BigInt(e)-n}catch(e){return BigInt(0)-n}throw new TypeError("Invalid subtrahend ".concat(n))}return(t=null===(t=this.replacePrefix)||void 0===t?void 0:t[0])&&"string"==typeof e&&e.startsWith(t)?this.replacePrefix[1]+e.substring(t.length):e},Tt);function Tt(e){Object.assign(this,e)}var xt=(Ot.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,Je.bind(null,n.error)):n.table._trans("readonly",e).then(t)},Ot.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Je.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},Ot.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=st(t.algorithm,e)},Ot.prototype._iterate=function(e,t){return _t(this._ctx,e,t,this._ctx.table.core)},Ot.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&a(n,e),t._ctx=n,t},Ot.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ot.prototype.each=function(e){var t=this._ctx;return this._read((function(n){return _t(t,e,n,t.table.core)}))},Ot.prototype.count=function(e){var t=this;return this._read((function(e){var n=t._ctx,r=n.table.core;if(yt(n,!0))return r.count({trans:e,query:{index:bt(n,r.schema),range:n.range}}).then((function(e){return Math.min(e,n.limit)}));var i=0;return _t(n,(function(){return++i,!1}),e,r).then((function(){return i}))})).then(e)},Ot.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function s(e,t){return t?s(e[n[t]],t-1):e[r]}var o="next"===this._ctx.dir?1:-1;function a(e,t){return(e=s(e,i))<(t=s(t,i))?-o:t<e?o:0}return this.toArray((function(e){return e.sort(a)})).then(t)},Ot.prototype.toArray=function(e){var t=this;return this._read((function(e){var n=t._ctx;if("next"===n.dir&&yt(n,!0)&&0<n.limit){var r=n.valueMapper,i=bt(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then((function(e){return e=e.result,r?e.map(r):e}))}var s=[];return _t(n,(function(e){return s.push(e)}),e,n.table.core).then((function(){return s}))}),e)},Ot.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,yt(t)?vt(t,(function(){var t=e;return function(e,n){return 0===t||(1===t?--t:n((function(){e.advance(t),t=0})),!1)}})):vt(t,(function(){var t=e;return function(){return--t<0}}))),this},Ot.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),vt(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),0<=t}}),!0),this},Ot.prototype.until=function(e,t){return gt(this._ctx,(function(n,r,i){return!e(n.value)||(r(i),t)})),this},Ot.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},Ot.prototype.last=function(e){return this.reverse().first(e)},Ot.prototype.filter=function(e){var t;return gt(this._ctx,(function(t){return e(t.value)})),(t=this._ctx).isMatch=st(t.isMatch,e),this},Ot.prototype.and=function(e){return this.filter(e)},Ot.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},Ot.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ot.prototype.desc=function(){return this.reverse()},Ot.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))},Ot.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},Ot.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))},Ot.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)},Ot.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&yt(t,!0)&&0<t.limit)return this._read((function(e){var n=bt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)},Ot.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},Ot.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},Ot.prototype.lastKey=function(e){return this.reverse().firstKey(e)},Ot.prototype.distinct=function(){var e;if(!(e=(e=this._ctx).index&&e.table.schema.idxByName[e.index])||!e.multi)return this;var t={};return gt(this._ctx,(function(e){var n=e.primaryKey.toString();return e=l(t,n),t[n]=!0,!e})),this},Ot.prototype.modify=function(e){var t=this,n=this._ctx;return this._write((function(r){var i,o,a;function u(e,t){var n=t.failures;t=t.numFailures,p+=e-t;for(var r=0,i=s(n);r<i.length;r++){var o=i[r];m.push(n[o])}}a="function"==typeof e?e:(i=s(e),o=i.length,function(t){for(var n=!1,r=0;r<o;++r){var s=i[r],a=e[s],u=_(t,s);a instanceof St?(k(t,s,a.execute(u)),n=!0):u!==a&&(k(t,s,a),n=!0)}return n});var c=n.table.core,l=c.schema.primaryKey,d=l.outbound,h=l.extractKey,f=t.db._options.modifyChunkSize||200,m=[],p=0,y=[];return t.clone().primaryKeys().then((function(t){var i=yt(n)&&n.limit===1/0&&("function"!=typeof e||e===Et)&&{index:n.index,range:n.range};return function n(s){var o=Math.min(f,t.length-s);return c.getMany({trans:r,keys:t.slice(s,s+o),cache:"immutable"}).then((function(l){for(var m=[],p=[],y=d?[]:null,g=[],v=0;v<o;++v){var b=l[v],w={value:I(b),primKey:t[s+v]};!1!==a.call(w,w.value,w)&&(null==w.value?g.push(t[s+v]):d||0===ct(h(b),h(w.value))?(p.push(w.value),d&&y.push(t[s+v])):(g.push(t[s+v]),m.push(w.value)))}return Promise.resolve(0<m.length&&c.mutate({trans:r,type:"add",values:m}).then((function(e){for(var t in e.failures)g.splice(parseInt(t),1);u(m.length,e)}))).then((function(){return(0<p.length||i&&"object"==typeof e)&&c.mutate({trans:r,type:"put",keys:y,values:p,criteria:i,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:0<s}).then((function(e){return u(p.length,e)}))})).then((function(){return(0<g.length||i&&e===Et)&&c.mutate({trans:r,type:"delete",keys:g,criteria:i,isAdditionalChunk:0<s}).then((function(e){return u(g.length,e)}))})).then((function(){return t.length>s+o&&n(s+f)}))}))}(0).then((function(){if(0<m.length)throw new K("Error modifying one or more objects",m,p,y);return t.length}))}))}))},Ot.prototype.delete=function(){var e=this._ctx,t=e.range;return yt(e)&&(e.isPrimKey||3===t.type)?this._write((function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then((function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then((function(e){var n=e.failures;if(e.lastResult,e.results,e=e.numFailures)throw new K("Could not delete some values",Object.keys(n).map((function(e){return n[e]})),t-e);return t-e}))}))})):this.modify(Et)},Ot);function Ot(){}var Et=function(e,t){return t.value=null};function Ct(e,t){return e<t?-1:e===t?0:1}function It(e,t){return t<e?-1:e===t?0:1}function Nt(e,t,n){return(e=e instanceof Pt?new e.Collection(e):e)._ctx.error=new(n||TypeError)(t),e}function Mt(e){return new e.Collection(e,(function(){return Lt("")})).limit(0)}function Dt(e,t,n,r){var i,s,o,a,u,c,l,d=n.length;if(!n.every((function(e){return"string"==typeof e})))return Nt(e,et);function h(e){i="next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()},s="next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()},o="next"===e?Ct:It;var t=n.map((function(e){return{lower:s(e),upper:i(e)}})).sort((function(e,t){return o(e.lower,t.lower)}));a=t.map((function(e){return e.upper})),u=t.map((function(e){return e.lower})),l="next"===(c=e)?"":r}h("next"),(e=new e.Collection(e,(function(){return At(a[0],u[d-1]+r)})))._ondirectionchange=function(e){h(e)};var f=0;return e._addAlgorithm((function(e,n,r){var i=e.key;if("string"!=typeof i)return!1;var h=s(i);if(t(h,u,f))return!0;for(var m=null,p=f;p<d;++p){var y=function(e,t,n,r,i,s){for(var o=Math.min(e.length,r.length),a=-1,u=0;u<o;++u){var c=t[u];if(c!==r[u])return i(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):i(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):0<=a?e.substr(0,a)+t[a]+n.substr(a+1):null;i(e[u],c)<0&&(a=u)}return o<r.length&&"next"===s?e+n.substr(e.length):o<e.length&&"prev"===s?e.substr(0,n.length):a<0?null:e.substr(0,a)+r[a]+n.substr(a+1)}(i,h,a[p],u[p],o,c);null===y&&null===m?f=p+1:(null===m||0<o(m,y))&&(m=y)}return n(null!==m?function(){e.continue(m+l)}:r),!1})),e}function At(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Lt(e){return{type:1,lower:e,upper:e}}var Pt=(Object.defineProperty(qt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),qt.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Mt(this):new this.Collection(this,(function(){return At(e,t,!n,!r)}))}catch(e){return Nt(this,Xe)}},qt.prototype.equals=function(e){return null==e?Nt(this,Xe):new this.Collection(this,(function(){return Lt(e)}))},qt.prototype.above=function(e){return null==e?Nt(this,Xe):new this.Collection(this,(function(){return At(e,void 0,!0)}))},qt.prototype.aboveOrEqual=function(e){return null==e?Nt(this,Xe):new this.Collection(this,(function(){return At(e,void 0,!1)}))},qt.prototype.below=function(e){return null==e?Nt(this,Xe):new this.Collection(this,(function(){return At(void 0,e,!1,!0)}))},qt.prototype.belowOrEqual=function(e){return null==e?Nt(this,Xe):new this.Collection(this,(function(){return At(void 0,e)}))},qt.prototype.startsWith=function(e){return"string"!=typeof e?Nt(this,et):this.between(e,e+Qe,!0,!0)},qt.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):Dt(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],Qe)},qt.prototype.equalsIgnoreCase=function(e){return Dt(this,(function(e,t){return e===t[0]}),[e],"")},qt.prototype.anyOfIgnoreCase=function(){var e=q.apply(P,arguments);return 0===e.length?Mt(this):Dt(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},qt.prototype.startsWithAnyOfIgnoreCase=function(){var e=q.apply(P,arguments);return 0===e.length?Mt(this):Dt(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,Qe)},qt.prototype.anyOf=function(){var e=this,t=q.apply(P,arguments),n=this._cmp;try{t.sort(n)}catch(r){return Nt(this,Xe)}if(0===t.length)return Mt(this);var r=new this.Collection(this,(function(){return At(t[0],t[t.length-1])}));r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm((function(e,r,s){for(var o=e.key;0<n(o,t[i]);)if(++i===t.length)return r(s),!1;return 0===n(o,t[i])||(r((function(){e.continue(t[i])})),!1)})),r},qt.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},qt.prototype.noneOf=function(){var e=q.apply(P,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Nt(this,Xe)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},qt.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,i=this._ascending,s=this._descending,o=this._min,a=this._max;if(0===e.length)return Mt(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0})))return Nt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",z.InvalidArgument);var u,c=!t||!1!==t.includeLowers,l=t&&!0===t.includeUppers,d=i;function h(e,t){return d(e[0],t[0])}try{(u=e.reduce((function(e,t){for(var n=0,i=e.length;n<i;++n){var s=e[n];if(r(t[0],s[1])<0&&0<r(t[1],s[0])){s[0]=o(s[0],t[0]),s[1]=a(s[1],t[1]);break}}return n===i&&e.push(t),e}),[])).sort(h)}catch(e){return Nt(this,Xe)}var f=0,m=l?function(e){return 0<i(e,u[f][1])}:function(e){return 0<=i(e,u[f][1])},p=c?function(e){return 0<s(e,u[f][0])}:function(e){return 0<=s(e,u[f][0])},y=m;return(e=new this.Collection(this,(function(){return At(u[0][0],u[u.length-1][1],!c,!l)})))._ondirectionchange=function(e){d="next"===e?(y=m,i):(y=p,s),u.sort(h)},e._addAlgorithm((function(e,t,r){for(var s,o=e.key;y(o);)if(++f===u.length)return t(r),!1;return!m(s=o)&&!p(s)||(0===n._cmp(o,u[f][1])||0===n._cmp(o,u[f][0])||t((function(){d===i?e.continue(u[f][0]):e.continue(u[f][1])})),!1)})),e},qt.prototype.startsWithAnyOf=function(){var e=q.apply(P,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?Mt(this):this.inAnyRange(e.map((function(e){return[e,e+Qe]}))):Nt(this,"startsWithAnyOf() only works with strings")},qt);function qt(){}function Ft(e){return Le((function(t){return jt(t),e(t.target.error),!1}))}function jt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Rt="storagemutated",Vt="x-storagemutated-1",$t=mt(null,Rt),Kt=(Bt.prototype._lock=function(){return b(!ve.global),++this._reculock,1!==this._reculock||ve.global||(ve.lockOwnerFor=this),this},Bt.prototype._unlock=function(){if(b(!ve.global),0==--this._reculock)for(ve.global||(ve.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{He(e[1],e[0])}catch(e){}}return this},Bt.prototype._locked=function(){return this._reculock&&ve.lockOwnerFor!==this},Bt.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(b(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new z.DatabaseClosed(r);case"MissingAPIError":throw new z.MissingAPI(r.message,r);default:throw new z.OpenFailed(r)}if(!this.active)throw new z.TransactionInactive;return b(null===this._completion._state),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Le((function(n){jt(n),t._reject(e.error)})),e.onabort=Le((function(n){jt(n),t.active&&t._reject(new z.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=Le((function(){t.active=!1,t._resolve(),"mutatedParts"in e&&$t.storagemutated.fire(e.mutatedParts)})),this},Bt.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return Je(new z.ReadOnly("Transaction is readonly"));if(!this.active)return Je(new z.TransactionInactive);if(this._locked())return new ke((function(i,s){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,s)},ve])}));if(n)return $e((function(){var e=new ke((function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var i=new ke((function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return i._lib=!0,i},Bt.prototype._root=function(){return this.parent?this.parent._root():this},Bt.prototype.waitFor=function(e){var t,n=this._root(),r=ke.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then((function(){return r})):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function e(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=e)}());var i=n._waitingFor;return new ke((function(e,t){r.then((function(t){return n._waitingQueue.push(Le(e.bind(null,t)))}),(function(e){return n._waitingQueue.push(Le(t.bind(null,e)))})).finally((function(){n._waitingFor===i&&(n._waitingFor=null)}))}))},Bt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new z.Abort))},Bt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(l(t,e))return t[e];var n=this.schema[e];if(!n)throw new z.NotFound("Table "+e+" not part of transaction");return(n=new this.db.Table(e,n,this)).core=this.db.core.table(e),t[e]=n},Bt);function Bt(){}function Wt(e,t,n,r,i,s,o){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:s,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+Ut(t)}}function Ut(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function zt(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(r=function(e){return[e.name,e]},n.reduce((function(e,t,n){return(n=r(t))&&(e[n[0]]=n[1]),e}),{}))};var r}var Zt=function(e){try{return e.only([[]]),Zt=function(){return[[]]},[[]]}catch(e){return Zt=function(){return Qe},Qe}};function Ht(e){return null==e?function(){}:"string"==typeof e?1===(t=e).split(".").length?function(e){return e[t]}:function(e){return _(e,t)}:function(t){return _(t,e)};var t}function Yt(e){return[].slice.call(e)}var Gt=0;function Jt(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function Qt(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,r=e.upper,i=e.lowerOpen;return e=e.upperOpen,void 0===n?void 0===r?null:t.upperBound(r,!!e):void 0===r?t.lowerBound(n,!!i):t.bound(n,r,!!i,!!e)}var i,s,a,u=(s=n,a=Yt((i=e).objectStoreNames),{schema:{name:i.name,tables:a.map((function(e){return s.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement,r=o(t),i={};return n={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==t,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:Ht(t)},indexes:Yt(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,r=e.multiEntry;return e=e.keyPath,r={name:t,compound:o(e),keyPath:e,unique:n,multiEntry:r,extractKey:Ht(e)},i[Jt(e)]=r})),getIndexByKeyPath:function(e){return i[Jt(e)]}},i[":id"]=n.primaryKey,null!=t&&(i[Jt(t)]=n.primaryKey),n}))},hasGetAll:0<a.length&&"getAll"in s.objectStore(a[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),c=(n=u.schema,u.hasGetAll),l=(u=n.tables.map((function(e){var t,n=e.name;return{name:n,schema:e,mutate:function(e){var t=e.trans,i=e.type,s=e.keys,o=e.values,a=e.range;return new Promise((function(e,u){e=Le(e);var c=t.objectStore(n),l=null==c.keyPath,d="put"===i||"add"===i;if(!d&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);var h,f=(s||o||{length:1}).length;if(s&&o&&s.length!==o.length)throw new Error("Given keys array must have same length as given values array.");if(0===f)return e({numFailures:0,failures:{},results:[],lastResult:void 0});function m(e){++g,jt(e)}var p=[],y=[],g=0;if("deleteRange"===i){if(4===a.type)return e({numFailures:g,failures:y,results:[],lastResult:void 0});3===a.type?p.push(h=c.clear()):p.push(h=c.delete(r(a)))}else{var v=(l=d?l?[o,s]:[o,null]:[s,null])[0],b=l[1];if(d)for(var w=0;w<f;++w)p.push(h=b&&void 0!==b[w]?c[i](v[w],b[w]):c[i](v[w])),h.onerror=m;else for(w=0;w<f;++w)p.push(h=c[i](v[w])),h.onerror=m}function _(t){t=t.target.result,p.forEach((function(e,t){return null!=e.error&&(y[t]=e.error)})),e({numFailures:g,failures:y,results:"delete"===i?s:p.map((function(e){return e.result})),lastResult:t})}h.onerror=function(e){m(e),_(e)},h.onsuccess=_}))},getMany:function(e){var t=e.trans,r=e.keys;return new Promise((function(e,i){e=Le(e);for(var s,o=t.objectStore(n),a=r.length,u=new Array(a),c=0,l=0,d=function(t){t=t.target,u[t._pos]=t.result,++l===c&&e(u)},h=Ft(i),f=0;f<a;++f)null!=r[f]&&((s=o.get(r[f]))._pos=f,s.onsuccess=d,s.onerror=h,++c);0===c&&e(u)}))},get:function(e){var t=e.trans,r=e.key;return new Promise((function(e,i){e=Le(e);var s=t.objectStore(n).get(r);s.onsuccess=function(t){return e(t.target.result)},s.onerror=Ft(i)}))},query:(t=c,function(e){return new Promise((function(i,s){i=Le(i);var o,a,u,c=e.trans,l=e.values,d=e.limit,h=e.query,f=d===1/0?void 0:d,m=h.index;if(h=h.range,c=c.objectStore(n),m=m.isPrimaryKey?c:c.index(m.name),h=r(h),0===d)return i({result:[]});t?((f=l?m.getAll(h,f):m.getAllKeys(h,f)).onsuccess=function(e){return i({result:e.target.result})},f.onerror=Ft(s)):(o=0,a=!l&&"openKeyCursor"in m?m.openKeyCursor(h):m.openCursor(h),u=[],a.onsuccess=function(e){var t=a.result;return t?(u.push(l?t.value:t.primaryKey),++o===d?i({result:u}):void t.continue()):i({result:u})},a.onerror=Ft(s))}))}),openCursor:function(e){var t=e.trans,i=e.values,s=e.query,o=e.reverse,a=e.unique;return new Promise((function(e,u){e=Le(e);var c=s.index,l=s.range,d=t.objectStore(n),h=(d=c.isPrimaryKey?d:d.index(c.name),c=o?a?"prevunique":"prev":a?"nextunique":"next",!i&&"openKeyCursor"in d?d.openKeyCursor(r(l),c):d.openCursor(r(l),c));h.onerror=Ft(u),h.onsuccess=Le((function(n){var r,i,s,o,a=h.result;a?(a.___id=++Gt,a.done=!1,r=a.continue.bind(a),i=(i=a.continuePrimaryKey)&&i.bind(a),s=a.advance.bind(a),o=function(){throw new Error("Cursor not stopped")},a.trans=t,a.stop=a.continue=a.continuePrimaryKey=a.advance=function(){throw new Error("Cursor not started")},a.fail=Le(u),a.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},a.start=function(e){function t(){if(h.result)try{e()}catch(e){a.fail(e)}else a.done=!0,a.start=function(){throw new Error("Cursor behind last entry")},a.stop()}var n=new Promise((function(e,t){e=Le(e),h.onerror=Ft(t),a.fail=t,a.stop=function(t){a.stop=a.continue=a.continuePrimaryKey=a.advance=o,e(t)}}));return h.onsuccess=Le((function(e){h.onsuccess=t,t()})),a.continue=r,a.continuePrimaryKey=i,a.advance=s,t(),n},e(a)):e(null)}),u)}))},count:function(e){var t=e.query,i=e.trans,s=t.index,o=t.range;return new Promise((function(e,t){var a=i.objectStore(n),u=s.isPrimaryKey?a:a.index(s.name);(u=(a=r(o))?u.count(a):u.count()).onsuccess=Le((function(t){return e(t.target.result)})),u.onerror=Ft(t)}))}}})),{});return u.forEach((function(e){return l[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!l[e])throw new Error("Table '".concat(e,"' not found"));return l[e]},MIN_KEY:-1/0,MAX_KEY:Zt(t),schema:n}}function Xt(e,n){var r=n.db;n=function(e,n,r,i){var s=r.IDBKeyRange;return r.indexedDB,{dbcore:(i=Qt(n,s,i),e.dbcore.reduce((function(e,n){return n=n.create,t(t({},e),n(e))}),i))}}(e._middlewares,r,e._deps,n),e.core=n.dbcore,e.tables.forEach((function(t){var n=t.name;e.core.schema.tables.some((function(e){return e.name===n}))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function en(e,t,n,r){n.forEach((function(n){var i=r[n];t.forEach((function(t){var r=function e(t,n){return p(t,n)||(t=u(t))&&e(t,n)}(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?f(t,n,{get:function(){return this.table(n)},set:function(e){h(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,i))}))}))}function tn(e,t){t.forEach((function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]}))}function nn(e,t){return e._cfg.version-t._cfg.version}function rn(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],s=t[n];if(i){var o={name:n,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto)o.recreate=!0,r.change.push(o);else{var a=i.idxByName,u=s.idxByName,c=void 0;for(c in a)u[c]||o.del.push(c);for(c in u){var l=a[c],d=u[c];l?l.src!==d.src&&o.change.push(d):o.add.push(d)}(0<o.del.length||0<o.add.length||0<o.change.length)&&r.change.push(o)}}else r.add.push([n,s])}return r}function sn(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){return an(i,e)})),i}function on(e,t){s(e).forEach((function(n){t.db.objectStoreNames.contains(n)||(ie&&console.debug("Dexie: Creating missing table",n),sn(t,n,e[n].primKey,e[n].indexes))}))}function an(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function un(e,t,n){var r={};return g(t.objectStoreNames,0).forEach((function(e){for(var t=n.objectStore(e),i=Wt(Ut(a=t.keyPath),a||"",!0,!1,!!t.autoIncrement,a&&"string"!=typeof a,!0),s=[],o=0;o<t.indexNames.length;++o){var a=(u=t.index(t.indexNames[o])).keyPath,u=Wt(u.name,a,!!u.unique,!!u.multiEntry,!1,a&&"string"!=typeof a,!1);s.push(u)}r[e]=zt(e,i,s)})),r}function cn(e,t,n){for(var r=n.db.objectStoreNames,s=0;s<r.length;++s){var o=r[s],a=n.objectStore(o);e._hasGetAll="getAll"in a;for(var u=0;u<a.indexNames.length;++u){var c=a.indexNames[u],l=a.index(c).keyPath,d="string"==typeof l?l:"["+g(l).join("+")+"]";!t[o]||(l=t[o].idxByName[d])&&(l.name=c,delete t[o].idxByName[d],t[o].idxByName[c]=l)}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function ln(e){return e.split(",").map((function(e,t){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return Wt(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),o(r),0===t)}))}var dn=(hn.prototype._parseStoresSpec=function(e,t){s(e).forEach((function(n){if(null!==e[n]){var r=ln(e[n]),i=r.shift();if(i.unique=!0,i.multi)throw new z.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new z.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new z.Schema("Index must have a name and cannot be an empty string")})),t[n]=zt(n,i,r)}}))},hn.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?a(this._cfg.storesSource,e):e,e=t._versions;var n={},r={};return e.forEach((function(e){a(n,e._cfg.storesSource),r=e._cfg.dbschema={},e._parseStoresSpec(n,r)})),t._dbSchema=r,tn(t,[t._allTables,t,t.Transaction.prototype]),en(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],s(r),r),t._storeNames=s(r),this},hn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=re(this._cfg.contentUpgrade||Y,e),this},hn);function hn(){}function fn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Gn(nt,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function mn(e){return e&&"function"==typeof e.databases}function pn(e){return $e((function(){return ve.letThrough=!0,e()}))}function yn(e){return!("from"in e)}var gn=function(e,t){if(!this){var n=new gn;return e&&"d"in e&&a(n,e),n}a(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function vn(e,t,n){var r=ct(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(yn(e))return a(e,{from:t,to:n,d:1});var i=e.l;if(r=e.r,ct(n,e.from)<0)return i?vn(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},kn(e);if(0<ct(t,e.to))return r?vn(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},kn(e);ct(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),0<ct(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,i&&!e.l&&bn(e,i),r&&n&&bn(e,r)}}function bn(e,t){yn(t)||function e(t,n){var r=n.from,i=n.to,s=n.l;n=n.r,vn(t,r,i),s&&e(t,s),n&&e(t,n)}(e,t)}function wn(e,t){var n=_n(t),r=n.next();if(r.done)return!1;for(var i=r.value,s=_n(e),o=s.next(i.from),a=o.value;!r.done&&!o.done;){if(ct(a.from,i.to)<=0&&0<=ct(a.to,i.from))return!0;ct(i.from,a.from)<0?i=(r=n.next(a.from)).value:a=(o=s.next(i.from)).value}return!1}function _n(e){var t=yn(e)?null:{s:0,n:e};return{next:function(e){for(var n=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&ct(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||ct(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function kn(e){var n,r,i=((null===(n=e.r)||void 0===n?void 0:n.d)||0)-((null===(r=e.l)||void 0===r?void 0:r.d)||0),s=1<i?"r":i<-1?"l":"";s&&(n="r"==s?"l":"r",r=t({},e),i=e[s],e.from=i.from,e.to=i.to,e[s]=i[s],r[s]=i[n],(e[n]=r).d=Sn(r)),e.d=Sn(e)}function Sn(e){var t=e.r;return e=e.l,(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}function Tn(e,t){return s(t).forEach((function(n){e[n]?bn(e[n],t[n]):e[n]=function e(t){var n,r,i={};for(n in t)l(t,n)&&(r=t[n],i[n]=!r||"object"!=typeof r||E.has(r.constructor)?r:e(r));return i}(t[n])})),e}function xn(e,t){return e.all||t.all||Object.keys(e).some((function(n){return t[n]&&wn(t[n],e[n])}))}d(gn.prototype,((j={add:function(e){return bn(this,e),this},addKey:function(e){return vn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach((function(e){return vn(t,e,e)})),this},hasKey:function(e){var t=_n(this).next(e).value;return t&&ct(t.from,e)<=0&&0<=ct(t.to,e)}})[D]=function(){return _n(this)},j));var On={},En={},Cn=!1;function In(e){Tn(En,e),Cn||(Cn=!0,setTimeout((function(){Cn=!1,Nn(En,!(En={}))}),0))}function Nn(e,t){void 0===t&&(t=!1);var n=new Set;if(e.all)for(var r=0,i=Object.values(On);r<i.length;r++)Mn(o=i[r],e,n,t);else for(var s in e){var o,a=/^idb\:\/\/(.*)\/(.*)\//.exec(s);a&&(s=a[1],a=a[2],(o=On["idb://".concat(s,"/").concat(a)])&&Mn(o,e,n,t))}n.forEach((function(e){return e()}))}function Mn(e,t,n,r){for(var i=[],s=0,o=Object.entries(e.queries.query);s<o.length;s++){for(var a=o[s],u=a[0],c=[],l=0,d=a[1];l<d.length;l++){var h=d[l];xn(t,h.obsSet)?h.subscribers.forEach((function(e){return n.add(e)})):r&&c.push(h)}r&&i.push([u,c])}if(r)for(var f=0,m=i;f<m.length;f++){var p=m[f];u=p[0],c=p[1],e.queries.query[u]=c}}function Dn(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?Je(t.dbOpenError):e}));t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,i=Math.round(10*e.verno),o=!1;function a(){if(t.openCanceller!==r)throw new z.DatabaseClosed("db.open() was cancelled")}var u,c=t.dbReadyResolve,l=null,d=!1;return ke.race([r,("undefined"==typeof navigator?ke.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(e){function t(){return indexedDB.databases().finally(e)}u=setInterval(t,100),t()})).finally((function(){return clearInterval(u)})):Promise.resolve()).then((function r(){return new ke((function(u,c){if(a(),!n)throw new z.MissingAPI;var h=e.name,f=t.autoSchema||!i?n.open(h):n.open(h,i);if(!f)throw new z.MissingAPI;f.onerror=Ft(c),f.onblocked=Le(e._fireOnBlocked),f.onupgradeneeded=Le((function(r){var i;l=f.transaction,t.autoSchema&&!e._options.allowEmptyDB?(f.onerror=jt,l.abort(),f.result.close(),(i=n.deleteDatabase(h)).onsuccess=i.onerror=Le((function(){c(new z.NoSuchDatabase("Database ".concat(h," doesnt exist")))}))):(l.onerror=Ft(c),r=r.oldVersion>Math.pow(2,62)?0:r.oldVersion,d=r<1,e.idbdb=f.result,o&&function(e,t){on(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=un(0,e.idbdb,t);cn(e,e._dbSchema,t);for(var r=0,i=rn(n,e._dbSchema).change;r<i.length;r++){var s=function(e){if(e.change.length||e.recreate)return console.warn("Unable to patch indexes of table ".concat(e.name," because it has changes on the type of index or primary key.")),{value:void 0};var n=t.objectStore(e.name);e.add.forEach((function(t){ie&&console.debug("Dexie upgrade patch: Creating missing index ".concat(e.name,".").concat(t.src)),an(n,t)}))}(i[r]);if("object"==typeof s)return s.value}}(e,l),function(e,t,n,r){var i=e._dbSchema;n.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=zt("$meta",ln("")[0],[]),e._storeNames.push("$meta"));var o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);var a=o._reject.bind(o),u=ve.transless||ve;$e((function(){return ve.trans=o,ve.transless=u,0!==t?(Xt(e,n),c=t,((r=o).storeNames.includes("$meta")?r.table("$meta").get("version").then((function(e){return null!=e?e:c})):ke.resolve(c)).then((function(t){return i=t,a=o,u=n,c=[],t=(r=e)._versions,l=r._dbSchema=un(0,r.idbdb,u),0!==(t=t.filter((function(e){return e._cfg.version>=i}))).length?(t.forEach((function(e){c.push((function(){var t=l,n=e._cfg.dbschema;cn(r,t,u),cn(r,n,u),l=r._dbSchema=n;var o=rn(t,n);o.add.forEach((function(e){sn(u,e[0],e[1].primKey,e[1].indexes)})),o.change.forEach((function(e){if(e.recreate)throw new z.Upgrade("Not yet support for changing primary key");var t=u.objectStore(e.name);e.add.forEach((function(e){return an(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),an(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var c=e._cfg.contentUpgrade;if(c&&e._cfg.version>i){Xt(r,u),a._memoizedTables={};var d=S(n);o.del.forEach((function(e){d[e]=t[e]})),tn(r,[r.Transaction.prototype]),en(r,[r.Transaction.prototype],s(d),d),a.schema=d;var h,f=F(c);return f&&Ke(),o=ke.follow((function(){var e;(h=c(a))&&f&&(e=Be.bind(null,null),h.then(e,e))})),h&&"function"==typeof h.then?ke.resolve(h):o.then((function(){return h}))}})),c.push((function(t){var n,i,s=e._cfg.dbschema;n=s,i=t,[].slice.call(i.db.objectStoreNames).forEach((function(e){return null==n[e]&&i.db.deleteObjectStore(e)})),tn(r,[r.Transaction.prototype]),en(r,[r.Transaction.prototype],r._storeNames,r._dbSchema),a.schema=r._dbSchema})),c.push((function(t){r.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(r.idbdb.version/10)===e._cfg.version?(r.idbdb.deleteObjectStore("$meta"),delete r._dbSchema.$meta,r._storeNames=r._storeNames.filter((function(e){return"$meta"!==e}))):t.objectStore("$meta").put(e._cfg.version,"version"))}))})),function e(){return c.length?ke.resolve(c.shift()(a.idbtrans)).then(e):ke.resolve()}().then((function(){on(l,u)}))):ke.resolve();var r,i,a,u,c,l})).catch(a)):(s(i).forEach((function(e){sn(n,e,i[e].primKey,i[e].indexes)})),Xt(e,n),void ke.follow((function(){return e.on.populate.fire(o)})).catch(a));var r,c}))}(e,r/10,l,c))}),c),f.onsuccess=Le((function(){l=null;var n,a,c,m,p,y=e.idbdb=f.result,v=g(y.objectStoreNames);if(0<v.length)try{var b=y.transaction(1===(m=v).length?m[0]:m,"readonly");if(t.autoSchema)a=y,c=b,(n=e).verno=a.version/10,c=n._dbSchema=un(0,a,c),n._storeNames=g(a.objectStoreNames,0),en(n,[n._allTables],s(c),c);else if(cn(e,e._dbSchema,b),((p=rn(un(0,(p=e).idbdb,b),p._dbSchema)).add.length||p.change.some((function(e){return e.add.length||e.change.length})))&&!o)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),y.close(),i=y.version+1,o=!0,u(r());Xt(e,b)}catch(n){}tt.push(e),y.onversionchange=Le((function(n){t.vcFired=!0,e.on("versionchange").fire(n)})),y.onclose=Le((function(t){e.on("close").fire(t)})),d&&(p=e._deps,b=h,y=p.indexedDB,p=p.IDBKeyRange,mn(y)||b===nt||fn(y,p).put({name:b}).catch(Y)),u()}),c)})).catch((function(e){switch(null==e?void 0:e.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),r();break;case"VersionError":if(0<i)return i=0,r()}return ke.reject(e)}))}))]).then((function(){return a(),t.onReadyBeingFired=[],ke.resolve(pn((function(){return e.on.ready.fire(e.vip)}))).then((function n(){if(0<t.onReadyBeingFired.length){var r=t.onReadyBeingFired.reduce(re,Y);return t.onReadyBeingFired=[],ke.resolve(pn((function(){return r(e.vip)}))).then(n)}}))})).finally((function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)})).catch((function(n){t.dbOpenError=n;try{l&&l.abort()}catch(n){}return r===t.openCanceller&&e._close(),Je(n)})).finally((function(){t.openComplete=!0,c()})).then((function(){var t;return d&&(t={},e.tables.forEach((function(n){n.schema.indexes.forEach((function(r){r.name&&(t["idb://".concat(e.name,"/").concat(n.name,"/").concat(r.name)]=new gn(-1/0,[[[]]]))})),t["idb://".concat(e.name,"/").concat(n.name,"/")]=t["idb://".concat(e.name,"/").concat(n.name,"/:dels")]=new gn(-1/0,[[[]]])})),$t(Rt).fire(t),Nn(t,!0)),e}))}function An(e){function t(t){return e.next(t)}var n=i(t),r=i((function(t){return e.throw(t)}));function i(e){return function(t){var i=e(t);return t=i.value,i.done?t:t&&"function"==typeof t.then?t.then(n,r):o(t)?Promise.all(t).then(n,r):n(t)}}return i(t)()}function Ln(e,t,n){for(var r=o(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var Pn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return t(t({},e),{table:function(n){var r=e.table(n),i=r.schema,s={},o=[];function a(e,n,r){var i=Jt(e),u=s[i]=s[i]||[],c=null==e?0:"string"==typeof e?1:e.length,l=0<n;return l=t(t({},r),{name:l?"".concat(i,"(virtual-from:").concat(r.name,")"):r.name,lowLevelIndex:r,isVirtual:l,keyTail:n,keyLength:c,extractKey:Ht(e),unique:!l&&r.unique}),u.push(l),l.isPrimaryKey||o.push(l),1<c&&a(2===c?e[0]:e.slice(0,c-1),n+1,r),u.sort((function(e,t){return e.keyTail-t.keyTail})),l}n=a(i.primaryKey.keyPath,0,i.primaryKey),s[":id"]=[n];for(var u=0,c=i.indexes;u<c.length;u++){var l=c[u];a(l.keyPath,0,l)}function d(n){var r,i=n.query.index;return i.isVirtual?t(t({},n),{query:{index:i.lowLevelIndex,range:(r=n.query.range,i=i.keyTail,{type:1===r.type?2:r.type,lower:Ln(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,i),lowerOpen:!0,upper:Ln(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,i),upperOpen:!0})}}):n}return t(t({},r),{schema:t(t({},i),{primaryKey:n,indexes:o,getIndexByKeyPath:function(e){return(e=s[Jt(e)])&&e[0]}}),count:function(e){return r.count(d(e))},query:function(e){return r.query(d(e))},openCursor:function(t){var n=t.query.index,i=n.keyTail,s=n.isVirtual,o=n.keyLength;return s?r.openCursor(d(t)).then((function(n){return n&&function(n){return Object.create(n,{continue:{value:function(r){null!=r?n.continue(Ln(r,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?n.continue(n.key.slice(0,o).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(Ln(t,e.MAX_KEY,i),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return 1===o?e[0]:e.slice(0,o)}},value:{get:function(){return n.value}}})}(n)})):r.openCursor(t)}})}})}};function qn(e,t,n,r){return n=n||{},r=r||"",s(e).forEach((function(i){var s,o,a;l(t,i)?(s=e[i],o=t[i],"object"==typeof s&&"object"==typeof o&&s&&o?(a=M(s))!==M(o)?n[r+i]=t[i]:"Object"===a?qn(s,o,n,r+i+"."):s!==o&&(n[r+i]=t[i]):s!==o&&(n[r+i]=t[i])):n[r+i]=void 0})),s(t).forEach((function(i){l(e,i)||(n[r+i]=t[i])})),n}function Fn(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var jn={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return t(t({},e),{table:function(n){var i=e.table(n),s=i.schema.primaryKey;return t(t({},i),{mutate:function(e){var o=ve.trans,a=o.table(n).hook,u=a.deleting,c=a.creating,d=a.updating;switch(e.type){case"add":if(c.fire===Y)break;return o._promise("readwrite",(function(){return h(e)}),!0);case"put":if(c.fire===Y&&d.fire===Y)break;return o._promise("readwrite",(function(){return h(e)}),!0);case"delete":if(u.fire===Y)break;return o._promise("readwrite",(function(){return h(e)}),!0);case"deleteRange":if(u.fire===Y)break;return o._promise("readwrite",(function(){return function e(n,r,o){return i.query({trans:n,values:!1,query:{index:s,range:r},limit:o}).then((function(i){var s=i.result;return h({type:"delete",keys:s,trans:n}).then((function(i){return 0<i.numFailures?Promise.reject(i.failures[0]):s.length<o?{failures:[],numFailures:0,lastResult:void 0}:e(n,t(t({},r),{lower:s[s.length-1],lowerOpen:!0}),o)}))}))}(e.trans,e.range,1e4)}),!0)}return i.mutate(e);function h(e){var n,o,a,h=ve.trans,f=e.keys||Fn(s,e);if(!f)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?t(t({},e),{keys:f}):t({},e)).type&&(e.values=r([],e.values,!0)),e.keys&&(e.keys=r([],e.keys,!0)),n=i,a=f,("add"===(o=e).type?Promise.resolve([]):n.getMany({trans:o.trans,keys:a,cache:"immutable"})).then((function(t){var n=f.map((function(n,r){var i,o,a,f=t[r],m={onerror:null,onsuccess:null};return"delete"===e.type?u.fire.call(m,n,f,h):"add"===e.type||void 0===f?(i=c.fire.call(m,n,e.values[r],h),null==n&&null!=i&&(e.keys[r]=n=i,s.outbound||k(e.values[r],s.keyPath,n))):(i=qn(f,e.values[r]),(o=d.fire.call(m,i,n,f,h))&&(a=e.values[r],Object.keys(o).forEach((function(e){l(a,e)?a[e]=o[e]:k(a,e,o[e])})))),m}));return i.mutate(e).then((function(r){for(var i=r.failures,s=r.results,o=r.numFailures,a=(r=r.lastResult,0);a<f.length;++a){var u=(s||f)[a],c=n[a];null==u?c.onerror&&c.onerror(i[a]):c.onsuccess&&c.onsuccess("put"===e.type&&t[a]?e.values[a]:u)}return{failures:i,results:s,numFailures:o,lastResult:r}})).catch((function(e){return n.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))}}})}})}};function Rn(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var r=[],i=0,s=0;i<t.keys.length&&s<e.length;++i)0===ct(t.keys[i],e[s])&&(r.push(n?I(t.values[i]):t.values[i]),++s);return r.length===e.length?r:null}catch(e){return null}}var Vn={stack:"dbcore",level:-1,create:function(e){return{table:function(n){var r=e.table(n);return t(t({},r),{getMany:function(e){if(!e.cache)return r.getMany(e);var t=Rn(e.keys,e.trans._cache,"clone"===e.cache);return t?ke.resolve(t):r.getMany(e).then((function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?I(t):t},t}))},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),r.mutate(e)}})}}}};function $n(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function Kn(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Bn={stack:"dbcore",level:0,name:"Observability",create:function(e){var n=e.schema.name,r=new gn(e.MIN_KEY,e.MAX_KEY);return t(t({},e),{transaction:function(t,n,r){if(ve.subscr&&"readonly"!==n)throw new z.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ve.querier));return e.transaction(t,n,r)},table:function(i){var a=e.table(i),u=a.schema,c=u.primaryKey,l=u.indexes,d=c.extractKey,h=c.outbound,f=c.autoIncrement&&l.filter((function(e){return e.compound&&e.keyPath.includes(c.keyPath)})),m=t(t({},a),{mutate:function(e){function t(e){return e="idb://".concat(n,"/").concat(i,"/").concat(e),m[e]||(m[e]=new gn)}var s,l,d,h=e.trans,m=e.mutatedParts||(e.mutatedParts={}),p=t(""),y=t(":dels"),g=e.type,v="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[Fn(c,e).filter((function(e){return e})),e.values]:[],b=v[0],w=v[1];return v=e.trans._cache,o(b)?(p.addKeys(b),(v="delete"===g||b.length===w.length?Rn(b,v):null)||y.addKeys(b),(v||w)&&(s=t,l=v,d=w,u.indexes.forEach((function(e){var t=s(e.name||"");function n(t){return null!=t?e.extractKey(t):null}function r(n){return e.multiEntry&&o(n)?n.forEach((function(e){return t.addKey(e)})):t.addKey(n)}(l||d).forEach((function(e,t){var i=l&&n(l[t]);0!==ct(i,t=d&&n(d[t]))&&(null!=i&&r(i),null!=t&&r(t))}))})))):b?(w={from:b.lower,to:b.upper},y.add(w),p.add(w)):(p.add(r),y.add(r),u.indexes.forEach((function(e){return t(e.name).add(r)}))),a.mutate(e).then((function(n){return!b||"add"!==e.type&&"put"!==e.type||(p.addKeys(n.results),f&&f.forEach((function(r){var i=e.values.map((function(e){return r.extractKey(e)})),s=r.keyPath.findIndex((function(e){return e===c.keyPath}));n.results.forEach((function(e){return i[s]=e})),t(r.name).addKeys(i)}))),h.mutatedParts=Tn(h.mutatedParts||{},m),n}))}}),p=(l=function(t){t=(n=t.query).index;var n=n.range;return[t,new gn(null!==(t=n.lower)&&void 0!==t?t:e.MIN_KEY,null!==(n=n.upper)&&void 0!==n?n:e.MAX_KEY)]},{get:function(e){return[c,new gn(e.key)]},getMany:function(e){return[c,(new gn).addKeys(e.keys)]},count:l,query:l,openCursor:l});return s(p).forEach((function(e){m[e]=function(s){var o=!!(m=ve.subscr),u=$n(ve,a)&&Kn(e,s)?s.obsSet={}:m;if(o){var c=function(e){return e="idb://".concat(n,"/").concat(i,"/").concat(e),u[e]||(u[e]=new gn)},l=c(""),f=c(":dels"),m=(o=(m=p[e](s))[0],m[1]);if(("query"===e&&o.isPrimaryKey&&!s.values?f:c(o.name||"")).add(m),!o.isPrimaryKey){if("count"!==e){var y="query"===e&&h&&s.values&&a.query(t(t({},s),{values:!1}));return a[e].apply(this,arguments).then((function(t){if("query"===e){if(h&&s.values)return y.then((function(e){return e=e.result,l.addKeys(e),t}));var n=s.values?t.result.map(d):t.result;(s.values?l:f).addKeys(n)}else if("openCursor"===e){var r=t,i=s.values;return r&&Object.create(r,{key:{get:function(){return f.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return f.addKey(e),e}},value:{get:function(){return i&&l.addKey(r.primaryKey),r.value}}})}return t}))}f.add(r)}}return a[e].apply(this,arguments)}})),m}})}};function Wn(e,n,r){if(0===r.numFailures)return n;if("deleteRange"===n.type)return null;var i=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;return r.numFailures===i?null:(n=t({},n),o(n.keys)&&(n.keys=n.keys.filter((function(e,t){return!(t in r.failures)}))),"values"in n&&o(n.values)&&(n.values=n.values.filter((function(e,t){return!(t in r.failures)}))),n)}function Un(e,t){return n=e,(void 0===(r=t).lower||(r.lowerOpen?0<ct(n,r.lower):0<=ct(n,r.lower)))&&(void 0===t.upper||(t.upperOpen?ct(e,t.upper)<0:ct(e,t.upper)<=0));var n,r}function zn(e,t,n,r,i,s){if(!n||0===n.length)return e;var a=t.query.index,u=a.multiEntry,c=t.query.range,l=r.schema.primaryKey.extractKey,d=a.extractKey,h=(a.lowLevelIndex||a).extractKey;return n=n.reduce((function(e,n){var r=e,i=[];if("add"===n.type||"put"===n.type)for(var s=new gn,a=n.values.length-1;0<=a;--a){var h,f=n.values[a],m=l(f);s.hasKey(m)||(h=d(f),(u&&o(h)?h.some((function(e){return Un(e,c)})):Un(h,c))&&(s.addKey(m),i.push(f)))}switch(n.type){case"add":r=e.concat(t.values?i:i.map((function(e){return l(e)})));break;case"put":var p=(new gn).addKeys(n.values.map((function(e){return l(e)})));r=e.filter((function(e){return!p.hasKey(t.values?l(e):e)})).concat(t.values?i:i.map((function(e){return l(e)})));break;case"delete":var y=(new gn).addKeys(n.keys);r=e.filter((function(e){return!y.hasKey(t.values?l(e):e)}));break;case"deleteRange":var g=n.range;r=e.filter((function(e){return!Un(l(e),g)}))}return r}),e),n===e?e:(n.sort((function(e,t){return ct(h(e),h(t))||ct(l(e),l(t))})),t.limit&&t.limit<1/0&&(n.length>t.limit?n.length=t.limit:e.length===t.limit&&n.length<t.limit&&(i.dirty=!0)),s?Object.freeze(n):n)}function Zn(e,t){return 0===ct(e.lower,t.lower)&&0===ct(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}var Hn={stack:"dbcore",level:0,name:"Cache",create:function(e){var n=e.schema.name;return t(t({},e),{transaction:function(t,r,i){var s,o,a=e.transaction(t,r,i);return"readwrite"===r&&(o=(s=new AbortController).signal,i=function(i){return function(){if(s.abort(),"readwrite"===r){for(var o=new Set,u=0,c=t;u<c.length;u++){var l=c[u],d=On["idb://".concat(n,"/").concat(l)];if(d){var h=e.table(l),f=d.optimisticOps.filter((function(e){return e.trans===a}));if(a._explicit&&i&&a.mutatedParts)for(var m=0,p=Object.values(d.queries.query);m<p.length;m++)for(var y=0,g=(w=p[m]).slice();y<g.length;y++)xn((_=g[y]).obsSet,a.mutatedParts)&&(L(w,_),_.subscribers.forEach((function(e){return o.add(e)})));else if(0<f.length){d.optimisticOps=d.optimisticOps.filter((function(e){return e.trans!==a}));for(var v=0,b=Object.values(d.queries.query);v<b.length;v++)for(var w,_,k,S=0,T=(w=b[v]).slice();S<T.length;S++)null!=(_=T[S]).res&&a.mutatedParts&&(i&&!_.dirty?(k=Object.isFrozen(_.res),k=zn(_.res,_.req,f,h,_,k),_.dirty?(L(w,_),_.subscribers.forEach((function(e){return o.add(e)}))):k!==_.res&&(_.res=k,_.promise=ke.resolve({result:k}))):(_.dirty&&L(w,_),_.subscribers.forEach((function(e){return o.add(e)}))))}}}o.forEach((function(e){return e()}))}}},a.addEventListener("abort",i(!1),{signal:o}),a.addEventListener("error",i(!1),{signal:o}),a.addEventListener("complete",i(!0),{signal:o})),a},table:function(r){var i=e.table(r),s=i.schema.primaryKey;return t(t({},i),{mutate:function(e){var o=ve.trans;if(s.outbound||"disabled"===o.db._options.cache||o.explicit)return i.mutate(e);var a=On["idb://".concat(n,"/").concat(r)];return a?(o=i.mutate(e),"add"!==e.type&&"put"!==e.type||!(50<=e.values.length||Fn(s,e).some((function(e){return null==e})))?(a.optimisticOps.push(e),e.mutatedParts&&In(e.mutatedParts),o.then((function(t){0<t.numFailures&&(L(a.optimisticOps,e),(t=Wn(0,e,t))&&a.optimisticOps.push(t),e.mutatedParts&&In(e.mutatedParts))})),o.catch((function(){L(a.optimisticOps,e),e.mutatedParts&&In(e.mutatedParts)}))):o.then((function(n){var r=Wn(0,t(t({},e),{values:e.values.map((function(e,r){var i;return k(e=null!==(i=s.keyPath)&&void 0!==i&&i.includes(".")?I(e):t({},e),s.keyPath,n.results[r]),e}))}),n);a.optimisticOps.push(r),queueMicrotask((function(){return e.mutatedParts&&In(e.mutatedParts)}))})),o):i.mutate(e)},query:function(e){if(!$n(ve,i)||!Kn("query",e))return i.query(e);var t="immutable"===(null===(a=ve.trans)||void 0===a?void 0:a.db._options.cache),s=(c=ve).requery,o=c.signal,a=function(e,t,n,r){var i=On["idb://".concat(e,"/").concat(t)];if(!i)return[];if(!(t=i.queries[n]))return[null,!1,i,null];var s=t[(r.query?r.query.index.name:null)||""];if(!s)return[null,!1,i,null];switch(n){case"query":var o=s.find((function(e){return e.req.limit===r.limit&&e.req.values===r.values&&Zn(e.req.query.range,r.query.range)}));return o?[o,!0,i,s]:[s.find((function(e){return("limit"in e.req?e.req.limit:1/0)>=r.limit&&(!r.values||e.req.values)&&function(e,t){return function(e,t,n,r){if(void 0===e)return void 0!==t?-1:0;if(void 0===t)return 1;if(0===(t=ct(e,t))){if(n&&r)return 0;if(n)return 1;if(r)return-1}return t}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(e,t,n,r){if(void 0===e)return void 0!==t?1:0;if(void 0===t)return-1;if(0===(t=ct(e,t))){if(n&&r)return 0;if(n)return-1;if(r)return 1}return t}(e.upper,t.upper,e.upperOpen,t.upperOpen)}(e.req.query.range,r.query.range)})),!1,i,s];case"count":return o=s.find((function(e){return Zn(e.req.query.range,r.query.range)})),[o,!!o,i,s]}}(n,r,"query",e),u=a[0],c=a[1],l=a[2],d=a[3];return u&&c?u.obsSet=e.obsSet:(c=i.query(e).then((function(e){var n=e.result;if(u&&(u.res=n),t){for(var r=0,i=n.length;r<i;++r)Object.freeze(n[r]);Object.freeze(n)}else e.result=I(n);return e})).catch((function(e){return d&&u&&L(d,u),Promise.reject(e)})),u={obsSet:e.obsSet,promise:c,subscribers:new Set,type:"query",req:e,dirty:!1},d?d.push(u):(d=[u],(l=l||(On["idb://".concat(n,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[e.query.index.name||""]=d)),function(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",(function(){var r,i;e.subscribers.delete(n),0===e.subscribers.size&&(r=e,i=t,setTimeout((function(){0===r.subscribers.size&&L(i,r)}),3e3))}))}(u,d,s,o),u.promise.then((function(n){return{result:zn(n.result,e,null==l?void 0:l.optimisticOps,i,u,t)}}))}})}})}};function Yn(e,t){return new Proxy(e,{get:function(e,n,r){return"db"===n?t:Reflect.get(e,n,r)}})}var Gn=(Jn.prototype.version=function(e){if(isNaN(e)||e<.1)throw new z.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new z.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter((function(t){return t._cfg.version===e}))[0];return n||(n=new this.Version(e),t.push(n),t.sort(nn),n.stores({}),this._state.autoSchema=!1,n)},Jn.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||ve.letThrough||this._vip)?e():new ke((function(e,n){if(t._state.openComplete)return n(new z.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void n(new z.DatabaseClosed);t.open().catch(Y)}t._state.dbReadyPromise.then(e,n)})).then(e)},Jn.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;return i&&this.unuse({stack:t,name:i}),(e=this._middlewares[t]||(this._middlewares[t]=[])).push({stack:t,create:n,level:null==r?10:r,name:i}),e.sort((function(e,t){return e.level-t.level})),this},Jn.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return r?e.create!==r:!!n&&e.name!==n}))),this},Jn.prototype.open=function(){var e=this;return He(ge,(function(){return Dn(e)}))},Jn.prototype._close=function(){var e=this._state,t=tt.indexOf(this);if(0<=t&&tt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(t){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new ke((function(t){e.dbReadyResolve=t})),e.openCanceller=new ke((function(t,n){e.cancelOpen=n})))},Jn.prototype.close=function(e){var t=(void 0===e?{disableAutoOpen:!0}:e).disableAutoOpen;e=this._state,t?(e.isBeingOpened&&e.cancelOpen(new z.DatabaseClosed),this._close(),e.autoOpen=!1,e.dbOpenError=new z.DatabaseClosed):(this._close(),e.autoOpen=this._options.autoOpen||e.isBeingOpened,e.openComplete=!1,e.dbOpenError=null)},Jn.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var n=0<arguments.length&&"object"!=typeof arguments[0],r=this._state;return new ke((function(i,s){function o(){t.close(e);var n=t._deps.indexedDB.deleteDatabase(t.name);n.onsuccess=Le((function(){var e,n,r;e=t._deps,n=t.name,r=e.indexedDB,e=e.IDBKeyRange,mn(r)||n===nt||fn(r,e).delete(n).catch(Y),i()})),n.onerror=Ft(s),n.onblocked=t._fireOnBlocked}if(n)throw new z.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(o):o()}))},Jn.prototype.backendDB=function(){return this.idbdb},Jn.prototype.isOpen=function(){return null!==this.idbdb},Jn.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},Jn.prototype.hasFailed=function(){return null!==this._state.dbOpenError},Jn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Jn.prototype,"tables",{get:function(){var e=this;return s(this._allTables).map((function(t){return e._allTables[t]}))},enumerable:!1,configurable:!0}),Jn.prototype.transaction=function(){var e=function(e,t,n){var r=arguments.length;if(r<2)throw new z.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[e,x(i),n]}.apply(this,arguments);return this._transaction.apply(this,e)},Jn.prototype._transaction=function(e,t,n){var r=this,i=ve.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var s,o,a=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(o=t.map((function(e){if("string"!=typeof(e=e instanceof r.Table?e.name:e))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e})),"r"==e||e===rt)s=rt;else{if("rw"!=e&&e!=it)throw new z.InvalidArgument("Invalid transaction mode: "+e);s=it}if(i){if(i.mode===rt&&s===it){if(!a)throw new z.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&o.forEach((function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!a)throw new z.SubTransaction("Table "+e+" not included in parent transaction.");i=null}})),a&&i&&!i.active&&(i=null)}}catch(n){return i?i._promise(null,(function(e,t){t(n)})):Je(n)}var u=function e(t,n,r,i,s){return ke.resolve().then((function(){var o=ve.transless||ve,a=t._createTransaction(n,r,t._dbSchema,i);if(a.explicit=!0,o={trans:a,transless:o},i)a.idbtrans=i.idbtrans;else try{a.create(),a.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(o){return o.name===W.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),t.close({disableAutoOpen:!1}),t.open().then((function(){return e(t,n,r,null,s)}))):Je(o)}var u,c=F(s);return c&&Ke(),o=ke.follow((function(){var e;(u=s.call(a,a))&&(c?(e=Be.bind(null,null),u.then(e,e)):"function"==typeof u.next&&"function"==typeof u.throw&&(u=An(u)))}),o),(u&&"function"==typeof u.then?ke.resolve(u).then((function(e){return a.active?e:Je(new z.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):o.then((function(){return u}))).then((function(e){return i&&a._resolve(),a._completion.then((function(){return e}))})).catch((function(e){return a._reject(e),Je(e)}))}))}.bind(null,this,s,o,i,n);return i?i._promise(s,u,"lock"):ve.trans?He(ve.transless,(function(){return r._whenReady(u)})):this._whenReady(u)},Jn.prototype.table=function(e){if(!l(this._allTables,e))throw new z.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},Jn);function Jn(e,n){var r=this;this._middlewares={},this.verno=0;var i=Jn.dependencies;this._options=n=t({addons:Jn.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange},i=n.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var s,o,a,u,c,l={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Y,dbReadyPromise:null,cancelOpen:Y,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};l.dbReadyPromise=new ke((function(e){l.dbReadyResolve=e})),l.openCanceller=new ke((function(e,t){l.cancelOpen=t})),this._state=l,this.name=e,this.on=mt(this,"populate","blocked","versionchange","close",{ready:[re,Y]}),this.on.ready.subscribe=v(this.on.ready.subscribe,(function(e){return function(t,n){Jn.vip((function(){var i,s=r._state;s.openComplete?(s.dbOpenError||ke.resolve().then(t),n&&e(t)):s.onReadyBeingFired?(s.onReadyBeingFired.push(t),n&&e(t)):(e(t),i=r,n||e((function e(){i.on.ready.unsubscribe(t),i.on.ready.unsubscribe(e)})))}))}})),this.Collection=(s=this,pt(xt.prototype,(function(e,t){this.db=s;var n=ot,r=null;if(t)try{n=t()}catch(e){r=e}var i=e._ctx;e=(t=i.table).hook.reading.fire,this._ctx={table:t,index:i.index,isPrimKey:!i.index||t.schema.primKey.keyPath&&i.index===t.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:e!==G?e:null}}))),this.Table=(o=this,pt(ht.prototype,(function(e,t,n){this.db=o,this._tx=n,this.name=e,this.schema=t,this.hook=o._allTables[e]?o._allTables[e].hook:mt(null,{creating:[X,Y],reading:[J,G],updating:[te,Y],deleting:[ee,Y]})}))),this.Transaction=(a=this,pt(Kt.prototype,(function(e,t,n,r,i){var s=this;this.db=a,this.mode=e,this.storeNames=t,this.schema=n,this.chromeTransactionDurability=r,this.idbtrans=null,this.on=mt(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ke((function(e,t){s._resolve=e,s._reject=t})),this._completion.then((function(){s.active=!1,s.on.complete.fire()}),(function(e){var t=s.active;return s.active=!1,s.on.error.fire(e),s.parent?s.parent._reject(e):t&&s.idbtrans&&s.idbtrans.abort(),Je(e)}))}))),this.Version=(u=this,pt(dn.prototype,(function(e){this.db=u,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))),this.WhereClause=(c=this,pt(Pt.prototype,(function(e,t,n){if(this.db=c,this._ctx={table:e,index:":id"===t?null:t,or:n},this._cmp=this._ascending=ct,this._descending=function(e,t){return ct(t,e)},this._max=function(e,t){return 0<ct(e,t)?e:t},this._min=function(e,t){return ct(e,t)<0?e:t},this._IDBKeyRange=c._deps.IDBKeyRange,!this._IDBKeyRange)throw new z.MissingAPI}))),this.on("versionchange",(function(e){0<e.newVersion?console.warn("Another connection wants to upgrade database '".concat(r.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(r.name,"'. Closing db now to resume the delete request.")),r.close({disableAutoOpen:!1})})),this.on("blocked",(function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('".concat(r.name,"') was blocked")):console.warn("Upgrade '".concat(r.name,"' blocked by other connection holding version ").concat(e.oldVersion/10))})),this._maxKey=Zt(n.IDBKeyRange),this._createTransaction=function(e,t,n,i){return new r.Transaction(e,t,n,r._options.chromeTransactionDurability,i)},this._fireOnBlocked=function(e){r.on("blocked").fire(e),tt.filter((function(e){return e.name===r.name&&e!==r&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(Vn),this.use(Hn),this.use(Bn),this.use(Pn),this.use(jn);var d=new Proxy(this,{get:function(e,t,n){if("_vip"===t)return!0;if("table"===t)return function(e){return Yn(r.table(e),d)};var i=Reflect.get(e,t,n);return i instanceof ht?Yn(i,d):"tables"===t?i.map((function(e){return Yn(e,d)})):"_createTransaction"===t?function(){return Yn(i.apply(this,arguments),d)}:i}});this.vip=d,i.forEach((function(e){return e(r)}))}j="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";var Qn,Xn=(er.prototype.subscribe=function(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})},er.prototype[j]=function(){return this},er);function er(e){this._subscribe=e}try{Qn={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch(O){Qn={indexedDB:null,IDBKeyRange:null}}function tr(e){var t,n=!1,r=new Xn((function(r){var i,s=F(e),o=!1,a={},u={},c={get closed(){return o},unsubscribe:function(){o||(o=!0,i&&i.abort(),d&&$t.storagemutated.unsubscribe(f))}};r.start&&r.start(c);var d=!1,h=function(){return Ge(m)},f=function(e){Tn(a,e),xn(u,a)&&h()},m=function(){var c,m,p;!o&&Qn.indexedDB&&(a={},c={},i&&i.abort(),i=new AbortController,p=function(t){var n=Ne();try{s&&Ke();var r=$e(e,t);return r=s?r.finally(Be):r}finally{n&&Me()}}(m={subscr:c,signal:i.signal,requery:h,querier:e,trans:null}),Promise.resolve(p).then((function(e){n=!0,t=e,o||m.signal.aborted||(a={},function(e){for(var t in e)if(l(e,t))return;return 1}(u=c)||d||($t(Rt,f),d=!0),Ge((function(){return!o&&r.next&&r.next(e)})))}),(function(e){n=!1,["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||o||Ge((function(){o||r.error&&r.error(e)}))})))};return setTimeout(h,0),c}));return r.hasValue=function(){return n},r.getValue=function(){return t},r}var nr=Gn;function rr(e){var t=sr;try{sr=!0,$t.storagemutated.fire(e),Nn(e,!0)}finally{sr=t}}d(nr,t(t({},H),{delete:function(e){return new nr(e,{addons:[]}).delete()},exists:function(e){return new nr(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){try{return n=(t=nr.dependencies).indexedDB,t=t.IDBKeyRange,(mn(n)?Promise.resolve(n.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return e!==nt}))})):fn(n,t).toCollection().primaryKeys()).then(e)}catch(e){return Je(new z.MissingAPI)}var t,n},defineClass:function(){return function(e){a(this,e)}},ignoreTransaction:function(e){return ve.trans?He(ve.transless,e):e()},vip:pn,async:function(e){return function(){try{var t=An(e.apply(this,arguments));return t&&"function"==typeof t.then?t:ke.resolve(t)}catch(t){return Je(t)}}},spawn:function(e,t,n){try{var r=An(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:ke.resolve(r)}catch(e){return Je(e)}},currentTransaction:{get:function(){return ve.trans||null}},waitFor:function(e,t){return t=ke.resolve("function"==typeof e?nr.ignoreTransaction(e):e).timeout(t||6e4),ve.trans?ve.trans.waitFor(t):t},Promise:ke,debug:{get:function(){return ie},set:function(e){se(e)}},derive:m,extend:a,props:d,override:v,Events:mt,on:$t,liveQuery:tr,extendObservabilitySet:Tn,getByKeyPath:_,setByKeyPath:k,delByKeyPath:function(e,t){"string"==typeof t?k(e,t,void 0):"length"in t&&[].map.call(t,(function(t){k(e,t,void 0)}))},shallowClone:S,deepClone:I,getObjectDiff:qn,cmp:ct,asap:w,minKey:-1/0,addons:[],connections:tt,errnames:W,dependencies:Qn,cache:On,semVer:"4.0.8",version:"4.0.8".split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)}))})),nr.maxKey=Zt(nr.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&($t(Rt,(function(e){sr||(e=new CustomEvent(Vt,{detail:e}),sr=!0,dispatchEvent(e),sr=!1)})),addEventListener(Vt,(function(e){e=e.detail,sr||rr(e)})));var ir,sr=!1,or=function(){};return"undefined"!=typeof BroadcastChannel&&((or=function(){(ir=new BroadcastChannel(Vt)).onmessage=function(e){return e.data&&rr(e.data)}})(),"function"==typeof ir.unref&&ir.unref(),$t(Rt,(function(e){sr||ir.postMessage(e)}))),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",(function(e){if(!Gn.disableBfCache&&e.persisted){ie&&console.debug("Dexie: handling persisted pagehide"),null!=ir&&ir.close();for(var t=0,n=tt;t<n.length;t++)n[t].close({disableAutoOpen:!1})}})),addEventListener("pageshow",(function(e){!Gn.disableBfCache&&e.persisted&&(ie&&console.debug("Dexie: handling persisted pageshow"),or(),rr({all:new gn(-1/0,[[]])}))}))),ke.rejectionMapper=function(e,t){return!e||e instanceof V||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Z[e.name]?e:(t=new Z[e.name](t||e.message,e),"stack"in e&&f(t,"stack",{get:function(){return this.inner.stack}}),t)},se(ie),t(Gn,Object.freeze({__proto__:null,Dexie:Gn,liveQuery:tr,Entity:ut,cmp:ct,PropModSymbol:O,PropModification:St,replacePrefix:function(e,t){return new St({replacePrefix:[e,t]})},add:function(e){return new St({add:e})},remove:function(e){return new St({remove:e})},default:Gn,RangeSet:gn,mergeRanges:bn,rangesOverlap:wn}),{default:Gn}),Gn}()},100:(e,t,n)=>{const r=n(681),i=async e=>new Promise(((t,n)=>{const i=r.request(e,(e=>{const n=[];let r=!1;e.on("data",(e=>{if(!r&&!String(e).startsWith("/*O_o*/"))return t(null);r=!0,n.push(e)})),e.on("end",(()=>{t({ok:!0,text:()=>Buffer.concat(n).toString()})}))}));i.on("error",n),i.end()}));e.exports=i,e.exports.default=i},908:(e,t,n)=>{const r="undefined"!=typeof window&&void 0!==window.document?window.fetch:n(100);class i{constructor(e,t){this.id=e,this.setOption(t)}setOption(e){e?"string"==typeof e?(this.sheetName=e,this.sheetId=this.sheetId||null):"object"==typeof e&&(this.sheetName=e.sheetName||this.sheetName,this.sheetId=e.sheetId||this.sheetId,this.useFormattedDate=e.hasOwnProperty("useFormattedDate")?e.useFormattedDate:this.useFormattedDate,this.useFormat=e.hasOwnProperty("useFormat")?e.useFormat:this.useFormat):(this.sheetName=this.sheetName||null,this.sheetId=this.sheetId||null,this.useFormattedDate=this.useFormattedDate||!1,this.useFormat=this.useFormat||!1)}isDate(e){return e&&"string"==typeof e&&/Date\((\d+),(\d+),(\d+)\)/.test(e)}async getSpreadsheetDataUsingFetch(){if(!this.id)return null;let e=`https://docs.google.com/spreadsheets/d/${this.id}/gviz/tq?`;e+=this.sheetId?`gid=${this.sheetId}`:`sheet=${this.sheetName}`;try{const t=await r(e);return t&&t.ok?t.text():null}catch(e){return console.error("Error fetching spreadsheet data:",e),null}}normalizeRow(e){return e.map((e=>e&&null!==e.v&&void 0!==e.v?e:{}))}applyHeaderIntoRows(e,t){return t.map((({c:e})=>this.normalizeRow(e))).map((t=>t.reduce(((t,n,r)=>null!==n.v&&void 0!==n.v?Object.assign(t,{[e[r]]:this.useFormat?n.f||n.v:this.useFormattedDate&&this.isDate(n.v)&&n.f||n.v}):t),{})))}getItems(e){let t=[];try{const n=/google\.visualization\.Query\.setResponse\(({.*})\);/,[r,i]=e.match(n),s=JSON.parse(i);if(s.table.cols.some((({label:e})=>!!e))){const e=s.table.cols.map((({label:e})=>e));t=this.applyHeaderIntoRows(e,s.table.rows)}else{const[e,...n]=s.table.rows,r=this.normalizeRow(e.c).map((e=>e.v));t=this.applyHeaderIntoRows(r,n)}}catch(e){console.error("Error parsing spreadsheet data:",e)}return t}async parse(e,t){if(e&&(this.id=e),t&&this.setOption(t),!this.id)throw new Error("SpreadsheetId is required.");const n=await this.getSpreadsheetDataUsingFetch();return null===n?[]:this.getItems(n)}}e.exports=i,e.exports.default=i},736:function(e){var t;t=function(e){var t=function(e){return new t.lib.init(e)};function n(e,t){return t.offset[e]?isNaN(t.offset[e])?t.offset[e]:t.offset[e]+"px":"0px"}function r(e,t){return!(!e||"string"!=typeof t||!(e.className&&e.className.trim().split(/\s+/gi).indexOf(t)>-1))}return t.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}},t.lib=t.prototype={toastify:"1.12.0",constructor:t,init:function(e){return e||(e={}),this.options={},this.toastElement=null,this.options.text=e.text||t.defaults.text,this.options.node=e.node||t.defaults.node,this.options.duration=0===e.duration?0:e.duration||t.defaults.duration,this.options.selector=e.selector||t.defaults.selector,this.options.callback=e.callback||t.defaults.callback,this.options.destination=e.destination||t.defaults.destination,this.options.newWindow=e.newWindow||t.defaults.newWindow,this.options.close=e.close||t.defaults.close,this.options.gravity="bottom"===e.gravity?"toastify-bottom":t.defaults.gravity,this.options.positionLeft=e.positionLeft||t.defaults.positionLeft,this.options.position=e.position||t.defaults.position,this.options.backgroundColor=e.backgroundColor||t.defaults.backgroundColor,this.options.avatar=e.avatar||t.defaults.avatar,this.options.className=e.className||t.defaults.className,this.options.stopOnFocus=void 0===e.stopOnFocus?t.defaults.stopOnFocus:e.stopOnFocus,this.options.onClick=e.onClick||t.defaults.onClick,this.options.offset=e.offset||t.defaults.offset,this.options.escapeMarkup=void 0!==e.escapeMarkup?e.escapeMarkup:t.defaults.escapeMarkup,this.options.ariaLive=e.ariaLive||t.defaults.ariaLive,this.options.style=e.style||t.defaults.style,e.backgroundColor&&(this.options.style.background=e.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var e=document.createElement("div");for(var t in e.className="toastify on "+this.options.className,this.options.position?e.className+=" toastify-"+this.options.position:!0===this.options.positionLeft?(e.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):e.className+=" toastify-right",e.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.'),this.options.style)e.style[t]=this.options.style[t];if(this.options.ariaLive&&e.setAttribute("aria-live",this.options.ariaLive),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)e.appendChild(this.options.node);else if(this.options.escapeMarkup?e.innerText=this.options.text:e.innerHTML=this.options.text,""!==this.options.avatar){var r=document.createElement("img");r.src=this.options.avatar,r.className="toastify-avatar","left"==this.options.position||!0===this.options.positionLeft?e.appendChild(r):e.insertAdjacentElement("afterbegin",r)}if(!0===this.options.close){var i=document.createElement("button");i.type="button",i.setAttribute("aria-label","Close"),i.className="toast-close",i.innerHTML="&#10006;",i.addEventListener("click",function(e){e.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}.bind(this));var s=window.innerWidth>0?window.innerWidth:screen.width;("left"==this.options.position||!0===this.options.positionLeft)&&s>360?e.insertAdjacentElement("afterbegin",i):e.appendChild(i)}if(this.options.stopOnFocus&&this.options.duration>0){var o=this;e.addEventListener("mouseover",(function(t){window.clearTimeout(e.timeOutValue)})),e.addEventListener("mouseleave",(function(){e.timeOutValue=window.setTimeout((function(){o.removeElement(e)}),o.options.duration)}))}if(void 0!==this.options.destination&&e.addEventListener("click",function(e){e.stopPropagation(),!0===this.options.newWindow?window.open(this.options.destination,"_blank"):window.location=this.options.destination}.bind(this)),"function"==typeof this.options.onClick&&void 0===this.options.destination&&e.addEventListener("click",function(e){e.stopPropagation(),this.options.onClick()}.bind(this)),"object"==typeof this.options.offset){var a=n("x",this.options),u=n("y",this.options),c="left"==this.options.position?a:"-"+a,l="toastify-top"==this.options.gravity?u:"-"+u;e.style.transform="translate("+c+","+l+")"}return e},showToast:function(){var e;if(this.toastElement=this.buildToast(),!(e="string"==typeof this.options.selector?document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||"undefined"!=typeof ShadowRoot&&this.options.selector instanceof ShadowRoot?this.options.selector:document.body))throw"Root element is not defined";var n=t.defaults.oldestFirst?e.firstChild:e.lastChild;return e.insertBefore(this.toastElement,n),t.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout(function(){this.removeElement(this.toastElement)}.bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(e){e.className=e.className.replace(" on",""),window.setTimeout(function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),e.parentNode&&e.parentNode.removeChild(e),this.options.callback.call(e),t.reposition()}.bind(this),400)}},t.reposition=function(){for(var e,t={top:15,bottom:15},n={top:15,bottom:15},i={top:15,bottom:15},s=document.getElementsByClassName("toastify"),o=0;o<s.length;o++){e=!0===r(s[o],"toastify-top")?"toastify-top":"toastify-bottom";var a=s[o].offsetHeight;e=e.substr(9,e.length-1),(window.innerWidth>0?window.innerWidth:screen.width)<=360?(s[o].style[e]=i[e]+"px",i[e]+=a+15):!0===r(s[o],"toastify-left")?(s[o].style[e]=t[e]+"px",t[e]+=a+15):(s[o].style[e]=n[e]+"px",n[e]+=a+15)}return this},t.lib.init.prototype=t.lib,t},e.exports?e.exports=t():this.Toastify=t()},979:(e,t,n)=>{"use strict";n.d(t,{y:()=>s});var r=n(736),i=n.n(r);class s{constructor(e,t){this.type=e,this.message=t}static error=e=>new s("error",e);static success=e=>new s("success",e);show=()=>{i()({text:`<div><h3>Sauce for TCG Collector</h3><span>${this.message}</span></div>`,className:this.type,duration:6e3,destination:"#",newWindow:!1,close:!0,gravity:"bottom",position:"center",stopOnFocus:!0,escapeMarkup:!1}).showToast()}}},236:(e,t,n)=>{"use strict";n.d(t,{S:()=>r});class r{constructor(){this.baseUrl="https://latest.currency-api.pages.dev/v1"}async request(e){let t=await fetch(this.baseUrl+e);return await t.json()}getRatesForJpy=async()=>await this.request("/currencies/jpy.json")}},468:(e,t,n)=>{"use strict";n.d(t,{q:()=>r});class r{constructor(){this.baseUrl="https://www.jpn-cards.com/v2"}async request(e){let t=await fetch(this.baseUrl+e);return await t.json()}getSets=async()=>await this.request("/set/");getCardsForSet=async e=>await this.request(`/card/set_code=${e}`)}},772:(e,t,n)=>{"use strict";n.d(t,{W:()=>r});class r{constructor(e,t){this.api=e,this.tcgCardPriceRepository=t}static getId=()=>"SyncJapanesePrices";handle=async e=>{const t=e.expansionId,n=(await this.api.getSets()).filter((e=>e.name.toLowerCase()===t.toLowerCase()));if(1!==n.length)throw new Error(`Prices for expansion "${t}" not found`);const r=n.at(0),i=await this.api.getCardsForSet(r.set_code);for(const e of i.data)await this.tcgCardPriceRepository.save({cardId:parseInt(e.cardUrl.replace("https://tcgcollector.com/cards/","")),cardNumber:e.sequenceNumber,expansionId:t,prices:e.prices})}}},773:(e,t,n)=>{"use strict";n.d(t,{L:()=>r,c:()=>i});class r{constructor(e){this.connection=e}find=async e=>await this.connection.KeyValue.get(e);save=async(e,t,n)=>{await this.connection.KeyValue.put({key:e,value:t,updatedOn:n})}}const i="currencyRateJpyToUsd"},868:(e,t,n)=>{"use strict";n.d(t,{k:()=>i});var r=n(979);class i{constructor(){}static getId=()=>"ShowToast";handle=e=>{new r.y(e.type,e.msg).show()}}},786:(e,t,n)=>{"use strict";n.d(t,{X:()=>dr});var r=n(773);class i extends Error{}class s extends i{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class o extends i{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class a extends i{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class u extends i{}class c extends i{constructor(e){super(`Invalid unit ${e}`)}}class l extends i{}class d extends i{constructor(){super("Zone is an abstract class")}}const h="numeric",f="short",m="long",p={year:h,month:h,day:h},y={year:h,month:f,day:h},g={year:h,month:f,day:h,weekday:f},v={year:h,month:m,day:h},b={year:h,month:m,day:h,weekday:m},w={hour:h,minute:h},_={hour:h,minute:h,second:h},k={hour:h,minute:h,second:h,timeZoneName:f},S={hour:h,minute:h,second:h,timeZoneName:m},T={hour:h,minute:h,hourCycle:"h23"},x={hour:h,minute:h,second:h,hourCycle:"h23"},O={hour:h,minute:h,second:h,hourCycle:"h23",timeZoneName:f},E={hour:h,minute:h,second:h,hourCycle:"h23",timeZoneName:m},C={year:h,month:h,day:h,hour:h,minute:h},I={year:h,month:h,day:h,hour:h,minute:h,second:h},N={year:h,month:f,day:h,hour:h,minute:h},M={year:h,month:f,day:h,hour:h,minute:h,second:h},D={year:h,month:f,day:h,weekday:f,hour:h,minute:h},A={year:h,month:m,day:h,hour:h,minute:h,timeZoneName:f},L={year:h,month:m,day:h,hour:h,minute:h,second:h,timeZoneName:f},P={year:h,month:m,day:h,weekday:m,hour:h,minute:h,timeZoneName:m},q={year:h,month:m,day:h,weekday:m,hour:h,minute:h,second:h,timeZoneName:m};class F{get type(){throw new d}get name(){throw new d}get ianaName(){return this.name}get isUniversal(){throw new d}offsetName(e,t){throw new d}formatOffset(e,t){throw new d}offset(e){throw new d}equals(e){throw new d}get isValid(){throw new d}}let j=null;class R extends F{static get instance(){return null===j&&(j=new R),j}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return Qe(e,t,n)}formatOffset(e,t){return nt(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return"system"===e.type}get isValid(){return!0}}let V={};const $={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let K={};class B extends F{static create(e){return K[e]||(K[e]=new B(e)),K[e]}static resetCache(){K={},V={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(e){return!1}}constructor(e){super(),this.zoneName=e,this.valid=B.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return Qe(e,t,n,this.name)}formatOffset(e,t){return nt(this.offset(e),t)}offset(e){const t=new Date(e);if(isNaN(t))return NaN;const n=(r=this.name,V[r]||(V[r]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:r,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),V[r]);var r;let[i,s,o,a,u,c,l]=n.formatToParts?function(e,t){const n=e.formatToParts(t),r=[];for(let e=0;e<n.length;e++){const{type:t,value:i}=n[e],s=$[t];"era"===t?r[s]=i:Me(s)||(r[s]=parseInt(i,10))}return r}(n,t):function(e,t){const n=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,i,s,o,a,u,c,l]=r;return[o,i,s,a,u,c,l]}(n,t);"BC"===a&&(i=1-Math.abs(i));let d=+t;const h=d%1e3;return d-=h>=0?h:1e3+h,(He({year:i,month:s,day:o,hour:24===u?0:u,minute:c,second:l,millisecond:0})-d)/6e4}equals(e){return"iana"===e.type&&e.name===this.name}get isValid(){return this.valid}}let W={},U={};function z(e,t={}){const n=JSON.stringify([e,t]);let r=U[n];return r||(r=new Intl.DateTimeFormat(e,t),U[n]=r),r}let Z={},H={},Y=null,G={};function J(e,t,n,r){const i=e.listingMode();return"error"===i?null:"en"===i?n(t):r(t)}class Q{constructor(e,t,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:r,floor:i,...s}=n;if(!t||Object.keys(s).length>0){const t={useGrouping:!1,...n};n.padTo>0&&(t.minimumIntegerDigits=n.padTo),this.inf=function(e,t={}){const n=JSON.stringify([e,t]);let r=Z[n];return r||(r=new Intl.NumberFormat(e,t),Z[n]=r),r}(e,t)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}return Ve(this.floor?Math.floor(e):We(e,3),this.padTo)}}class X{constructor(e,t,n){let r;if(this.opts=n,this.originalZone=void 0,this.opts.timeZone)this.dt=e;else if("fixed"===e.zone.type){const t=e.offset/60*-1,n=t>=0?`Etc/GMT+${t}`:`Etc/GMT${t}`;0!==e.offset&&B.create(n).valid?(r=n,this.dt=e):(r="UTC",this.dt=0===e.offset?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else"system"===e.zone.type?this.dt=e:"iana"===e.zone.type?(this.dt=e,r=e.zone.name):(r="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const i={...this.opts};i.timeZone=i.timeZone||r,this.dtf=z(t,i)}format(){return this.originalZone?this.formatToParts().map((({value:e})=>e)).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map((e=>{if("timeZoneName"===e.type){const t=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...e,value:t}}return e})):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class ee{constructor(e,t,n){this.opts={style:"long",...n},!t&&Le()&&(this.rtf=function(e,t={}){const{base:n,...r}=t,i=JSON.stringify([e,r]);let s=H[i];return s||(s=new Intl.RelativeTimeFormat(e,t),H[i]=s),s}(e,n))}format(e,t){return this.rtf?this.rtf.format(e,t):function(e,t,n="always",r=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=-1===["hours","minutes","seconds"].indexOf(e);if("auto"===n&&s){const n="days"===e;switch(t){case 1:return n?"tomorrow":`next ${i[e][0]}`;case-1:return n?"yesterday":`last ${i[e][0]}`;case 0:return n?"today":`this ${i[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),u=1===a,c=i[e],l=r?u?c[1]:c[2]||c[1]:u?i[e][0]:e;return o?`${a} ${l} ago`:`in ${a} ${l}`}(t,e,this.opts.numeric,"long"!==this.opts.style)}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const te={firstDay:1,minimalDays:4,weekend:[6,7]};class ne{static fromOpts(e){return ne.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,n,r,i=!1){const s=e||pe.defaultLocale,o=s||(i?"en-US":Y||(Y=(new Intl.DateTimeFormat).resolvedOptions().locale,Y)),a=t||pe.defaultNumberingSystem,u=n||pe.defaultOutputCalendar,c=je(r)||pe.defaultWeekSettings;return new ne(o,a,u,c,s)}static resetCache(){Y=null,U={},Z={},H={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:n,weekSettings:r}={}){return ne.create(e,t,n,r)}constructor(e,t,n,r,i){const[s,o,a]=function(e){const t=e.indexOf("-x-");-1!==t&&(e=e.substring(0,t));const n=e.indexOf("-u-");if(-1===n)return[e];{let t,r;try{t=z(e).resolvedOptions(),r=e}catch(i){const s=e.substring(0,n);t=z(s).resolvedOptions(),r=s}const{numberingSystem:i,calendar:s}=t;return[r,i,s]}}(e);this.locale=s,this.numberingSystem=t||o||null,this.outputCalendar=n||a||null,this.weekSettings=r,this.intl=function(e,t,n){return n||t?(e.includes("-u-")||(e+="-u"),n&&(e+=`-ca-${n}`),t&&(e+=`-nu-${t}`),e):e}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=i,this.fastNumbersCached=null}get fastNumbers(){var e;return null==this.fastNumbersCached&&(this.fastNumbersCached=(!(e=this).numberingSystem||"latn"===e.numberingSystem)&&("latn"===e.numberingSystem||!e.locale||e.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar);return e&&t?"en":"intl"}clone(e){return e&&0!==Object.getOwnPropertyNames(e).length?ne.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,je(e.weekSettings)||this.weekSettings,e.defaultToEN||!1):this}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return J(this,e,at,(()=>{const n=t?{month:e,day:"numeric"}:{month:e},r=t?"format":"standalone";return this.monthsCache[r][e]||(this.monthsCache[r][e]=function(e){const t=[];for(let n=1;n<=12;n++){const r=cr.utc(2009,n,1);t.push(e(r))}return t}((e=>this.extract(e,n,"month")))),this.monthsCache[r][e]}))}weekdays(e,t=!1){return J(this,e,dt,(()=>{const n=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},r=t?"format":"standalone";return this.weekdaysCache[r][e]||(this.weekdaysCache[r][e]=function(e){const t=[];for(let n=1;n<=7;n++){const r=cr.utc(2016,11,13+n);t.push(e(r))}return t}((e=>this.extract(e,n,"weekday")))),this.weekdaysCache[r][e]}))}meridiems(){return J(this,void 0,(()=>ht),(()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[cr.utc(2016,11,13,9),cr.utc(2016,11,13,19)].map((t=>this.extract(t,e,"dayperiod")))}return this.meridiemCache}))}eras(e){return J(this,e,yt,(()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[cr.utc(-40,1,1),cr.utc(2017,1,1)].map((e=>this.extract(e,t,"era")))),this.eraCache[e]}))}extract(e,t,n){const r=this.dtFormatter(e,t).formatToParts().find((e=>e.type.toLowerCase()===n));return r?r.value:null}numberFormatter(e={}){return new Q(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new X(e,this.intl,t)}relFormatter(e={}){return new ee(this.intl,this.isEnglish(),e)}listFormatter(e={}){return function(e,t={}){const n=JSON.stringify([e,t]);let r=W[n];return r||(r=new Intl.ListFormat(e,t),W[n]=r),r}(this.intl,e)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Pe()?function(e){let t=G[e];if(!t){const n=new Intl.Locale(e);t="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,G[e]=t}return t}(this.locale):te}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let re=null;class ie extends F{static get utcInstance(){return null===re&&(re=new ie(0)),re}static instance(e){return 0===e?ie.utcInstance:new ie(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new ie(Xe(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${nt(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${nt(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return nt(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return"fixed"===e.type&&e.fixed===this.fixed}get isValid(){return!0}}class se extends F{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function oe(e,t){if(Me(e)||null===e)return t;if(e instanceof F)return e;if("string"==typeof e){const n=e.toLowerCase();return"default"===n?t:"local"===n||"system"===n?R.instance:"utc"===n||"gmt"===n?ie.utcInstance:ie.parseSpecifier(n)||B.create(e)}return De(e)?ie.instance(e):"object"==typeof e&&"offset"in e&&"function"==typeof e.offset?e:new se(e)}let ae,ue=()=>Date.now(),ce="system",le=null,de=null,he=null,fe=60,me=null;class pe{static get now(){return ue}static set now(e){ue=e}static set defaultZone(e){ce=e}static get defaultZone(){return oe(ce,R.instance)}static get defaultLocale(){return le}static set defaultLocale(e){le=e}static get defaultNumberingSystem(){return de}static set defaultNumberingSystem(e){de=e}static get defaultOutputCalendar(){return he}static set defaultOutputCalendar(e){he=e}static get defaultWeekSettings(){return me}static set defaultWeekSettings(e){me=je(e)}static get twoDigitCutoffYear(){return fe}static set twoDigitCutoffYear(e){fe=e%100}static get throwOnInvalid(){return ae}static set throwOnInvalid(e){ae=e}static resetCaches(){ne.resetCache(),B.resetCache()}}class ye{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const ge=[0,31,59,90,120,151,181,212,243,273,304,334],ve=[0,31,60,91,121,152,182,213,244,274,305,335];function be(e,t){return new ye("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function we(e,t,n){const r=new Date(Date.UTC(e,t-1,n));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const i=r.getUTCDay();return 0===i?7:i}function _e(e,t,n){return n+(Ue(e)?ve:ge)[t-1]}function ke(e,t){const n=Ue(e)?ve:ge,r=n.findIndex((e=>e<t));return{month:r+1,day:t-n[r]}}function Se(e,t){return(e-t+7)%7+1}function Te(e,t=4,n=1){const{year:r,month:i,day:s}=e,o=_e(r,i,s),a=Se(we(r,i,s),n);let u,c=Math.floor((o-a+14-t)/7);return c<1?(u=r-1,c=Ge(u,t,n)):c>Ge(r,t,n)?(u=r+1,c=1):u=r,{weekYear:u,weekNumber:c,weekday:a,...rt(e)}}function xe(e,t=4,n=1){const{weekYear:r,weekNumber:i,weekday:s}=e,o=Se(we(r,1,t),n),a=ze(r);let u,c=7*i+s-o-7+t;c<1?(u=r-1,c+=ze(u)):c>a?(u=r+1,c-=ze(r)):u=r;const{month:l,day:d}=ke(u,c);return{year:u,month:l,day:d,...rt(e)}}function Oe(e){const{year:t,month:n,day:r}=e;return{year:t,ordinal:_e(t,n,r),...rt(e)}}function Ee(e){const{year:t,ordinal:n}=e,{month:r,day:i}=ke(t,n);return{year:t,month:r,day:i,...rt(e)}}function Ce(e,t){if(!Me(e.localWeekday)||!Me(e.localWeekNumber)||!Me(e.localWeekYear)){if(!Me(e.weekday)||!Me(e.weekNumber)||!Me(e.weekYear))throw new u("Cannot mix locale-based week fields with ISO-based week fields");return Me(e.localWeekday)||(e.weekday=e.localWeekday),Me(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),Me(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}return{minDaysInFirstWeek:4,startOfWeek:1}}function Ie(e){const t=Ae(e.year),n=Re(e.month,1,12),r=Re(e.day,1,Ze(e.year,e.month));return t?n?!r&&be("day",e.day):be("month",e.month):be("year",e.year)}function Ne(e){const{hour:t,minute:n,second:r,millisecond:i}=e,s=Re(t,0,23)||24===t&&0===n&&0===r&&0===i,o=Re(n,0,59),a=Re(r,0,59),u=Re(i,0,999);return s?o?a?!u&&be("millisecond",i):be("second",r):be("minute",n):be("hour",t)}function Me(e){return void 0===e}function De(e){return"number"==typeof e}function Ae(e){return"number"==typeof e&&e%1==0}function Le(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(e){return!1}}function Pe(){try{return"undefined"!=typeof Intl&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch(e){return!1}}function qe(e,t,n){if(0!==e.length)return e.reduce(((e,r)=>{const i=[t(r),r];return e&&n(e[0],i[0])===e[0]?e:i}),null)[1]}function Fe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function je(e){if(null==e)return null;if("object"!=typeof e)throw new l("Week settings must be an object");if(!Re(e.firstDay,1,7)||!Re(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some((e=>!Re(e,1,7))))throw new l("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function Re(e,t,n){return Ae(e)&&e>=t&&e<=n}function Ve(e,t=2){let n;return n=e<0?"-"+(""+-e).padStart(t,"0"):(""+e).padStart(t,"0"),n}function $e(e){return Me(e)||null===e||""===e?void 0:parseInt(e,10)}function Ke(e){return Me(e)||null===e||""===e?void 0:parseFloat(e)}function Be(e){if(!Me(e)&&null!==e&&""!==e){const t=1e3*parseFloat("0."+e);return Math.floor(t)}}function We(e,t,n=!1){const r=10**t;return(n?Math.trunc:Math.round)(e*r)/r}function Ue(e){return e%4==0&&(e%100!=0||e%400==0)}function ze(e){return Ue(e)?366:365}function Ze(e,t){const n=(r=t-1)-12*Math.floor(r/12)+1;var r;return 2===n?Ue(e+(t-n)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function He(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function Ye(e,t,n){return-Se(we(e,1,t),n)+t-1}function Ge(e,t=4,n=1){const r=Ye(e,t,n),i=Ye(e+1,t,n);return(ze(e)-r+i)/7}function Je(e){return e>99?e:e>pe.twoDigitCutoffYear?1900+e:2e3+e}function Qe(e,t,n,r=null){const i=new Date(e),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);const o={timeZoneName:t,...s},a=new Intl.DateTimeFormat(n,o).formatToParts(i).find((e=>"timezonename"===e.type.toLowerCase()));return a?a.value:null}function Xe(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);const r=parseInt(t,10)||0;return 60*n+(n<0||Object.is(n,-0)?-r:r)}function et(e){const t=Number(e);if("boolean"==typeof e||""===e||Number.isNaN(t))throw new l(`Invalid unit value ${e}`);return t}function tt(e,t){const n={};for(const r in e)if(Fe(e,r)){const i=e[r];if(null==i)continue;n[t(r)]=et(i)}return n}function nt(e,t){const n=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),i=e>=0?"+":"-";switch(t){case"short":return`${i}${Ve(n,2)}:${Ve(r,2)}`;case"narrow":return`${i}${n}${r>0?`:${r}`:""}`;case"techie":return`${i}${Ve(n,2)}${Ve(r,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function rt(e){return function(e,t){return["hour","minute","second","millisecond"].reduce(((t,n)=>(t[n]=e[n],t)),{})}(e)}const it=["January","February","March","April","May","June","July","August","September","October","November","December"],st=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ot=["J","F","M","A","M","J","J","A","S","O","N","D"];function at(e){switch(e){case"narrow":return[...ot];case"short":return[...st];case"long":return[...it];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const ut=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],ct=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],lt=["M","T","W","T","F","S","S"];function dt(e){switch(e){case"narrow":return[...lt];case"short":return[...ct];case"long":return[...ut];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const ht=["AM","PM"],ft=["Before Christ","Anno Domini"],mt=["BC","AD"],pt=["B","A"];function yt(e){switch(e){case"narrow":return[...pt];case"short":return[...mt];case"long":return[...ft];default:return null}}function gt(e,t){let n="";for(const r of e)r.literal?n+=r.val:n+=t(r.val);return n}const vt={D:p,DD:y,DDD:v,DDDD:b,t:w,tt:_,ttt:k,tttt:S,T,TT:x,TTT:O,TTTT:E,f:C,ff:N,fff:A,ffff:P,F:I,FF:M,FFF:L,FFFF:q};class bt{static create(e,t={}){return new bt(e,t)}static parseFormat(e){let t=null,n="",r=!1;const i=[];for(let s=0;s<e.length;s++){const o=e.charAt(s);"'"===o?(n.length>0&&i.push({literal:r||/^\s+$/.test(n),val:n}),t=null,n="",r=!r):r||o===t?n+=o:(n.length>0&&i.push({literal:/^\s+$/.test(n),val:n}),n=o,t=o)}return n.length>0&&i.push({literal:r||/^\s+$/.test(n),val:n}),i}static macroTokenToFormatOpts(e){return vt[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return Ve(e,t);const n={...this.opts};return t>0&&(n.padTo=t),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,t){const n="en"===this.loc.listingMode(),r=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,i=(t,n)=>this.loc.extract(e,t,n),s=t=>e.isOffsetFixed&&0===e.offset&&t.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,t.format):"",o=(t,r)=>n?function(e,t){return at(t)[e.month-1]}(e,t):i(r?{month:t}:{month:t,day:"numeric"},"month"),a=(t,r)=>n?function(e,t){return dt(t)[e.weekday-1]}(e,t):i(r?{weekday:t}:{weekday:t,month:"long",day:"numeric"},"weekday"),u=t=>{const n=bt.macroTokenToFormatOpts(t);return n?this.formatWithSystemDefault(e,n):t},c=t=>n?function(e,t){return yt(t)[e.year<0?0:1]}(e,t):i({era:t},"era");return gt(bt.parseFormat(t),(t=>{switch(t){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12==0?12:e.hour%12);case"hh":return this.num(e.hour%12==0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return s({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return s({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return s({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return n?function(e){return ht[e.hour<12?0:1]}(e):i({hour:"numeric",hourCycle:"h12"},"dayperiod");case"d":return r?i({day:"numeric"},"day"):this.num(e.day);case"dd":return r?i({day:"2-digit"},"day"):this.num(e.day,2);case"c":case"E":return this.num(e.weekday);case"ccc":return a("short",!0);case"cccc":return a("long",!0);case"ccccc":return a("narrow",!0);case"EEE":return a("short",!1);case"EEEE":return a("long",!1);case"EEEEE":return a("narrow",!1);case"L":return r?i({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return r?i({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return o("short",!0);case"LLLL":return o("long",!0);case"LLLLL":return o("narrow",!0);case"M":return r?i({month:"numeric"},"month"):this.num(e.month);case"MM":return r?i({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return o("short",!1);case"MMMM":return o("long",!1);case"MMMMM":return o("narrow",!1);case"y":return r?i({year:"numeric"},"year"):this.num(e.year);case"yy":return r?i({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return r?i({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return r?i({year:"numeric"},"year"):this.num(e.year,6);case"G":return c("short");case"GG":return c("long");case"GGGGG":return c("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return u(t)}}))}formatDurationFromString(e,t){const n=e=>{switch(e[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=bt.parseFormat(t),i=r.reduce(((e,{literal:t,val:n})=>t?e:e.concat(n)),[]);return gt(r,(e=>t=>{const r=n(t);return r?this.num(e.get(r),t.length):t})(e.shiftTo(...i.map(n).filter((e=>e)))))}}const wt=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function _t(...e){const t=e.reduce(((e,t)=>e+t.source),"");return RegExp(`^${t}$`)}function kt(...e){return t=>e.reduce((([e,n,r],i)=>{const[s,o,a]=i(t,r);return[{...e,...s},o||n,a]}),[{},null,1]).slice(0,2)}function St(e,...t){if(null==e)return[null,null];for(const[n,r]of t){const t=n.exec(e);if(t)return r(t)}return[null,null]}function Tt(...e){return(t,n)=>{const r={};let i;for(i=0;i<e.length;i++)r[e[i]]=$e(t[n+i]);return[r,null,n+i]}}const xt=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Ot=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Et=RegExp(`${Ot.source}(?:${xt.source}?(?:\\[(${wt.source})\\])?)?`),Ct=RegExp(`(?:T${Et.source})?`),It=Tt("weekYear","weekNumber","weekDay"),Nt=Tt("year","ordinal"),Mt=RegExp(`${Ot.source} ?(?:${xt.source}|(${wt.source}))?`),Dt=RegExp(`(?: ${Mt.source})?`);function At(e,t,n){const r=e[t];return Me(r)?n:$e(r)}function Lt(e,t){return[{hours:At(e,t,0),minutes:At(e,t+1,0),seconds:At(e,t+2,0),milliseconds:Be(e[t+3])},null,t+4]}function Pt(e,t){const n=!e[t]&&!e[t+1],r=Xe(e[t+1],e[t+2]);return[{},n?null:ie.instance(r),t+3]}function qt(e,t){return[{},e[t]?B.create(e[t]):null,t+1]}const Ft=RegExp(`^T?${Ot.source}$`),jt=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Rt(e){const[t,n,r,i,s,o,a,u,c]=e,l="-"===t[0],d=u&&"-"===u[0],h=(e,t=!1)=>void 0!==e&&(t||e&&l)?-e:e;return[{years:h(Ke(n)),months:h(Ke(r)),weeks:h(Ke(i)),days:h(Ke(s)),hours:h(Ke(o)),minutes:h(Ke(a)),seconds:h(Ke(u),"-0"===u),milliseconds:h(Be(c),d)}]}const Vt={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function $t(e,t,n,r,i,s,o){const a={year:2===t.length?Je($e(t)):$e(t),month:st.indexOf(n)+1,day:$e(r),hour:$e(i),minute:$e(s)};return o&&(a.second=$e(o)),e&&(a.weekday=e.length>3?ut.indexOf(e)+1:ct.indexOf(e)+1),a}const Kt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Bt(e){const[,t,n,r,i,s,o,a,u,c,l,d]=e,h=$t(t,i,r,n,s,o,a);let f;return f=u?Vt[u]:c?0:Xe(l,d),[h,new ie(f)]}const Wt=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Ut=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,zt=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Zt(e){const[,t,n,r,i,s,o,a]=e;return[$t(t,i,r,n,s,o,a),ie.utcInstance]}function Ht(e){const[,t,n,r,i,s,o,a]=e;return[$t(t,a,n,r,i,s,o),ie.utcInstance]}const Yt=_t(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Ct),Gt=_t(/(\d{4})-?W(\d\d)(?:-?(\d))?/,Ct),Jt=_t(/(\d{4})-?(\d{3})/,Ct),Qt=_t(Et),Xt=kt((function(e,t){return[{year:At(e,t),month:At(e,t+1,1),day:At(e,t+2,1)},null,t+3]}),Lt,Pt,qt),en=kt(It,Lt,Pt,qt),tn=kt(Nt,Lt,Pt,qt),nn=kt(Lt,Pt,qt),rn=kt(Lt),sn=_t(/(\d{4})-(\d\d)-(\d\d)/,Dt),on=_t(Mt),an=kt(Lt,Pt,qt),un="Invalid Duration",cn={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},ln={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...cn},dn={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:4.3481250000000005,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3},...cn},hn=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],fn=hn.slice(0).reverse();function mn(e,t,n=!1){const r={values:n?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new gn(r)}function pn(e,t){let n=t.milliseconds??0;for(const r of fn.slice(1))t[r]&&(n+=t[r]*e[r].milliseconds);return n}function yn(e,t){const n=pn(e,t)<0?-1:1;hn.reduceRight(((r,i)=>{if(Me(t[i]))return r;if(r){const s=t[r]*n,o=e[i][r],a=Math.floor(s/o);t[i]+=a*n,t[r]-=a*o*n}return i}),null),hn.reduce(((n,r)=>{if(Me(t[r]))return n;if(n){const i=t[n]%1;t[n]-=i,t[r]+=i*e[n][r]}return r}),null)}class gn{constructor(e){const t="longterm"===e.conversionAccuracy||!1;let n=t?dn:ln;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||ne.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,t){return gn.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(null==e||"object"!=typeof e)throw new l("Duration.fromObject: argument expected to be an object, got "+(null===e?"null":typeof e));return new gn({values:tt(e,gn.normalizeUnit),loc:ne.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(De(e))return gn.fromMillis(e);if(gn.isDuration(e))return e;if("object"==typeof e)return gn.fromObject(e);throw new l(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[n]=function(e){return St(e,[jt,Rt])}(e);return n?gn.fromObject(n,t):gn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[n]=function(e){return St(e,[Ft,rn])}(e);return n?gn.fromObject(n,t):gn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new l("need to specify a reason the Duration is invalid");const n=e instanceof ye?e:new ye(e,t);if(pe.throwOnInvalid)throw new a(n);return new gn({invalid:n})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e?e.toLowerCase():e];if(!t)throw new c(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const n={...t,floor:!1!==t.round&&!1!==t.floor};return this.isValid?bt.create(this.loc,n).formatDurationFromString(this,e):un}toHuman(e={}){if(!this.isValid)return un;const t=hn.map((t=>{const n=this.values[t];return Me(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:t.slice(0,-1)}).format(n)})).filter((e=>e));return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return 0!==this.years&&(e+=this.years+"Y"),0===this.months&&0===this.quarters||(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(e+=We(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},cr.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?pn(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=gn.fromDurationLike(e),n={};for(const e of hn)(Fe(t.values,e)||Fe(this.values,e))&&(n[e]=t.get(e)+this.get(e));return mn(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const t=gn.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=et(e(this.values[n],n));return mn(this,{values:t},!0)}get(e){return this[gn.normalizeUnit(e)]}set(e){return this.isValid?mn(this,{values:{...this.values,...tt(e,gn.normalizeUnit)}}):this}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:n,matrix:r}={}){return mn(this,{loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:r,conversionAccuracy:n})}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return yn(this.matrix,e),mn(this,{values:e},!0)}rescale(){return this.isValid?mn(this,{values:function(e){const t={};for(const[n,r]of Object.entries(e))0!==r&&(t[n]=r);return t}(this.normalize().shiftToAll().toObject())},!0):this}shiftTo(...e){if(!this.isValid)return this;if(0===e.length)return this;e=e.map((e=>gn.normalizeUnit(e)));const t={},n={},r=this.toObject();let i;for(const s of hn)if(e.indexOf(s)>=0){i=s;let e=0;for(const t in n)e+=this.matrix[t][s]*n[t],n[t]=0;De(r[s])&&(e+=r[s]);const o=Math.trunc(e);t[s]=o,n[s]=(1e3*e-1e3*o)/1e3}else De(r[s])&&(n[s]=r[s]);for(const e in n)0!==n[e]&&(t[i]+=e===i?n[e]:n[e]/this.matrix[i][e]);return yn(this.matrix,t),mn(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=0===this.values[t]?0:-this.values[t];return mn(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid)return!1;if(!this.loc.equals(e.loc))return!1;for(const r of hn)if(t=this.values[r],n=e.values[r],!(void 0===t||0===t?void 0===n||0===n:t===n))return!1;var t,n;return!0}}const vn="Invalid Interval";class bn{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new l("need to specify a reason the Interval is invalid");const n=e instanceof ye?e:new ye(e,t);if(pe.throwOnInvalid)throw new o(n);return new bn({invalid:n})}static fromDateTimes(e,t){const n=lr(e),r=lr(t),i=function(e,t){return e&&e.isValid?t&&t.isValid?t<e?bn.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null:bn.invalid("missing or invalid end"):bn.invalid("missing or invalid start")}(n,r);return null==i?new bn({start:n,end:r}):i}static after(e,t){const n=gn.fromDurationLike(t),r=lr(e);return bn.fromDateTimes(r,r.plus(n))}static before(e,t){const n=gn.fromDurationLike(t),r=lr(e);return bn.fromDateTimes(r.minus(n),r)}static fromISO(e,t){const[n,r]=(e||"").split("/",2);if(n&&r){let e,i,s,o;try{e=cr.fromISO(n,t),i=e.isValid}catch(r){i=!1}try{s=cr.fromISO(r,t),o=s.isValid}catch(r){o=!1}if(i&&o)return bn.fromDateTimes(e,s);if(i){const n=gn.fromISO(r,t);if(n.isValid)return bn.after(e,n)}else if(o){const e=gn.fromISO(n,t);if(e.isValid)return bn.before(s,e)}}return bn.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const n=this.start.startOf(e,t);let r;return r=t?.useLocaleWeeks?this.end.reconfigure({locale:n.locale}):this.end,r=r.startOf(e,t),Math.floor(r.diff(n,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,e))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return!!this.isValid&&this.s>e}isBefore(e){return!!this.isValid&&this.e<=e}contains(e){return!!this.isValid&&this.s<=e&&this.e>e}set({start:e,end:t}={}){return this.isValid?bn.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(lr).filter((e=>this.contains(e))).sort(((e,t)=>e.toMillis()-t.toMillis())),n=[];let{s:r}=this,i=0;for(;r<this.e;){const e=t[i]||this.e,s=+e>+this.e?this.e:e;n.push(bn.fromDateTimes(r,s)),r=s,i+=1}return n}splitBy(e){const t=gn.fromDurationLike(e);if(!this.isValid||!t.isValid||0===t.as("milliseconds"))return[];let n,{s:r}=this,i=1;const s=[];for(;r<this.e;){const e=this.start.plus(t.mapUnits((e=>e*i)));n=+e>+this.e?this.e:e,s.push(bn.fromDateTimes(r,n)),r=n,i+=1}return s}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return!!this.isValid&&+this.e==+e.s}abutsEnd(e){return!!this.isValid&&+e.e==+this.s}engulfs(e){return!!this.isValid&&this.s<=e.s&&this.e>=e.e}equals(e){return!(!this.isValid||!e.isValid)&&this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return t>=n?null:bn.fromDateTimes(t,n)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return bn.fromDateTimes(t,n)}static merge(e){const[t,n]=e.sort(((e,t)=>e.s-t.s)).reduce((([e,t],n)=>t?t.overlaps(n)||t.abutsStart(n)?[e,t.union(n)]:[e.concat([t]),n]:[e,n]),[[],null]);return n&&t.push(n),t}static xor(e){let t=null,n=0;const r=[],i=e.map((e=>[{time:e.s,type:"s"},{time:e.e,type:"e"}])),s=Array.prototype.concat(...i).sort(((e,t)=>e.time-t.time));for(const e of s)n+="s"===e.type?1:-1,1===n?t=e.time:(t&&+t!=+e.time&&r.push(bn.fromDateTimes(t,e.time)),t=null);return bn.merge(r)}difference(...e){return bn.xor([this].concat(e)).map((e=>this.intersection(e))).filter((e=>e&&!e.isEmpty()))}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:vn}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=p,t={}){return this.isValid?bt.create(this.s.loc.clone(t),e).formatInterval(this):vn}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:vn}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:vn}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:vn}toFormat(e,{separator:t=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:vn}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):gn.invalid(this.invalidReason)}mapEndpoints(e){return bn.fromDateTimes(e(this.s),e(this.e))}}class wn{static hasDST(e=pe.defaultZone){const t=cr.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return B.isValidZone(e)}static normalizeZone(e){return oe(e,pe.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||ne.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||ne.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||ne.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null,outputCalendar:i="gregory"}={}){return(r||ne.create(t,n,i)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null,outputCalendar:i="gregory"}={}){return(r||ne.create(t,n,i)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null}={}){return(r||ne.create(t,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null}={}){return(r||ne.create(t,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return ne.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return ne.create(t,null,"gregory").eras(e)}static features(){return{relative:Le(),localeWeek:Pe()}}}function _n(e,t){const n=e=>e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(t)-n(e);return Math.floor(gn.fromMillis(r).as("days"))}const kn={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},Sn={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Tn=kn.hanidec.replace(/[\[|\]]/g,"").split("");function xn({numberingSystem:e},t=""){return new RegExp(`${kn[e||"latn"]}${t}`)}function On(e,t=(e=>e)){return{regex:e,deser:([e])=>t(function(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);if(-1!==e[n].search(kn.hanidec))t+=Tn.indexOf(e[n]);else for(const e in Sn){const[n,i]=Sn[e];r>=n&&r<=i&&(t+=r-n)}}return parseInt(t,10)}return t}(e))}}const En=`[ ${String.fromCharCode(160)}]`,Cn=new RegExp(En,"g");function In(e){return e.replace(/\./g,"\\.?").replace(Cn,En)}function Nn(e){return e.replace(/\./g,"").replace(Cn," ").toLowerCase()}function Mn(e,t){return null===e?null:{regex:RegExp(e.map(In).join("|")),deser:([n])=>e.findIndex((e=>Nn(n)===Nn(e)))+t}}function Dn(e,t){return{regex:e,deser:([,e,t])=>Xe(e,t),groups:t}}function An(e){return{regex:e,deser:([e])=>e}}const Ln={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let Pn=null;function qn(e,t){return Array.prototype.concat(...e.map((e=>function(e,t){if(e.literal)return e;const n=jn(bt.macroTokenToFormatOpts(e.val),t);return null==n||n.includes(void 0)?e:n}(e,t))))}function Fn(e,t,n){const r=qn(bt.parseFormat(n),e),i=r.map((t=>function(e,t){const n=xn(t),r=xn(t,"{2}"),i=xn(t,"{3}"),s=xn(t,"{4}"),o=xn(t,"{6}"),a=xn(t,"{1,2}"),u=xn(t,"{1,3}"),c=xn(t,"{1,6}"),l=xn(t,"{1,9}"),d=xn(t,"{2,4}"),h=xn(t,"{4,6}"),f=e=>{return{regex:RegExp((t=e.val,t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"))),deser:([e])=>e,literal:!0};var t},m=(m=>{if(e.literal)return f(m);switch(m.val){case"G":return Mn(t.eras("short"),0);case"GG":return Mn(t.eras("long"),0);case"y":return On(c);case"yy":case"kk":return On(d,Je);case"yyyy":case"kkkk":return On(s);case"yyyyy":return On(h);case"yyyyyy":return On(o);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return On(a);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return On(r);case"MMM":return Mn(t.months("short",!0),1);case"MMMM":return Mn(t.months("long",!0),1);case"LLL":return Mn(t.months("short",!1),1);case"LLLL":return Mn(t.months("long",!1),1);case"o":case"S":return On(u);case"ooo":case"SSS":return On(i);case"u":return An(l);case"uu":return An(a);case"uuu":case"E":case"c":return On(n);case"a":return Mn(t.meridiems(),0);case"EEE":return Mn(t.weekdays("short",!1),1);case"EEEE":return Mn(t.weekdays("long",!1),1);case"ccc":return Mn(t.weekdays("short",!0),1);case"cccc":return Mn(t.weekdays("long",!0),1);case"Z":case"ZZ":return Dn(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return Dn(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return An(/[a-z_+-/]{1,256}?/i);case" ":return An(/[^\S\n\r]/);default:return f(m)}})(e)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"};return m.token=e,m}(t,e))),s=i.find((e=>e.invalidReason));if(s)return{input:t,tokens:r,invalidReason:s.invalidReason};{const[e,n]=function(e){return[`^${e.map((e=>e.regex)).reduce(((e,t)=>`${e}(${t.source})`),"")}$`,e]}(i),s=RegExp(e,"i"),[o,a]=function(e,t,n){const r=e.match(t);if(r){const e={};let t=1;for(const i in n)if(Fe(n,i)){const s=n[i],o=s.groups?s.groups+1:1;!s.literal&&s.token&&(e[s.token.val[0]]=s.deser(r.slice(t,t+o))),t+=o}return[r,e]}return[r,{}]}(t,s,n),[c,l,d]=a?function(e){let t,n=null;return Me(e.z)||(n=B.create(e.z)),Me(e.Z)||(n||(n=new ie(e.Z)),t=e.Z),Me(e.q)||(e.M=3*(e.q-1)+1),Me(e.h)||(e.h<12&&1===e.a?e.h+=12:12===e.h&&0===e.a&&(e.h=0)),0===e.G&&e.y&&(e.y=-e.y),Me(e.u)||(e.S=Be(e.u)),[Object.keys(e).reduce(((t,n)=>{const r=(e=>{switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}})(n);return r&&(t[r]=e[n]),t}),{}),n,t]}(a):[null,null,void 0];if(Fe(a,"a")&&Fe(a,"H"))throw new u("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:r,regex:s,rawMatches:o,matches:a,result:c,zone:l,specificOffset:d}}}function jn(e,t){if(!e)return null;const n=bt.create(t,e).dtFormatter((Pn||(Pn=cr.fromMillis(1555555555555)),Pn)),r=n.formatToParts(),i=n.resolvedOptions();return r.map((t=>function(e,t,n){const{type:r,value:i}=e;if("literal"===r){const e=/^\s+$/.test(i);return{literal:!e,val:e?" ":i}}const s=t[r];let o=r;"hour"===r&&(o=null!=t.hour12?t.hour12?"hour12":"hour24":null!=t.hourCycle?"h11"===t.hourCycle||"h12"===t.hourCycle?"hour12":"hour24":n.hour12?"hour12":"hour24");let a=Ln[o];if("object"==typeof a&&(a=a[s]),a)return{literal:!1,val:a}}(t,e,i)))}const Rn="Invalid DateTime",Vn=864e13;function $n(e){return new ye("unsupported zone",`the zone "${e.name}" is not supported`)}function Kn(e){return null===e.weekData&&(e.weekData=Te(e.c)),e.weekData}function Bn(e){return null===e.localWeekData&&(e.localWeekData=Te(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function Wn(e,t){const n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new cr({...n,...t,old:n})}function Un(e,t,n){let r=e-60*t*1e3;const i=n.offset(r);if(t===i)return[r,t];r-=60*(i-t)*1e3;const s=n.offset(r);return i===s?[r,i]:[e-60*Math.min(i,s)*1e3,Math.max(i,s)]}function zn(e,t){const n=new Date(e+=60*t*1e3);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function Zn(e,t,n){return Un(He(e),t,n)}function Hn(e,t){const n=e.o,r=e.c.year+Math.trunc(t.years),i=e.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters),s={...e.c,year:r,month:i,day:Math.min(e.c.day,Ze(r,i))+Math.trunc(t.days)+7*Math.trunc(t.weeks)},o=gn.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=He(s);let[u,c]=Un(a,n,e.zone);return 0!==o&&(u+=o,c=e.zone.offset(u)),{ts:u,o:c}}function Yn(e,t,n,r,i,s){const{setZone:o,zone:a}=n;if(e&&0!==Object.keys(e).length||t){const r=t||a,i=cr.fromObject(e,{...n,zone:r,specificOffset:s});return o?i:i.setZone(a)}return cr.invalid(new ye("unparsable",`the input "${i}" can't be parsed as ${r}`))}function Gn(e,t,n=!0){return e.isValid?bt.create(ne.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Jn(e,t){const n=e.c.year>9999||e.c.year<0;let r="";return n&&e.c.year>=0&&(r+="+"),r+=Ve(e.c.year,n?6:4),t?(r+="-",r+=Ve(e.c.month),r+="-",r+=Ve(e.c.day)):(r+=Ve(e.c.month),r+=Ve(e.c.day)),r}function Qn(e,t,n,r,i,s){let o=Ve(e.c.hour);return t?(o+=":",o+=Ve(e.c.minute),0===e.c.millisecond&&0===e.c.second&&n||(o+=":")):o+=Ve(e.c.minute),0===e.c.millisecond&&0===e.c.second&&n||(o+=Ve(e.c.second),0===e.c.millisecond&&r||(o+=".",o+=Ve(e.c.millisecond,3))),i&&(e.isOffsetFixed&&0===e.offset&&!s?o+="Z":e.o<0?(o+="-",o+=Ve(Math.trunc(-e.o/60)),o+=":",o+=Ve(Math.trunc(-e.o%60))):(o+="+",o+=Ve(Math.trunc(e.o/60)),o+=":",o+=Ve(Math.trunc(e.o%60)))),s&&(o+="["+e.zone.ianaName+"]"),o}const Xn={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},er={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},tr={ordinal:1,hour:0,minute:0,second:0,millisecond:0},nr=["year","month","day","hour","minute","second","millisecond"],rr=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],ir=["year","ordinal","hour","minute","second","millisecond"];function sr(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return function(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new c(e);return t}(e)}}function or(e,t){const n=oe(t.zone,pe.defaultZone),r=ne.fromObject(t),i=pe.now();let s,o;if(Me(e.year))s=i;else{for(const t of nr)Me(e[t])&&(e[t]=Xn[t]);const t=Ie(e)||Ne(e);if(t)return cr.invalid(t);const r=n.offset(i);[s,o]=Zn(e,r,n)}return new cr({ts:s,zone:n,loc:r,o})}function ar(e,t,n){const r=!!Me(n.round)||n.round,i=(e,i)=>(e=We(e,r||n.calendary?0:2,!0),t.loc.clone(n).relFormatter(n).format(e,i)),s=r=>n.calendary?t.hasSame(e,r)?0:t.startOf(r).diff(e.startOf(r),r).get(r):t.diff(e,r).get(r);if(n.unit)return i(s(n.unit),n.unit);for(const e of n.units){const t=s(e);if(Math.abs(t)>=1)return i(t,e)}return i(e>t?-0:0,n.units[n.units.length-1])}function ur(e){let t,n={};return e.length>0&&"object"==typeof e[e.length-1]?(n=e[e.length-1],t=Array.from(e).slice(0,e.length-1)):t=Array.from(e),[n,t]}class cr{constructor(e){const t=e.zone||pe.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new ye("invalid input"):null)||(t.isValid?null:$n(t));this.ts=Me(e.ts)?pe.now():e.ts;let r=null,i=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[r,i]=[e.old.c,e.old.o];else{const e=t.offset(this.ts);r=zn(this.ts,e),n=Number.isNaN(r.year)?new ye("invalid input"):null,r=n?null:r,i=n?null:e}this._zone=t,this.loc=e.loc||ne.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=r,this.o=i,this.isLuxonDateTime=!0}static now(){return new cr({})}static local(){const[e,t]=ur(arguments),[n,r,i,s,o,a,u]=t;return or({year:n,month:r,day:i,hour:s,minute:o,second:a,millisecond:u},e)}static utc(){const[e,t]=ur(arguments),[n,r,i,s,o,a,u]=t;return e.zone=ie.utcInstance,or({year:n,month:r,day:i,hour:s,minute:o,second:a,millisecond:u},e)}static fromJSDate(e,t={}){const n=(r=e,"[object Date]"===Object.prototype.toString.call(r)?e.valueOf():NaN);var r;if(Number.isNaN(n))return cr.invalid("invalid input");const i=oe(t.zone,pe.defaultZone);return i.isValid?new cr({ts:n,zone:i,loc:ne.fromObject(t)}):cr.invalid($n(i))}static fromMillis(e,t={}){if(De(e))return e<-Vn||e>Vn?cr.invalid("Timestamp out of range"):new cr({ts:e,zone:oe(t.zone,pe.defaultZone),loc:ne.fromObject(t)});throw new l(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(De(e))return new cr({ts:1e3*e,zone:oe(t.zone,pe.defaultZone),loc:ne.fromObject(t)});throw new l("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const n=oe(t.zone,pe.defaultZone);if(!n.isValid)return cr.invalid($n(n));const r=ne.fromObject(t),i=tt(e,sr),{minDaysInFirstWeek:s,startOfWeek:o}=Ce(i,r),a=pe.now(),c=Me(t.specificOffset)?n.offset(a):t.specificOffset,l=!Me(i.ordinal),d=!Me(i.year),h=!Me(i.month)||!Me(i.day),f=d||h,m=i.weekYear||i.weekNumber;if((f||l)&&m)throw new u("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(h&&l)throw new u("Can't mix ordinal dates with month/day");const p=m||i.weekday&&!f;let y,g,v=zn(a,c);p?(y=rr,g=er,v=Te(v,s,o)):l?(y=ir,g=tr,v=Oe(v)):(y=nr,g=Xn);let b=!1;for(const e of y)Me(i[e])?i[e]=b?g[e]:v[e]:b=!0;const w=p?function(e,t=4,n=1){const r=Ae(e.weekYear),i=Re(e.weekNumber,1,Ge(e.weekYear,t,n)),s=Re(e.weekday,1,7);return r?i?!s&&be("weekday",e.weekday):be("week",e.weekNumber):be("weekYear",e.weekYear)}(i,s,o):l?function(e){const t=Ae(e.year),n=Re(e.ordinal,1,ze(e.year));return t?!n&&be("ordinal",e.ordinal):be("year",e.year)}(i):Ie(i),_=w||Ne(i);if(_)return cr.invalid(_);const k=p?xe(i,s,o):l?Ee(i):i,[S,T]=Zn(k,c,n),x=new cr({ts:S,zone:n,o:T,loc:r});return i.weekday&&f&&e.weekday!==x.weekday?cr.invalid("mismatched weekday",`you can't specify both a weekday of ${i.weekday} and a date of ${x.toISO()}`):x}static fromISO(e,t={}){const[n,r]=function(e){return St(e,[Yt,Xt],[Gt,en],[Jt,tn],[Qt,nn])}(e);return Yn(n,r,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[n,r]=function(e){return St(function(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(e),[Kt,Bt])}(e);return Yn(n,r,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[n,r]=function(e){return St(e,[Wt,Zt],[Ut,Zt],[zt,Ht])}(e);return Yn(n,r,t,"HTTP",t)}static fromFormat(e,t,n={}){if(Me(e)||Me(t))throw new l("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:i=null}=n,s=ne.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0}),[o,a,u,c]=function(e,t,n){const{result:r,zone:i,specificOffset:s,invalidReason:o}=Fn(e,t,n);return[r,i,s,o]}(s,e,t);return c?cr.invalid(c):Yn(o,a,n,`format ${t}`,e,u)}static fromString(e,t,n={}){return cr.fromFormat(e,t,n)}static fromSQL(e,t={}){const[n,r]=function(e){return St(e,[sn,Xt],[on,an])}(e);return Yn(n,r,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new l("need to specify a reason the DateTime is invalid");const n=e instanceof ye?e:new ye(e,t);if(pe.throwOnInvalid)throw new s(n);return new cr({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const n=jn(e,ne.fromObject(t));return n?n.map((e=>e?e.val:null)).join(""):null}static expandFormat(e,t={}){return qn(bt.parseFormat(e),ne.fromObject(t)).map((e=>e.val)).join("")}get(e){return this[e]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Kn(this).weekYear:NaN}get weekNumber(){return this.isValid?Kn(this).weekNumber:NaN}get weekday(){return this.isValid?Kn(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Bn(this).weekday:NaN}get localWeekNumber(){return this.isValid?Bn(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Bn(this).weekYear:NaN}get ordinal(){return this.isValid?Oe(this.c).ordinal:NaN}get monthShort(){return this.isValid?wn.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?wn.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?wn.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?wn.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,n=He(this.c),r=this.zone.offset(n-e),i=this.zone.offset(n+e),s=this.zone.offset(n-r*t),o=this.zone.offset(n-i*t);if(s===o)return[this];const a=n-s*t,u=n-o*t,c=zn(a,s),l=zn(u,o);return c.hour===l.hour&&c.minute===l.minute&&c.second===l.second&&c.millisecond===l.millisecond?[Wn(this,{ts:a}),Wn(this,{ts:u})]:[this]}get isInLeapYear(){return Ue(this.year)}get daysInMonth(){return Ze(this.year,this.month)}get daysInYear(){return this.isValid?ze(this.year):NaN}get weeksInWeekYear(){return this.isValid?Ge(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Ge(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:n,calendar:r}=bt.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:n,outputCalendar:r}}toUTC(e=0,t={}){return this.setZone(ie.instance(e),t)}toLocal(){return this.setZone(pe.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:n=!1}={}){if((e=oe(e,pe.defaultZone)).equals(this.zone))return this;if(e.isValid){let r=this.ts;if(t||n){const t=e.offset(this.ts),n=this.toObject();[r]=Zn(n,t,e)}return Wn(this,{ts:r,zone:e})}return cr.invalid($n(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:n}={}){return Wn(this,{loc:this.loc.clone({locale:e,numberingSystem:t,outputCalendar:n})})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=tt(e,sr),{minDaysInFirstWeek:n,startOfWeek:r}=Ce(t,this.loc),i=!Me(t.weekYear)||!Me(t.weekNumber)||!Me(t.weekday),s=!Me(t.ordinal),o=!Me(t.year),a=!Me(t.month)||!Me(t.day),c=o||a,l=t.weekYear||t.weekNumber;if((c||s)&&l)throw new u("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(a&&s)throw new u("Can't mix ordinal dates with month/day");let d;i?d=xe({...Te(this.c,n,r),...t},n,r):Me(t.ordinal)?(d={...this.toObject(),...t},Me(t.day)&&(d.day=Math.min(Ze(d.year,d.month),d.day))):d=Ee({...Oe(this.c),...t});const[h,f]=Zn(d,this.o,this.zone);return Wn(this,{ts:h,o:f})}plus(e){return this.isValid?Wn(this,Hn(this,gn.fromDurationLike(e))):this}minus(e){return this.isValid?Wn(this,Hn(this,gn.fromDurationLike(e).negate())):this}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const n={},r=gn.normalizeUnit(e);switch(r){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0}if("weeks"===r)if(t){const e=this.loc.getStartOfWeek(),{weekday:t}=this;t<e&&(n.weekNumber=this.weekNumber-1),n.weekday=e}else n.weekday=1;if("quarters"===r){const e=Math.ceil(this.month/3);n.month=3*(e-1)+1}return this.set(n)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?bt.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):Rn}toLocaleString(e=p,t={}){return this.isValid?bt.create(this.loc.clone(t),e).formatDateTime(this):Rn}toLocaleParts(e={}){return this.isValid?bt.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:n=!1,includeOffset:r=!0,extendedZone:i=!1}={}){if(!this.isValid)return null;const s="extended"===e;let o=Jn(this,s);return o+="T",o+=Qn(this,s,t,n,r,i),o}toISODate({format:e="extended"}={}){return this.isValid?Jn(this,"extended"===e):null}toISOWeekDate(){return Gn(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:n=!0,includePrefix:r=!1,extendedZone:i=!1,format:s="extended"}={}){return this.isValid?(r?"T":"")+Qn(this,"extended"===s,t,e,n,i):null}toRFC2822(){return Gn(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Gn(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Jn(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:n=!0}={}){let r="HH:mm:ss.SSS";return(t||e)&&(n&&(r+=" "),t?r+="z":e&&(r+="ZZ")),Gn(this,r,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Rn}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",n={}){if(!this.isValid||!e.isValid)return gn.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...n},i=(a=t,Array.isArray(a)?a:[a]).map(gn.normalizeUnit),s=e.valueOf()>this.valueOf(),o=function(e,t,n,r){let[i,s,o,a]=function(e,t,n){const r=[["years",(e,t)=>t.year-e.year],["quarters",(e,t)=>t.quarter-e.quarter+4*(t.year-e.year)],["months",(e,t)=>t.month-e.month+12*(t.year-e.year)],["weeks",(e,t)=>{const n=_n(e,t);return(n-n%7)/7}],["days",_n]],i={},s=e;let o,a;for(const[u,c]of r)n.indexOf(u)>=0&&(o=u,i[u]=c(e,t),a=s.plus(i),a>t?(i[u]--,(e=s.plus(i))>t&&(a=e,i[u]--,e=s.plus(i))):e=a);return[e,i,a,o]}(e,t,n);const u=t-i,c=n.filter((e=>["hours","minutes","seconds","milliseconds"].indexOf(e)>=0));0===c.length&&(o<t&&(o=i.plus({[a]:1})),o!==i&&(s[a]=(s[a]||0)+u/(o-i)));const l=gn.fromObject(s,r);return c.length>0?gn.fromMillis(u,r).shiftTo(...c).plus(l):l}(s?this:e,s?e:this,i,r);var a;return s?o.negate():o}diffNow(e="milliseconds",t={}){return this.diff(cr.now(),e,t)}until(e){return this.isValid?bn.fromDateTimes(this,e):this}hasSame(e,t,n){if(!this.isValid)return!1;const r=e.valueOf(),i=this.setZone(e.zone,{keepLocalTime:!0});return i.startOf(t,n)<=r&&r<=i.endOf(t,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||cr.fromObject({},{zone:this.zone}),n=e.padding?this<t?-e.padding:e.padding:0;let r=["years","months","days","hours","minutes","seconds"],i=e.unit;return Array.isArray(e.unit)&&(r=e.unit,i=void 0),ar(t,this.plus(n),{...e,numeric:"always",units:r,unit:i})}toRelativeCalendar(e={}){return this.isValid?ar(e.base||cr.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(cr.isDateTime))throw new l("min requires all arguments be DateTimes");return qe(e,(e=>e.valueOf()),Math.min)}static max(...e){if(!e.every(cr.isDateTime))throw new l("max requires all arguments be DateTimes");return qe(e,(e=>e.valueOf()),Math.max)}static fromFormatExplain(e,t,n={}){const{locale:r=null,numberingSystem:i=null}=n;return Fn(ne.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0}),e,t)}static fromStringExplain(e,t,n={}){return cr.fromFormatExplain(e,t,n)}static get DATE_SHORT(){return p}static get DATE_MED(){return y}static get DATE_MED_WITH_WEEKDAY(){return g}static get DATE_FULL(){return v}static get DATE_HUGE(){return b}static get TIME_SIMPLE(){return w}static get TIME_WITH_SECONDS(){return _}static get TIME_WITH_SHORT_OFFSET(){return k}static get TIME_WITH_LONG_OFFSET(){return S}static get TIME_24_SIMPLE(){return T}static get TIME_24_WITH_SECONDS(){return x}static get TIME_24_WITH_SHORT_OFFSET(){return O}static get TIME_24_WITH_LONG_OFFSET(){return E}static get DATETIME_SHORT(){return C}static get DATETIME_SHORT_WITH_SECONDS(){return I}static get DATETIME_MED(){return N}static get DATETIME_MED_WITH_SECONDS(){return M}static get DATETIME_MED_WITH_WEEKDAY(){return D}static get DATETIME_FULL(){return A}static get DATETIME_FULL_WITH_SECONDS(){return L}static get DATETIME_HUGE(){return P}static get DATETIME_HUGE_WITH_SECONDS(){return q}}function lr(e){if(cr.isDateTime(e))return e;if(e&&e.valueOf&&De(e.valueOf()))return cr.fromJSDate(e);if(e&&"object"==typeof e)return cr.fromObject(e);throw new l(`Unknown datetime argument: ${e}, of type ${typeof e}`)}class dr{constructor(e,t,n){this.tcgCardPriceRepository=e,this.keyValueRepository=t,this.currencyApi=n}static getId=()=>"FetchJapaneseCardPrices";handle=async e=>{const t=await this.keyValueRepository.find(r.c),n=cr.now();if(!t||!n.hasSame(cr.fromISO(t.updatedOn),"day",{})){const e=await this.currencyApi.getRatesForJpy();await this.keyValueRepository.save(r.c,e.jpy.usd,n.toISO())}const i=await this.keyValueRepository.find(r.c),s=await this.tcgCardPriceRepository.findByCardsIds(e.cardIds);return s.forEach((e=>{if(e.priceInUsd=null,e.prices.length>0){let t=e.prices.find((e=>"JPY"===e.priceCurrency&&"NM"===e.condition));t||(t=e.prices.find((e=>"JPY"===e.priceCurrency))),t||(t=e.prices.find((e=>"USD Cents"===e.priceCurrency&&"Ungraded"===e.condition))),t||(t=e.prices[0]),"USD Cents"===t.priceCurrency?e.priceInUsd=(t.priceAmount/100).toFixed(2):"JPY"===t.priceCurrency&&(e.priceInUsd=(t.priceAmount*i.value).toFixed(2)),e.urlToListing=t.listingUrl}})),s}}},18:(e,t,n)=>{"use strict";n.d(t,{U:()=>r});class r{constructor(e){this.connection=e}findByCardsIds=async e=>(await this.connection.TcgCardPrice.where("cardId").anyOf(e)).toArray();save=async e=>{await this.connection.TcgCardPrice.put(e)}}},245:(e,t,n)=>{"use strict";n.d(t,{l:()=>r});class r{constructor(e){this.name=e}isAll(){return"all"===this.name}filterRows(e,t=!1){return this.isAll()&&!t?e:e.filter((e=>e.region===this.name))}buildUri(e){return this.isAll()?e.replace("[REGION]",""):e.replace("[REGION]","/"+this.name)}static fromCurrentUrl(){const e=window.location.href.replace("#","");return 4===e.split("/").length?new r("all"):new r(e.split("/").slice(-1)[0])}}},203:(e,t,n)=>{"use strict";n.d(t,{T:()=>s});var r=n(746),i=n(245);class s{constructor(e){this.settings=e}getId=()=>"collection-history-feature";needsToBeApplied=e=>"dashboard_page"===e.getRouteName();apply=async()=>{const e=i.l.fromCurrentUrl(),t=new r.V(this.settings.getGoogleSpreadSheetId(),"Collection history"),n=e.filterRows(await t.parse(),!0);if(0===n.length)return;window.addEventListener("keydown",(e=>{"Escape"===e.key&&"#modal"===window.location.hash&&(window.location.hash="")}));const s=document.querySelector("main#page-content"),o=document.createElement("a");o.setAttribute("href","#modal"),o.classList.add("button","button-primary","chart-modal"),o.innerHTML='<span class="fa-solid fa-chart-line"></span>',document.querySelector("#tcg-region-links-button-group-container").appendChild(o);const a=document.createElement("section");a.classList.add("modal-window"),a.id="modal",a.innerHTML='<a class="modal-overlay" aria-hidden="true" href="#" tabindex="-1"></a>\n                          <div class="modal-content">\n                            <a title="Close modal" aria-label="Close modal" href="#" class="modal-close">&times; </a>\n                            <h2 id="modal-title">Collection history</h2>\n                            <div class="chart"></div>\n                          </div>',s.appendChild(a);const u=echarts.init(a.querySelector(".modal-content .chart"));n.sort((function(e,t){const n=new Date(e.date),r=new Date(t.date);return n<r?-1:n>r?1:0}));const c=n[n.length-1],l={animation:!1,tooltip:{trigger:"axis",valueFormatter:e=>e,backgroundColor:"#181A1B",axisPointer:{label:{formatter:function(e){return new Date(e.value).toLocaleDateString()}}}},legend:{textStyle:{color:"#d8d4cf"}},xAxis:{type:"time",axisLabel:{formatter:{year:"{yyyy}",month:"{MMM}",day:"{d} {MMM}",hour:"",minute:"",second:"",millisecond:"",none:""},color:"#d8d4cf"}},yAxis:[{axisLabel:{formatter:function(e,t){return e},color:"#d8d4cf"},splitLine:{show:!1}}],series:[{name:`Unique cards (${c.uniqueCards})`,type:"line",symbol:"none",smooth:.6,data:n.map((e=>[e.date,e.uniqueCards]))},{name:`Unique variants (${c.uniqueVariants})`,type:"line",symbol:"none",smooth:.6,data:n.map((e=>[e.date,e.uniqueVariants]))},{name:`Total cards (${c.totalCards})`,type:"line",symbol:"none",smooth:.6,data:n.map((e=>[e.date,e.totalCards]))},{name:`Total value ($${c.totalValue})`,type:"line",symbol:"none",smooth:.6,tooltip:{valueFormatter:e=>"$"+e},data:n.map((e=>[e.date,e.totalValue]))}]};u.setOption(l)}}},334:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});class r{constructor(){}getId=()=>"dashboard-rearrangement-feature";needsToBeApplied=e=>"dashboard_page"===e.getRouteName();apply=async()=>{const[e,t]=document.querySelectorAll("div.dashboard-sections-region");e.querySelector("div#dashboard-sets-completed-section").style.display="none",t.style.display="none",e.appendChild(t.querySelectorAll("div.dashboard-sections-subregion")[1].querySelector("div.dashboard-section"))}}},890:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{c:()=>c});var i=n(786),s=n(973),o=n(979),a=n(84),u=e([s]);s=(u.then?(await u)():u)[0];class c{constructor(e){this.settings=e}getId=()=>"display-japanese-prices-feature";needsToBeApplied=e=>!this.settings.hidePrices()&&("cards_page"===e.getRouteName()||"sets_set_cards_page"===e.getRouteName()&&2===e.getTcgRegionId());apply=async()=>{const e=a.t.fromHtml().getCardIds();s.A.getMessageHandler(i.X.getId()).handle({cardIds:e}).then((e=>{e.forEach((e=>{const t=document.querySelector(`div.card-image-grid-item[data-card-id="${e.cardId}"]`);t&&e.priceInUsd&&(t.querySelector(".card-image-controls-item-price").innerHTML=`<a href="${e.urlToListing}" target="_blank">$${e.priceInUsd}</a>`)}))})).catch((e=>{o.y.error(e.message)}))}}r()}catch(e){r(e)}}))},545:(e,t,n)=>{"use strict";n.d(t,{B:()=>i});var r=n(785);class i{constructor(e){this.settings=e}getId=()=>"hide-prices-feature";needsToBeApplied=e=>this.settings.hidePrices();apply=async()=>{(0,r.gR)("*",/\$([\d]+\.?\d*)/g).forEach((e=>{e.innerHTML=e.innerHTML.replace(/\$([\d]+\.?\d*)/g,"$—")}))}}},694:(e,t,n)=>{"use strict";n.d(t,{l:()=>i});class r{constructor(e){this.settings=e,this.cardMarketiconUrl=chrome.runtime.getURL("dist/assets/card-market.jpg"),this.ebayIconUrl=chrome.runtime.getURL("dist/assets/ebay.png")}buildFor=(e,t)=>{const n=[],r=e.querySelector("a").getAttribute("title").split("(")[0].trim();if(this.settings.getMarketPlaceLinks().includes("cardMarket")){const i=document.createElement("a"),s=parseInt(e.querySelector("span.card-image-grid-item-info-overlay-text-part").innerText.split("/")[0].replace(/\D/g,"").trim());i.classList.add("market-place-link"),i.setAttribute("href",`https://www.cardmarket.com/en/Pokemon/Products/Search?searchString=${encodeURIComponent(r)}+${encodeURIComponent(s)}+${t}`),i.setAttribute("title","Find this card on cardmarket.com"),i.setAttribute("target","_blank"),i.innerHTML=`<img src="${this.cardMarketiconUrl}" alt="Card market" />`,n.push(i)}if(this.settings.getMarketPlaceLinks().includes("ebay")){const t=document.createElement("a"),i=e.querySelector("span.card-image-grid-item-info-overlay-text-part").innerText.trim(),s={_from:"R40"};this.settings.getEbayListingType()&&(s["LH_"+this.settings.getEbayListingType()]=1),this.settings.getEbaySortBy()&&(s._sop=this.settings.getEbaySortBy()),this.settings.getEbayLocation()&&(s.LH_PrefLoc=this.settings.getEbayLocation()),t.classList.add("market-place-link"),t.setAttribute("href",`${this.settings.getEbayUrl().replace(/\/$/,"")}/sch/i.html?_nkw=${encodeURIComponent(r)}+${encodeURIComponent(i)}&${new URLSearchParams(s).toString()}`),t.setAttribute("title",`Find this card on ${this.settings.getEbayUrl()}`),t.setAttribute("target","_blank"),t.innerHTML=`<img src="${this.ebayIconUrl}" alt="Ebay" />`,n.push(t)}return n}}class i{constructor(e){this.settings=e}getId=()=>"market-place-links-feature";needsToBeApplied=e=>0!==this.settings.getMarketPlaceLinks().length&&("cards_page"===e.getRouteName()||"sets_set_cards_page"===e.getRouteName());apply=async()=>{const e=document.querySelectorAll("div#card-image-grid div.card-image-grid-item"),t=document.querySelector("span#card-search-result-title-expansion-code")?.innerText||"",n=new r(this.settings);e.forEach((e=>{n.buildFor(e,t).forEach((t=>{e.querySelector("div.card-image-controls-item").appendChild(t)}))}))}}},10:(e,t,n)=>{"use strict";n.d(t,{B:()=>r});class r{constructor(e){this.settings=e}getId=()=>"new-menu-item-feature";needsToBeApplied=e=>document.querySelectorAll("div#navbar-buttons").length>0;apply=async()=>{const e=document.querySelector("div#navbar-buttons"),t=document.createElement("a");t.classList.add("navbar-button"),t.setAttribute("href","https://docs.google.com/spreadsheets/d/"+this.settings.getGoogleSpreadSheetId()),t.setAttribute("title","Navigate to spreadsheet"),t.setAttribute("target","_blank"),t.innerHTML='<span aria-hidden="true" class="fa-solid fa-file-csv"></span>',e.prepend(t)}}},857:(e,t,n)=>{"use strict";n.d(t,{H:()=>i});var r=n(785);class i{constructor(){}getId=()=>"print-binder-expansion-logos";needsToBeApplied=e=>"sets_page"===e.getRouteName();apply=async()=>{const e=document.querySelectorAll(".set-logo-grid-item"),t=document.createElement("div");t.setAttribute("id","print"),e.forEach((e=>{const n=e.querySelector("img.set-logo-grid-item-set-logo").getAttribute("src"),i=e.querySelector(".set-logo-grid-item-set-name").innerText,s=(0,r.g9)(i),o=document.createElement("div");if(o.classList.add("expansion"),o.setAttribute("data-expansions-name",s),o.innerHTML+=`<img src="${n}" class="logo" alt="Expansion logo"/>`,e.querySelectorAll("img.set-logo-grid-item-set-symbol").length>0){const t=e.querySelector("img.set-logo-grid-item-set-symbol").getAttribute("src");o.innerHTML+=`<img src="${t}" class="symbol" alt="Expansion Symbol"/>`}t.appendChild(o.cloneNode(!0)),t.appendChild(o.cloneNode(!0));const a=document.createElement("input");a.setAttribute("type","checkbox"),a.setAttribute("data-expansions-name",s),a.addEventListener("click",(()=>{document.querySelector("button span.count").innerHTML=document.querySelectorAll('input[type="checkbox"][data-expansions-name]:checked').length})),e.appendChild(a)}));const n=document.body;n.appendChild(t);const i=document.createElement("div");i.classList.add("print-navigation");const s=document.createElement("div");s.classList.add("inner"),i.appendChild(s),n.appendChild(i);const o=document.createElement("button");o.classList.add("cancel"),o.innerHTML='<span class="fa-solid fa-ban"></span><div>Exit print mode</div>',o.addEventListener("click",(()=>{n.classList.remove("in-print-selection-mode")}));const a=document.createElement("button");a.classList.add("print"),a.innerHTML='<span class="fa-solid fa-print"></span><div>Print <span class="count">0</span> expansion logo(s)</div>',a.addEventListener("click",(()=>{document.querySelectorAll("div.expansion[data-expansions-name]").forEach((e=>{e.style.display=null})),document.querySelectorAll('input[type="checkbox"][data-expansions-name]:not(:checked)').forEach((e=>{const t=e.getAttribute("data-expansions-name");document.querySelectorAll(`div.expansion[data-expansions-name="${t}"]`).forEach((e=>{e.style.display="none"}))})),n.classList.add("printing"),window.print()})),s.appendChild(a),s.appendChild(o);const u=document.createElement("button");u.classList.add("button","button-plain-alt","toggle-print-selection"),u.setAttribute("title","Print expansion logos"),u.innerHTML='<span class="fa-solid fa-print"></span><div>Print expansion logos</div>',u.addEventListener("click",(()=>{n.classList.add("in-print-selection-mode")})),document.querySelector("div#set-search-result-header").appendChild(u),addEventListener("afterprint",(()=>{n.classList.remove("in-print-selection-mode"),n.classList.remove("printing")}))}}},256:(e,t,n)=>{"use strict";n.d(t,{O:()=>s});var r=n(785),i=n(84);class s{constructor(){}getId=()=>"print-binder-placeholders-feature";needsToBeApplied=e=>"sets_set_cards_page"===e.getRouteName();apply=async()=>{const e=i.t.fromHtml(),t=e.getCardIdToCardVariantTypeIdsMap(),n=e.getIdToCardVariantTypeDtoMap(),s=document.querySelectorAll("div#card-image-grid div.card-image-grid-item"),o=document.createElement("div");o.setAttribute("id","print"),s.forEach((e=>{const i=e.getAttribute("data-card-id"),s=e.querySelector("a").getAttribute("title").split("(")[0].trim(),a=e.querySelector("span.card-image-grid-item-info-overlay-text-part").innerText.trim();t[i].forEach((e=>{const t=n[e].name,u=document.createElement("div");u.classList.add("placeholder",(0,r.g9)(s),(0,r.g9)(t)),u.setAttribute("data-card-id",i),u.innerHTML=`<div>${s}</div><div>${a}</div><div>${t}</div>`,o.appendChild(u)}));const u=document.createElement("input");u.setAttribute("type","checkbox"),u.setAttribute("data-card-id",i),u.addEventListener("click",(()=>{document.querySelector("button span.count").innerHTML=document.querySelectorAll('input[type="checkbox"][data-card-id]:checked').length})),e.appendChild(u)}));const a=document.body;a.appendChild(o);const u=document.createElement("div");u.classList.add("print-navigation");const c=document.createElement("div");c.classList.add("inner"),u.appendChild(c),a.appendChild(u);const l=document.createElement("button");l.classList.add("cancel"),l.innerHTML='<span class="fa-solid fa-ban"></span><div>Exit print mode</div>',l.addEventListener("click",(()=>{a.classList.remove("in-print-selection-mode")}));const d=document.createElement("button");d.classList.add("print"),d.innerHTML='<span class="fa-solid fa-print"></span><div>Print <span class="count">0</span> binder placeholder(s)</div>',d.addEventListener("click",(()=>{document.querySelectorAll("div.placeholder[data-card-id]").forEach((e=>{e.style.display=null})),document.querySelectorAll('input[type="checkbox"][data-card-id]:not(:checked)').forEach((e=>{const t=e.getAttribute("data-card-id");document.querySelectorAll(`div.placeholder[data-card-id="${t}"]`).forEach((e=>{e.style.display="none"}))})),a.classList.add("printing"),window.print()})),c.appendChild(d),c.appendChild(l);const h=document.createElement("button");h.classList.add("button","button-plain-alt","toggle-print-selection"),h.setAttribute("title","Print binder placeholders"),h.innerHTML='<span class="fa-solid fa-print"></span><div>Print binder placeholders</div>',h.addEventListener("click",(()=>{a.classList.add("in-print-selection-mode")})),document.querySelector("#card-search-result-header-actions-dropdown").appendChild(h),addEventListener("afterprint",(()=>{a.classList.remove("in-print-selection-mode"),a.classList.remove("printing")}))}}},362:(e,t,n)=>{"use strict";n.d(t,{P:()=>o});var r=n(746);class i{constructor(e){if(!e)throw new Error("Grading company name cannot be empty");this.name=e}getName=()=>this.name.toLowerCase();getLabel=()=>this.name;getGetCertUrl=e=>{if("psa"===this.getName())return`https://www.psacard.com/cert/${e}`;if("cgc"===this.getName())return`https://www.cgccards.com/certlookup/${e}`;throw new Error(`Unknown grading company ${this.name}`)}}var s=n(84);class o{constructor(e){this.settings=e}getId=()=>"purchase-price-feature";needsToBeApplied=e=>"cards_card_page"===e.getRouteName();apply=async()=>{const e=s.t.fromHtml().getCardId(),t=document.createElement("div");t.classList.add("tcg-collector-card-prices-wrapper");const n=document.createElement("div");n.classList.add("tcg-collector-card-prices");const o=new r.V(this.settings.getGoogleSpreadSheetId(),"Slabs / Singles"),a=(await o.parse()).filter((t=>parseInt(t.cardId)===e));if(0===a.length)return t;a.forEach((function(e){const t=document.createElement("div");t.innerHTML=`<div>${e.purchaseDate}</div><div>${e.price}</div>`;try{const n=new i(e.gradingCompany);e.certNumber?t.innerHTML+=`\n<div class="grading">\n    <span>${e.type}</span>\n    <a href="${n.getGetCertUrl(e.certNumber)}" target="_blank" title="${n.getLabel()}" class="icon ${n.getName()}">\n        ${n.getLabel()}\n    </a>\n</div>`:t.innerHTML+=`\n<div class="grading">\n    <span>${e.type}</span>\n    <span title="${n.getLabel()}" class="icon ${n.getName()}">\n        ${n.getLabel()}\n    </span>\n</div>`}catch(n){t.innerHTML+=`<div>${e.type}</div>`}n.appendChild(t)}));const u=document.createElement("div");u.innerHTML="Purchase price(s)",u.classList.add("title"),t.appendChild(u),t.appendChild(n),document.querySelector("div#card-page-inner-content div.card-image-controls").appendChild(t)}}},125:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(746),i=n(245);class s{constructor(e){this.settings=e}getId=()=>"quick-access-links-feature";needsToBeApplied=e=>"dashboard_page"===e.getRouteName();apply=async()=>{const e=i.l.fromCurrentUrl(),t=document.querySelectorAll("div.dashboard-section div.list-group")[1];t.innerHTML='<div class="loading-state-loading-spinner-underlay" style="display: flex; justify-content: center"><div class="loading-state-loading-spinner loading-spinner"></div></div>';const n=new r.V(this.settings.getGoogleSpreadSheetId(),"Slabs / Singles"),s=`/cards?releaseDateOrder=newToOld&cardsPerPage=120&displayAs=images&sortBy=cardNameAsc&cards=${e.filterRows(await n.parse()).filter((e=>"Single"===e.type)).map((e=>parseInt(e.cardId))).join(",")}`,o=new r.V(this.settings.getGoogleSpreadSheetId(),"Quick access links"),a=(await o.parse()).filter((t=>"TRUE"===t[e.name]));a.push({title:"Singles",url:s,icon:"fa-database"}),t.innerHTML="",a.forEach((n=>{const r=document.createElement("a");r.classList.add("list-group-item"),r.setAttribute("href",e.buildUri(n.url)),r.innerHTML=`\n        <span class="list-group-item-left-item-container">\n          <span aria-hidden="true" class="list-group-item-side-item-icon fa-solid ${n.icon} fa-fw"></span>\n        </span>\n        ${n.title}\n        <span class="list-group-item-right-item-container">\n          <span aria-hidden="true" class="list-group-item-side-item-icon fa-solid fa-chevron-right"></span>\n        </span>`,t.appendChild(r)}))}}},853:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{f:()=>u});var i=n(979),s=n(772),o=n(973),a=e([o]);o=(a.then?(await a)():a)[0];class u{constructor(e){this.settings=e}getId=()=>"sync-japanese-prices-feature";needsToBeApplied=e=>!this.settings.hidePrices()&&"sets_set_cards_page"===e.getRouteName()&&2===e.getTcgRegionId();apply=async()=>{if(0===document.querySelectorAll("#card-search-result-title-set-like-name").length)return;const e=document.querySelector("#card-search-result-title-set-like-name")?.innerText.trim().toLowerCase()||null,t=document.createElement("button");t.setAttribute("type","button"),t.setAttribute("title","Re-sync prices"),t.classList.add("button","button-plain-alt"),t.innerHTML='<span aria-hidden="true" class="button-icon fa-solid fa-rotate fa-fw"></span> Prices',t.addEventListener("click",(()=>{o.A.getMessageHandler(s.W.getId()).handle({expansionId:e}).then((()=>{i.y.success(`Prices for expansion "${e}" have been synced.`).show()})).catch((e=>{i.y.error(e.message)})),i.y.success("Price update started. Please do NOT navigate away from this page.").show()})),document.querySelector("div#cards-page-buttons").appendChild(t)}}r()}catch(e){r(e)}}))},84:(e,t,n)=>{"use strict";n.d(t,{t:()=>r});class r{constructor(e){this.state=e}getRouteName=()=>this.state.routeName;getTcgRegionId=()=>this.state.tcgRegionId;getCardIds=()=>this.state.cardIds||[];getCardId=()=>this.getCardIds()[0];getCardIdToCardVariantTypeIdsMap=()=>this.state.cardIdToCardVariantTypeIdsMap;getIdToCardVariantTypeDtoMap=()=>this.state.idToCardVariantTypeDtoMap;static fromHtml=()=>{const e=document.body.innerHTML,t=/window.tcgcollector[\s]*=[\s]*{[\s]*appState:(.*),[\s]*}/im;if(!t.test(e))throw new Error("AppState could not be determined");return new r(JSON.parse(e.match(t)[1]))}}},973:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{A:()=>M});var i=n(143),s=n(773),o=n(18),a=n(468),u=n(236),c=n(10),l=n(545),d=n(203),h=n(334),f=n(125),m=n(362),p=n(256),y=n(694),g=n(853),v=n(813),b=n(772),w=n(786),_=n(868),k=n(890),S=n(857),T=e([g,k]);[g,k]=T.then?(await T)():T;const x=new i.Ay("TcgCollector");x.version(1).stores({TcgCardPrice:"cardId,cardNumber,expansionId",KeyValue:"key,value"});const O=await v.wB.fromSyncStorage(),E=new s.L(x),C=new o.U(x),I=[new c.B(O),new l.B(O),new d.T(O),new h.c,new f.Z(O),new m.P(O),new p.O,new S.H,new y.l(O),new g.f(O),new k.c(O)],N=[];N[w.X.getId()]=new w.X(C,E,new u.S),N[_.k.getId()]=new _.k,N[b.W.getId()]=new b.W(new a.q,C);const M={Settings:O,Connection:x,KeyValueRepository:E,TcgCardPriceRepository:C,Features:I,getMessageHandler:e=>{if(!N.hasOwnProperty(e))throw new Error(`MessageHandler ${e} not found`);return N[e]}};r()}catch(e){r(e)}}),1)},813:(e,t,n)=>{"use strict";n.d(t,{wB:()=>o});const r="marketPlaceLinks",i="cardMarketCardLanguages",s="cardMarketSellerLocations";class o{constructor(e){this.storage=e}static getDefaults=()=>({SETTING_HIDE_PRICES:!1,SETTING_MARKET_PLACE_LINKS:[],SETTING_CARD_MARKET_CARD_LANGUAGES:[],SETTING_CARD_MARKET_SELLER_LOCATIONS:[],SETTING_CARD_MARKET_MIN_CONDITION:2,SETTING_EBAY_LISTING_TYPE:"All",SETTING_EBAY_LOCATION:98,SETTING_EBAY_SORT_BY:12});getGoogleSpreadSheetId=()=>this.storage.googleSpreadSheetId||"";hidePrices=()=>this.storage.hidePrices||!1;getMarketPlaceLinks=()=>this.storage[r]||[];getCardMarketCardLanguages=()=>this.storage[i]||[];getCardMarketSellerLocations=()=>this.storage[s]||[];getCardMarketMinCondition=()=>this.storage.cardMarketMinCondition||2;getEbayUrl=()=>this.storage.ebayUrl||"";getEbayListingType=()=>this.storage.ebayListingType||"All";getEbayLocation=()=>this.storage.ebayLocation||98;getEbaySortBy=()=>this.storage.ebaySortBy||12;get=e=>this.storage[e]||[];static getSettingsWithMultipleValues=()=>[r,i,s];static fromSyncStorage=async()=>{let{settings:e}=await chrome.storage.sync.get("settings");return new o(e||{})};static save=async e=>{const t=Object.fromEntries(e.entries());o.getSettingsWithMultipleValues().forEach((n=>{t[n]=e.getAll(n)})),await chrome.storage.sync.set({settings:t})}}},917:(e,t,n)=>{"use strict";n.d(t,{_:()=>i,p:()=>r});const r=e=>{console.log(`%c${e}`,"color:#FA7035; background:#222;")},i=e=>{r(`\n   _____                         __             _______ _____ _____    _____      _ _           _               \n  / ____|                       / _|           |__   __/ ____/ ____|  / ____|    | | |         | |              \n | (___   __ _ _   _  ___ ___  | |_ ___  _ __     | | | |   | |  __  | |     ___ | | | ___  ___| |_ ___  _ __   \n  \\___ \\ / _\` | | | |/ __/ _ \\ |  _/ _ \\| '__|    | | | |   | | |_ | | |    / _ \\| | |/ _ \\/ __| __/ _ \\| '__|  \n  ____) | (_| | |_| | (_|  __/ | || (_) | |       | | | |___| |__| | | |___| (_) | | |  __/ (__| || (_) | |     \n |_____/ \\__,_|\\__,_|\\___\\___| |_| \\___/|_|       |_|  \\_____\\_____|  \\_____\\___/|_|_|\\___|\\___|\\__\\___/|_|     \n                                                                                                                \n  ${e.padEnd(110," ")}\n`)}},785:(e,t,n)=>{"use strict";n.d(t,{PT:()=>r,g9:()=>s,gR:()=>i});const r=e=>e.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()})).replace(/\s+/g,""),i=(e,t)=>[...document.querySelectorAll(e)].filter((e=>e.childNodes?.[0]?.nodeValue?.match(t))),s=e=>e.trim().replace(/[!\"#$%&'\(\)\*\+,\.\/:;<=>\?\@\[\\\]\^`\{\|\}~]/g,"").replace(/\s/g,"-").toLowerCase()},746:(e,t,n)=>{"use strict";n.d(t,{V:()=>o});var r=n(908),i=n.n(r),s=n(785);class o{constructor(e,t){this.spreadSheetId=e,this.sheetName=t}parse=async()=>{const e=new(i())(this.spreadSheetId,{sheetName:this.sheetName,useFormat:!0});return(await e.parse()).map((e=>{const t={};return Object.keys(e).forEach((n=>{t[(0,s.PT)(n)]=e[n]})),t}))}}},483:(e,t,n)=>{"use strict";n.a(e,(async(e,t)=>{try{var r=n(917),i=n(979),s=n(973),o=n(84),a=e([s]);(s=(a.then?(await a)():a)[0]).A.Settings.getGoogleSpreadSheetId()||i.y.error("Google Spreadsheet ID not configured").show();const u=o.t.fromHtml();document.querySelector("a.navbar-logo-link img").setAttribute("src",chrome.runtime.getURL("dist/assets/tcgc-logo.png")),(0,r._)("Applying that sweet sauce 🥫");const c=document.body;for(const e of s.A.Features)e.needsToBeApplied(u)&&(c.classList.add(e.getId()),e.apply().catch((e=>{i.y.error("Oops, something 🐟y is going on. Check console for details.").show(),(0,r.p)(e.message),(0,r.p)(e.stack)})));t()}catch(e){t(e)}}))},681:()=>{},143:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>g});var r=n(744);const i=Symbol.for("Dexie"),s=globalThis[i]||(globalThis[i]=r);if(r.semVer!==s.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${r.semVer} and ${s.semVer}`);const{liveQuery:o,mergeRanges:a,rangesOverlap:u,RangeSet:c,cmp:l,Entity:d,PropModSymbol:h,PropModification:f,replacePrefix:m,add:p,remove:y}=s,g=s}},s={};function o(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={exports:{}};return i[e].call(n.exports,n,n.exports,o),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},o.a=(i,s,o)=>{var a;o&&((a=[]).d=-1);var u,c,l,d=new Set,h=i.exports,f=new Promise(((e,t)=>{l=t,c=e}));f[t]=h,f[e]=e=>(a&&e(a),d.forEach(e),f.catch((e=>{}))),i.exports=f,s((i=>{var s;u=(i=>i.map((i=>{if(null!==i&&"object"==typeof i){if(i[e])return i;if(i.then){var s=[];s.d=0,i.then((e=>{o[t]=e,r(s)}),(e=>{o[n]=e,r(s)}));var o={};return o[e]=e=>e(s),o}}var a={};return a[e]=e=>{},a[t]=i,a})))(i);var o=()=>u.map((e=>{if(e[n])throw e[n];return e[t]})),c=new Promise((t=>{(s=()=>t(o)).r=0;var n=e=>e!==a&&!d.has(e)&&(d.add(e),e&&!e.d&&(s.r++,e.push(s)));u.map((t=>t[e](n)))}));return s.r?c:o()}),(e=>(e?l(f[n]=e):c(h),r(a)))),a&&a.d<0&&(a.d=0)},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o(483)})();